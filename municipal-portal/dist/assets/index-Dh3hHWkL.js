(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var rP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yy={exports:{}},xh={},Xy={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yl=Symbol.for("react.element"),sP=Symbol.for("react.portal"),oP=Symbol.for("react.fragment"),aP=Symbol.for("react.strict_mode"),lP=Symbol.for("react.profiler"),uP=Symbol.for("react.provider"),cP=Symbol.for("react.context"),hP=Symbol.for("react.forward_ref"),dP=Symbol.for("react.suspense"),fP=Symbol.for("react.memo"),pP=Symbol.for("react.lazy"),Xg=Symbol.iterator;function mP(t){return t===null||typeof t!="object"?null:(t=Xg&&t[Xg]||t["@@iterator"],typeof t=="function"?t:null)}var Jy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ew=Object.assign,tw={};function ta(t,e,n){this.props=t,this.context=e,this.refs=tw,this.updater=n||Jy}ta.prototype.isReactComponent={};ta.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ta.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nw(){}nw.prototype=ta.prototype;function Mp(t,e,n){this.props=t,this.context=e,this.refs=tw,this.updater=n||Jy}var Vp=Mp.prototype=new nw;Vp.constructor=Mp;ew(Vp,ta.prototype);Vp.isPureReactComponent=!0;var Jg=Array.isArray,iw=Object.prototype.hasOwnProperty,Fp={current:null},rw={key:!0,ref:!0,__self:!0,__source:!0};function sw(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)iw.call(e,i)&&!rw.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),m=0;m<h;m++)d[m]=arguments[m+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:Yl,type:t,key:o,ref:l,props:s,_owner:Fp.current}}function gP(t,e){return{$$typeof:Yl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yl}function _P(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var e_=/\/+/g;function Pd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_P(""+t.key):e.toString(36)}function mc(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Yl:case sP:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+Pd(l,0):i,Jg(s)?(n="",t!=null&&(n=t.replace(e_,"$&/")+"/"),mc(s,e,n,"",function(m){return m})):s!=null&&(zp(s)&&(s=gP(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(e_,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",Jg(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+Pd(o,h);l+=mc(o,e,n,d,s)}else if(d=mP(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+Pd(o,h++),l+=mc(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function qu(t,e,n){if(t==null)return t;var i=[],s=0;return mc(t,i,"","",function(o){return e.call(n,o,s++)}),i}function vP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yt={current:null},gc={transition:null},yP={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:gc,ReactCurrentOwner:Fp};function ow(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:qu,forEach:function(t,e,n){qu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qu(t,function(){e++}),e},toArray:function(t){return qu(t,function(e){return e})||[]},only:function(t){if(!zp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=ta;Pe.Fragment=oP;Pe.Profiler=lP;Pe.PureComponent=Mp;Pe.StrictMode=aP;Pe.Suspense=dP;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yP;Pe.act=ow;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ew({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Fp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)iw.call(e,d)&&!rw.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var m=0;m<d;m++)h[m]=arguments[m+2];i.children=h}return{$$typeof:Yl,type:t.type,key:s,ref:o,props:i,_owner:l}};Pe.createContext=function(t){return t={$$typeof:cP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uP,_context:t},t.Consumer=t};Pe.createElement=sw;Pe.createFactory=function(t){var e=sw.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:hP,render:t}};Pe.isValidElement=zp;Pe.lazy=function(t){return{$$typeof:pP,_payload:{_status:-1,_result:t},_init:vP}};Pe.memo=function(t,e){return{$$typeof:fP,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=gc.transition;gc.transition={};try{t()}finally{gc.transition=e}};Pe.unstable_act=ow;Pe.useCallback=function(t,e){return Yt.current.useCallback(t,e)};Pe.useContext=function(t){return Yt.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return Yt.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return Yt.current.useEffect(t,e)};Pe.useId=function(){return Yt.current.useId()};Pe.useImperativeHandle=function(t,e,n){return Yt.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return Yt.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return Yt.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return Yt.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return Yt.current.useReducer(t,e,n)};Pe.useRef=function(t){return Yt.current.useRef(t)};Pe.useState=function(t){return Yt.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return Yt.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return Yt.current.useTransition()};Pe.version="18.3.1";Xy.exports=Pe;var se=Xy.exports;const Pl=Qy(se);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wP=se,EP=Symbol.for("react.element"),TP=Symbol.for("react.fragment"),IP=Object.prototype.hasOwnProperty,PP=wP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SP={key:!0,ref:!0,__self:!0,__source:!0};function aw(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)IP.call(e,i)&&!SP.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:EP,type:t,key:o,ref:l,props:s,_owner:PP.current}}xh.Fragment=TP;xh.jsx=aw;xh.jsxs=aw;Yy.exports=xh;var $=Yy.exports,cf={},lw={exports:{}},vn={},uw={exports:{}},cw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,le){var X=W.length;W.push(le);e:for(;0<X;){var ue=X-1>>>1,me=W[ue];if(0<s(me,le))W[ue]=le,W[X]=me,X=ue;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var le=W[0],X=W.pop();if(X!==le){W[0]=X;e:for(var ue=0,me=W.length,we=me>>>1;ue<we;){var De=2*(ue+1)-1,ye=W[De],fe=De+1,rt=W[fe];if(0>s(ye,X))fe<me&&0>s(rt,ye)?(W[ue]=rt,W[fe]=X,ue=fe):(W[ue]=ye,W[De]=X,ue=De);else if(fe<me&&0>s(rt,X))W[ue]=rt,W[fe]=X,ue=fe;else break e}}return le}function s(W,le){var X=W.sortIndex-le.sortIndex;return X!==0?X:W.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],m=[],v=1,y=null,w=3,C=!1,M=!1,V=!1,H=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(W){for(var le=n(m);le!==null;){if(le.callback===null)i(m);else if(le.startTime<=W)i(m),le.sortIndex=le.expirationTime,e(d,le);else break;le=n(m)}}function U(W){if(V=!1,N(W),!M)if(n(d)!==null)M=!0,Ge(Y);else{var le=n(m);le!==null&&Pt(U,le.startTime-W)}}function Y(W,le){M=!1,V&&(V=!1,k(I),I=-1),C=!0;var X=w;try{for(N(le),y=n(d);y!==null&&(!(y.expirationTime>le)||W&&!b());){var ue=y.callback;if(typeof ue=="function"){y.callback=null,w=y.priorityLevel;var me=ue(y.expirationTime<=le);le=t.unstable_now(),typeof me=="function"?y.callback=me:y===n(d)&&i(d),N(le)}else i(d);y=n(d)}if(y!==null)var we=!0;else{var De=n(m);De!==null&&Pt(U,De.startTime-le),we=!1}return we}finally{y=null,w=X,C=!1}}var K=!1,A=null,I=-1,S=5,R=-1;function b(){return!(t.unstable_now()-R<S)}function D(){if(A!==null){var W=t.unstable_now();R=W;var le=!0;try{le=A(!0,W)}finally{le?O():(K=!1,A=null)}}else K=!1}var O;if(typeof P=="function")O=function(){P(D)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Mn=Me.port2;Me.port1.onmessage=D,O=function(){Mn.postMessage(null)}}else O=function(){H(D,0)};function Ge(W){A=W,K||(K=!0,O())}function Pt(W,le){I=H(function(){W(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){M||C||(M=!0,Ge(Y))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(W){switch(w){case 1:case 2:case 3:var le=3;break;default:le=w}var X=w;w=le;try{return W()}finally{w=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,le){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var X=w;w=W;try{return le()}finally{w=X}},t.unstable_scheduleCallback=function(W,le,X){var ue=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ue+X:ue):X=ue,W){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=X+me,W={id:v++,callback:le,priorityLevel:W,startTime:X,expirationTime:me,sortIndex:-1},X>ue?(W.sortIndex=X,e(m,W),n(d)===null&&W===n(m)&&(V?(k(I),I=-1):V=!0,Pt(U,X-ue))):(W.sortIndex=me,e(d,W),M||C||(M=!0,Ge(Y))),W},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(W){var le=w;return function(){var X=w;w=le;try{return W.apply(this,arguments)}finally{w=X}}}})(cw);uw.exports=cw;var AP=uw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CP=se,_n=AP;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hw=new Set,Sl={};function Ls(t,e){Bo(t,e),Bo(t+"Capture",e)}function Bo(t,e){for(Sl[t]=e,t=0;t<e.length;t++)hw.add(e[t])}var Hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hf=Object.prototype.hasOwnProperty,kP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,t_={},n_={};function RP(t){return hf.call(n_,t)?!0:hf.call(t_,t)?!1:kP.test(t)?n_[t]=!0:(t_[t]=!0,!1)}function xP(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function LP(t,e,n,i){if(e===null||typeof e>"u"||xP(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Up=/[\-:]([a-z])/g;function Bp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Up,Bp);Dt[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Up,Bp);Dt[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Up,Bp);Dt[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function jp(t,e,n,i){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(LP(e,n,s,i)&&(n=null),i||s===null?RP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Qi=CP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$u=Symbol.for("react.element"),_o=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),Hp=Symbol.for("react.strict_mode"),df=Symbol.for("react.profiler"),dw=Symbol.for("react.provider"),fw=Symbol.for("react.context"),Wp=Symbol.for("react.forward_ref"),ff=Symbol.for("react.suspense"),pf=Symbol.for("react.suspense_list"),qp=Symbol.for("react.memo"),cr=Symbol.for("react.lazy"),pw=Symbol.for("react.offscreen"),i_=Symbol.iterator;function Wa(t){return t===null||typeof t!="object"?null:(t=i_&&t[i_]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,Sd;function Xa(t){if(Sd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sd=e&&e[1]||""}return`
`+Sd+t}var Ad=!1;function Cd(t,e){if(!t||Ad)return"";Ad=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var i=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){i=m}t.call(e.prototype)}else{try{throw Error()}catch(m){i=m}t()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Ad=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xa(t):""}function OP(t){switch(t.tag){case 5:return Xa(t.type);case 16:return Xa("Lazy");case 13:return Xa("Suspense");case 19:return Xa("SuspenseList");case 0:case 2:case 15:return t=Cd(t.type,!1),t;case 11:return t=Cd(t.type.render,!1),t;case 1:return t=Cd(t.type,!0),t;default:return""}}function mf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case _o:return"Portal";case df:return"Profiler";case Hp:return"StrictMode";case ff:return"Suspense";case pf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fw:return(t.displayName||"Context")+".Consumer";case dw:return(t._context.displayName||"Context")+".Provider";case Wp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qp:return e=t.displayName||null,e!==null?e:mf(t.type)||"Memo";case cr:e=t._payload,t=t._init;try{return mf(t(e))}catch{}}return null}function NP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mf(e);case 8:return e===Hp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bP(t){var e=mw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gu(t){t._valueTracker||(t._valueTracker=bP(t))}function gw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=mw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Fc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gf(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function r_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _w(t,e){e=e.checked,e!=null&&jp(t,"checked",e,!1)}function _f(t,e){_w(t,e);var n=Vr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vf(t,e.type,n):e.hasOwnProperty("defaultValue")&&vf(t,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function s_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vf(t,e,n){(e!=="number"||Fc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ja=Array.isArray;function xo(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function yf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function o_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(Ja(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vr(n)}}function vw(t,e){var n=Vr(e.value),i=Vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function a_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zu,ww=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zu=Zu||document.createElement("div"),Zu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Al(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DP=["Webkit","ms","Moz","O"];Object.keys(ul).forEach(function(t){DP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ul[e]=ul[t]})});function Ew(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ul.hasOwnProperty(t)&&ul[t]?(""+e).trim():e+"px"}function Tw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Ew(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var MP=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ef(t,e){if(e){if(MP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Tf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var If=null;function $p(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pf=null,Lo=null,Oo=null;function l_(t){if(t=eu(t)){if(typeof Pf!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Dh(e),Pf(t.stateNode,t.type,e))}}function Iw(t){Lo?Oo?Oo.push(t):Oo=[t]:Lo=t}function Pw(){if(Lo){var t=Lo,e=Oo;if(Oo=Lo=null,l_(t),e)for(t=0;t<e.length;t++)l_(e[t])}}function Sw(t,e){return t(e)}function Aw(){}var kd=!1;function Cw(t,e,n){if(kd)return t(e,n);kd=!0;try{return Sw(t,e,n)}finally{kd=!1,(Lo!==null||Oo!==null)&&(Aw(),Pw())}}function Cl(t,e){var n=t.stateNode;if(n===null)return null;var i=Dh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Sf=!1;if(Hi)try{var qa={};Object.defineProperty(qa,"passive",{get:function(){Sf=!0}}),window.addEventListener("test",qa,qa),window.removeEventListener("test",qa,qa)}catch{Sf=!1}function VP(t,e,n,i,s,o,l,h,d){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(v){this.onError(v)}}var cl=!1,zc=null,Uc=!1,Af=null,FP={onError:function(t){cl=!0,zc=t}};function zP(t,e,n,i,s,o,l,h,d){cl=!1,zc=null,VP.apply(FP,arguments)}function UP(t,e,n,i,s,o,l,h,d){if(zP.apply(this,arguments),cl){if(cl){var m=zc;cl=!1,zc=null}else throw Error(Q(198));Uc||(Uc=!0,Af=m)}}function Os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function u_(t){if(Os(t)!==t)throw Error(Q(188))}function BP(t){var e=t.alternate;if(!e){if(e=Os(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return u_(s),t;if(o===i)return u_(s),e;o=o.sibling}throw Error(Q(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(Q(189))}}if(n.alternate!==i)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function Rw(t){return t=BP(t),t!==null?xw(t):null}function xw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xw(t);if(e!==null)return e;t=t.sibling}return null}var Lw=_n.unstable_scheduleCallback,c_=_n.unstable_cancelCallback,jP=_n.unstable_shouldYield,HP=_n.unstable_requestPaint,ct=_n.unstable_now,WP=_n.unstable_getCurrentPriorityLevel,Gp=_n.unstable_ImmediatePriority,Ow=_n.unstable_UserBlockingPriority,Bc=_n.unstable_NormalPriority,qP=_n.unstable_LowPriority,Nw=_n.unstable_IdlePriority,Lh=null,di=null;function $P(t){if(di&&typeof di.onCommitFiberRoot=="function")try{di.onCommitFiberRoot(Lh,t,void 0,(t.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:KP,GP=Math.log,ZP=Math.LN2;function KP(t){return t>>>=0,t===0?32:31-(GP(t)/ZP|0)|0}var Ku=64,Qu=4194304;function el(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=el(h):(o&=l,o!==0&&(i=el(o)))}else l=n&~s,l!==0?i=el(l):o!==0&&(i=el(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Xn(e),s=1<<n,i|=t[n],e&=~s;return i}function QP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YP(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Xn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=QP(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Cf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bw(){var t=Ku;return Ku<<=1,!(Ku&4194240)&&(Ku=64),t}function Rd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xn(e),t[e]=n}function XP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Xn(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function Zp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Xn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Fe=0;function Dw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Mw,Kp,Vw,Fw,zw,kf=!1,Yu=[],Tr=null,Ir=null,Pr=null,kl=new Map,Rl=new Map,dr=[],JP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h_(t,e){switch(t){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":kl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(e.pointerId)}}function $a(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=eu(e),e!==null&&Kp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function eS(t,e,n,i,s){switch(e){case"focusin":return Tr=$a(Tr,t,e,n,i,s),!0;case"dragenter":return Ir=$a(Ir,t,e,n,i,s),!0;case"mouseover":return Pr=$a(Pr,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return kl.set(o,$a(kl.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Rl.set(o,$a(Rl.get(o)||null,t,e,n,i,s)),!0}return!1}function Uw(t){var e=fs(t.target);if(e!==null){var n=Os(e);if(n!==null){if(e=n.tag,e===13){if(e=kw(n),e!==null){t.blockedOn=e,zw(t.priority,function(){Vw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _c(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);If=i,n.target.dispatchEvent(i),If=null}else return e=eu(n),e!==null&&Kp(e),t.blockedOn=n,!1;e.shift()}return!0}function d_(t,e,n){_c(t)&&n.delete(e)}function tS(){kf=!1,Tr!==null&&_c(Tr)&&(Tr=null),Ir!==null&&_c(Ir)&&(Ir=null),Pr!==null&&_c(Pr)&&(Pr=null),kl.forEach(d_),Rl.forEach(d_)}function Ga(t,e){t.blockedOn===e&&(t.blockedOn=null,kf||(kf=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,tS)))}function xl(t){function e(s){return Ga(s,t)}if(0<Yu.length){Ga(Yu[0],t);for(var n=1;n<Yu.length;n++){var i=Yu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Tr!==null&&Ga(Tr,t),Ir!==null&&Ga(Ir,t),Pr!==null&&Ga(Pr,t),kl.forEach(e),Rl.forEach(e),n=0;n<dr.length;n++)i=dr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)Uw(n),n.blockedOn===null&&dr.shift()}var No=Qi.ReactCurrentBatchConfig,Hc=!0;function nS(t,e,n,i){var s=Fe,o=No.transition;No.transition=null;try{Fe=1,Qp(t,e,n,i)}finally{Fe=s,No.transition=o}}function iS(t,e,n,i){var s=Fe,o=No.transition;No.transition=null;try{Fe=4,Qp(t,e,n,i)}finally{Fe=s,No.transition=o}}function Qp(t,e,n,i){if(Hc){var s=Rf(t,e,n,i);if(s===null)zd(t,e,i,Wc,n),h_(t,i);else if(eS(s,t,e,n,i))i.stopPropagation();else if(h_(t,i),e&4&&-1<JP.indexOf(t)){for(;s!==null;){var o=eu(s);if(o!==null&&Mw(o),o=Rf(t,e,n,i),o===null&&zd(t,e,i,Wc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else zd(t,e,i,null,n)}}var Wc=null;function Rf(t,e,n,i){if(Wc=null,t=$p(i),t=fs(t),t!==null)if(e=Os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wc=t,null}function Bw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WP()){case Gp:return 1;case Ow:return 4;case Bc:case qP:return 16;case Nw:return 536870912;default:return 16}default:return 16}}var vr=null,Yp=null,vc=null;function jw(){if(vc)return vc;var t,e=Yp,n=e.length,i,s="value"in vr?vr.value:vr.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return vc=s.slice(t,1<i?1-i:void 0)}function yc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xu(){return!0}function f_(){return!1}function yn(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xu:f_,this.isPropagationStopped=f_,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xu)},persist:function(){},isPersistent:Xu}),e}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xp=yn(na),Jl=it({},na,{view:0,detail:0}),rS=yn(Jl),xd,Ld,Za,Oh=it({},Jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Za&&(Za&&t.type==="mousemove"?(xd=t.screenX-Za.screenX,Ld=t.screenY-Za.screenY):Ld=xd=0,Za=t),xd)},movementY:function(t){return"movementY"in t?t.movementY:Ld}}),p_=yn(Oh),sS=it({},Oh,{dataTransfer:0}),oS=yn(sS),aS=it({},Jl,{relatedTarget:0}),Od=yn(aS),lS=it({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),uS=yn(lS),cS=it({},na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hS=yn(cS),dS=it({},na,{data:0}),m_=yn(dS),fS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mS[t])?!!e[t]:!1}function Jp(){return gS}var _S=it({},Jl,{key:function(t){if(t.key){var e=fS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jp,charCode:function(t){return t.type==="keypress"?yc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vS=yn(_S),yS=it({},Oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g_=yn(yS),wS=it({},Jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jp}),ES=yn(wS),TS=it({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),IS=yn(TS),PS=it({},Oh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SS=yn(PS),AS=[9,13,27,32],em=Hi&&"CompositionEvent"in window,hl=null;Hi&&"documentMode"in document&&(hl=document.documentMode);var CS=Hi&&"TextEvent"in window&&!hl,Hw=Hi&&(!em||hl&&8<hl&&11>=hl),__=" ",v_=!1;function Ww(t,e){switch(t){case"keyup":return AS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yo=!1;function kS(t,e){switch(t){case"compositionend":return qw(e);case"keypress":return e.which!==32?null:(v_=!0,__);case"textInput":return t=e.data,t===__&&v_?null:t;default:return null}}function RS(t,e){if(yo)return t==="compositionend"||!em&&Ww(t,e)?(t=jw(),vc=Yp=vr=null,yo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hw&&e.locale!=="ko"?null:e.data;default:return null}}var xS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xS[t.type]:e==="textarea"}function $w(t,e,n,i){Iw(i),e=qc(e,"onChange"),0<e.length&&(n=new Xp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var dl=null,Ll=null;function LS(t){i0(t,0)}function Nh(t){var e=To(t);if(gw(e))return t}function OS(t,e){if(t==="change")return e}var Gw=!1;if(Hi){var Nd;if(Hi){var bd="oninput"in document;if(!bd){var w_=document.createElement("div");w_.setAttribute("oninput","return;"),bd=typeof w_.oninput=="function"}Nd=bd}else Nd=!1;Gw=Nd&&(!document.documentMode||9<document.documentMode)}function E_(){dl&&(dl.detachEvent("onpropertychange",Zw),Ll=dl=null)}function Zw(t){if(t.propertyName==="value"&&Nh(Ll)){var e=[];$w(e,Ll,t,$p(t)),Cw(LS,e)}}function NS(t,e,n){t==="focusin"?(E_(),dl=e,Ll=n,dl.attachEvent("onpropertychange",Zw)):t==="focusout"&&E_()}function bS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nh(Ll)}function DS(t,e){if(t==="click")return Nh(e)}function MS(t,e){if(t==="input"||t==="change")return Nh(e)}function VS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ei=typeof Object.is=="function"?Object.is:VS;function Ol(t,e){if(ei(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!hf.call(e,s)||!ei(t[s],e[s]))return!1}return!0}function T_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function I_(t,e){var n=T_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=T_(n)}}function Kw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Kw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qw(){for(var t=window,e=Fc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fc(t.document)}return e}function tm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function FS(t){var e=Qw(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Kw(n.ownerDocument.documentElement,n)){if(i!==null&&tm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=I_(n,o);var l=I_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zS=Hi&&"documentMode"in document&&11>=document.documentMode,wo=null,xf=null,fl=null,Lf=!1;function P_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lf||wo==null||wo!==Fc(i)||(i=wo,"selectionStart"in i&&tm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),fl&&Ol(fl,i)||(fl=i,i=qc(xf,"onSelect"),0<i.length&&(e=new Xp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=wo)))}function Ju(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Eo={animationend:Ju("Animation","AnimationEnd"),animationiteration:Ju("Animation","AnimationIteration"),animationstart:Ju("Animation","AnimationStart"),transitionend:Ju("Transition","TransitionEnd")},Dd={},Yw={};Hi&&(Yw=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function bh(t){if(Dd[t])return Dd[t];if(!Eo[t])return t;var e=Eo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Yw)return Dd[t]=e[n];return t}var Xw=bh("animationend"),Jw=bh("animationiteration"),e0=bh("animationstart"),t0=bh("transitionend"),n0=new Map,S_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gr(t,e){n0.set(t,e),Ls(e,[t])}for(var Md=0;Md<S_.length;Md++){var Vd=S_[Md],US=Vd.toLowerCase(),BS=Vd[0].toUpperCase()+Vd.slice(1);Gr(US,"on"+BS)}Gr(Xw,"onAnimationEnd");Gr(Jw,"onAnimationIteration");Gr(e0,"onAnimationStart");Gr("dblclick","onDoubleClick");Gr("focusin","onFocus");Gr("focusout","onBlur");Gr(t0,"onTransitionEnd");Bo("onMouseEnter",["mouseout","mouseover"]);Bo("onMouseLeave",["mouseout","mouseover"]);Bo("onPointerEnter",["pointerout","pointerover"]);Bo("onPointerLeave",["pointerout","pointerover"]);Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jS=new Set("cancel close invalid load scroll toggle".split(" ").concat(tl));function A_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,UP(i,e,void 0,t),t.currentTarget=null}function i0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,m=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;A_(s,h,m),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,m=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;A_(s,h,m),o=d}}}if(Uc)throw t=Af,Uc=!1,Af=null,t}function qe(t,e){var n=e[Mf];n===void 0&&(n=e[Mf]=new Set);var i=t+"__bubble";n.has(i)||(r0(e,t,2,!1),n.add(i))}function Fd(t,e,n){var i=0;e&&(i|=4),r0(n,t,i,e)}var ec="_reactListening"+Math.random().toString(36).slice(2);function Nl(t){if(!t[ec]){t[ec]=!0,hw.forEach(function(n){n!=="selectionchange"&&(jS.has(n)||Fd(n,!1,t),Fd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ec]||(e[ec]=!0,Fd("selectionchange",!1,e))}}function r0(t,e,n,i){switch(Bw(e)){case 1:var s=nS;break;case 4:s=iS;break;default:s=Qp}n=s.bind(null,e,n,t),s=void 0,!Sf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function zd(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=fs(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}Cw(function(){var m=o,v=$p(n),y=[];e:{var w=n0.get(t);if(w!==void 0){var C=Xp,M=t;switch(t){case"keypress":if(yc(n)===0)break e;case"keydown":case"keyup":C=vS;break;case"focusin":M="focus",C=Od;break;case"focusout":M="blur",C=Od;break;case"beforeblur":case"afterblur":C=Od;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=p_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=oS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=ES;break;case Xw:case Jw:case e0:C=uS;break;case t0:C=IS;break;case"scroll":C=rS;break;case"wheel":C=SS;break;case"copy":case"cut":case"paste":C=hS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=g_}var V=(e&4)!==0,H=!V&&t==="scroll",k=V?w!==null?w+"Capture":null:w;V=[];for(var P=m,N;P!==null;){N=P;var U=N.stateNode;if(N.tag===5&&U!==null&&(N=U,k!==null&&(U=Cl(P,k),U!=null&&V.push(bl(P,U,N)))),H)break;P=P.return}0<V.length&&(w=new C(w,M,null,n,v),y.push({event:w,listeners:V}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",w&&n!==If&&(M=n.relatedTarget||n.fromElement)&&(fs(M)||M[Wi]))break e;if((C||w)&&(w=v.window===v?v:(w=v.ownerDocument)?w.defaultView||w.parentWindow:window,C?(M=n.relatedTarget||n.toElement,C=m,M=M?fs(M):null,M!==null&&(H=Os(M),M!==H||M.tag!==5&&M.tag!==6)&&(M=null)):(C=null,M=m),C!==M)){if(V=p_,U="onMouseLeave",k="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(V=g_,U="onPointerLeave",k="onPointerEnter",P="pointer"),H=C==null?w:To(C),N=M==null?w:To(M),w=new V(U,P+"leave",C,n,v),w.target=H,w.relatedTarget=N,U=null,fs(v)===m&&(V=new V(k,P+"enter",M,n,v),V.target=N,V.relatedTarget=H,U=V),H=U,C&&M)t:{for(V=C,k=M,P=0,N=V;N;N=ho(N))P++;for(N=0,U=k;U;U=ho(U))N++;for(;0<P-N;)V=ho(V),P--;for(;0<N-P;)k=ho(k),N--;for(;P--;){if(V===k||k!==null&&V===k.alternate)break t;V=ho(V),k=ho(k)}V=null}else V=null;C!==null&&C_(y,w,C,V,!1),M!==null&&H!==null&&C_(y,H,M,V,!0)}}e:{if(w=m?To(m):window,C=w.nodeName&&w.nodeName.toLowerCase(),C==="select"||C==="input"&&w.type==="file")var Y=OS;else if(y_(w))if(Gw)Y=MS;else{Y=bS;var K=NS}else(C=w.nodeName)&&C.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(Y=DS);if(Y&&(Y=Y(t,m))){$w(y,Y,n,v);break e}K&&K(t,w,m),t==="focusout"&&(K=w._wrapperState)&&K.controlled&&w.type==="number"&&vf(w,"number",w.value)}switch(K=m?To(m):window,t){case"focusin":(y_(K)||K.contentEditable==="true")&&(wo=K,xf=m,fl=null);break;case"focusout":fl=xf=wo=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,P_(y,n,v);break;case"selectionchange":if(zS)break;case"keydown":case"keyup":P_(y,n,v)}var A;if(em)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else yo?Ww(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Hw&&n.locale!=="ko"&&(yo||I!=="onCompositionStart"?I==="onCompositionEnd"&&yo&&(A=jw()):(vr=v,Yp="value"in vr?vr.value:vr.textContent,yo=!0)),K=qc(m,I),0<K.length&&(I=new m_(I,t,null,n,v),y.push({event:I,listeners:K}),A?I.data=A:(A=qw(n),A!==null&&(I.data=A)))),(A=CS?kS(t,n):RS(t,n))&&(m=qc(m,"onBeforeInput"),0<m.length&&(v=new m_("onBeforeInput","beforeinput",null,n,v),y.push({event:v,listeners:m}),v.data=A))}i0(y,e)})}function bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Cl(t,n),o!=null&&i.unshift(bl(t,o,s)),o=Cl(t,e),o!=null&&i.push(bl(t,o,s))),t=t.return}return i}function ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function C_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,m=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&m!==null&&(h=m,s?(d=Cl(n,o),d!=null&&l.unshift(bl(n,d,h))):s||(d=Cl(n,o),d!=null&&l.push(bl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var HS=/\r\n?/g,WS=/\u0000|\uFFFD/g;function k_(t){return(typeof t=="string"?t:""+t).replace(HS,`
`).replace(WS,"")}function tc(t,e,n){if(e=k_(e),k_(t)!==e&&n)throw Error(Q(425))}function $c(){}var Of=null,Nf=null;function bf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Df=typeof setTimeout=="function"?setTimeout:void 0,qS=typeof clearTimeout=="function"?clearTimeout:void 0,R_=typeof Promise=="function"?Promise:void 0,$S=typeof queueMicrotask=="function"?queueMicrotask:typeof R_<"u"?function(t){return R_.resolve(null).then(t).catch(GS)}:Df;function GS(t){setTimeout(function(){throw t})}function Ud(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),xl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);xl(e)}function Sr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function x_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ia=Math.random().toString(36).slice(2),ci="__reactFiber$"+ia,Dl="__reactProps$"+ia,Wi="__reactContainer$"+ia,Mf="__reactEvents$"+ia,ZS="__reactListeners$"+ia,KS="__reactHandles$"+ia;function fs(t){var e=t[ci];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wi]||n[ci]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x_(t);t!==null;){if(n=t[ci])return n;t=x_(t)}return e}t=n,n=t.parentNode}return null}function eu(t){return t=t[ci]||t[Wi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function To(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Dh(t){return t[Dl]||null}var Vf=[],Io=-1;function Zr(t){return{current:t}}function $e(t){0>Io||(t.current=Vf[Io],Vf[Io]=null,Io--)}function We(t,e){Io++,Vf[Io]=t.current,t.current=e}var Fr={},Wt=Zr(Fr),an=Zr(!1),Ts=Fr;function jo(t,e){var n=t.type.contextTypes;if(!n)return Fr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ln(t){return t=t.childContextTypes,t!=null}function Gc(){$e(an),$e(Wt)}function L_(t,e,n){if(Wt.current!==Fr)throw Error(Q(168));We(Wt,e),We(an,n)}function s0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Q(108,NP(t)||"Unknown",s));return it({},n,i)}function Zc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,Ts=Wt.current,We(Wt,t),We(an,an.current),!0}function O_(t,e,n){var i=t.stateNode;if(!i)throw Error(Q(169));n?(t=s0(t,e,Ts),i.__reactInternalMemoizedMergedChildContext=t,$e(an),$e(Wt),We(Wt,t)):$e(an),We(an,n)}var Vi=null,Mh=!1,Bd=!1;function o0(t){Vi===null?Vi=[t]:Vi.push(t)}function QS(t){Mh=!0,o0(t)}function Kr(){if(!Bd&&Vi!==null){Bd=!0;var t=0,e=Fe;try{var n=Vi;for(Fe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Vi=null,Mh=!1}catch(s){throw Vi!==null&&(Vi=Vi.slice(t+1)),Lw(Gp,Kr),s}finally{Fe=e,Bd=!1}}return null}var Po=[],So=0,Kc=null,Qc=0,kn=[],Rn=0,Is=null,Fi=1,zi="";function cs(t,e){Po[So++]=Qc,Po[So++]=Kc,Kc=t,Qc=e}function a0(t,e,n){kn[Rn++]=Fi,kn[Rn++]=zi,kn[Rn++]=Is,Is=t;var i=Fi;t=zi;var s=32-Xn(i)-1;i&=~(1<<s),n+=1;var o=32-Xn(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Fi=1<<32-Xn(e)+s|n<<s|i,zi=o+t}else Fi=1<<o|n<<s|i,zi=t}function nm(t){t.return!==null&&(cs(t,1),a0(t,1,0))}function im(t){for(;t===Kc;)Kc=Po[--So],Po[So]=null,Qc=Po[--So],Po[So]=null;for(;t===Is;)Is=kn[--Rn],kn[Rn]=null,zi=kn[--Rn],kn[Rn]=null,Fi=kn[--Rn],kn[Rn]=null}var gn=null,mn=null,Qe=!1,Kn=null;function l0(t,e){var n=On(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function N_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gn=t,mn=Sr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gn=t,mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Is!==null?{id:Fi,overflow:zi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=On(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,gn=t,mn=null,!0):!1;default:return!1}}function Ff(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zf(t){if(Qe){var e=mn;if(e){var n=e;if(!N_(t,e)){if(Ff(t))throw Error(Q(418));e=Sr(n.nextSibling);var i=gn;e&&N_(t,e)?l0(i,n):(t.flags=t.flags&-4097|2,Qe=!1,gn=t)}}else{if(Ff(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Qe=!1,gn=t}}}function b_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gn=t}function nc(t){if(t!==gn)return!1;if(!Qe)return b_(t),Qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bf(t.type,t.memoizedProps)),e&&(e=mn)){if(Ff(t))throw u0(),Error(Q(418));for(;e;)l0(t,e),e=Sr(e.nextSibling)}if(b_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mn=Sr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mn=null}}else mn=gn?Sr(t.stateNode.nextSibling):null;return!0}function u0(){for(var t=mn;t;)t=Sr(t.nextSibling)}function Ho(){mn=gn=null,Qe=!1}function rm(t){Kn===null?Kn=[t]:Kn.push(t)}var YS=Qi.ReactCurrentBatchConfig;function Ka(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var i=n.stateNode}if(!i)throw Error(Q(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function ic(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function D_(t){var e=t._init;return e(t._payload)}function c0(t){function e(k,P){if(t){var N=k.deletions;N===null?(k.deletions=[P],k.flags|=16):N.push(P)}}function n(k,P){if(!t)return null;for(;P!==null;)e(k,P),P=P.sibling;return null}function i(k,P){for(k=new Map;P!==null;)P.key!==null?k.set(P.key,P):k.set(P.index,P),P=P.sibling;return k}function s(k,P){return k=Rr(k,P),k.index=0,k.sibling=null,k}function o(k,P,N){return k.index=N,t?(N=k.alternate,N!==null?(N=N.index,N<P?(k.flags|=2,P):N):(k.flags|=2,P)):(k.flags|=1048576,P)}function l(k){return t&&k.alternate===null&&(k.flags|=2),k}function h(k,P,N,U){return P===null||P.tag!==6?(P=Zd(N,k.mode,U),P.return=k,P):(P=s(P,N),P.return=k,P)}function d(k,P,N,U){var Y=N.type;return Y===vo?v(k,P,N.props.children,U,N.key):P!==null&&(P.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===cr&&D_(Y)===P.type)?(U=s(P,N.props),U.ref=Ka(k,P,N),U.return=k,U):(U=Ac(N.type,N.key,N.props,null,k.mode,U),U.ref=Ka(k,P,N),U.return=k,U)}function m(k,P,N,U){return P===null||P.tag!==4||P.stateNode.containerInfo!==N.containerInfo||P.stateNode.implementation!==N.implementation?(P=Kd(N,k.mode,U),P.return=k,P):(P=s(P,N.children||[]),P.return=k,P)}function v(k,P,N,U,Y){return P===null||P.tag!==7?(P=vs(N,k.mode,U,Y),P.return=k,P):(P=s(P,N),P.return=k,P)}function y(k,P,N){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Zd(""+P,k.mode,N),P.return=k,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case $u:return N=Ac(P.type,P.key,P.props,null,k.mode,N),N.ref=Ka(k,null,P),N.return=k,N;case _o:return P=Kd(P,k.mode,N),P.return=k,P;case cr:var U=P._init;return y(k,U(P._payload),N)}if(Ja(P)||Wa(P))return P=vs(P,k.mode,N,null),P.return=k,P;ic(k,P)}return null}function w(k,P,N,U){var Y=P!==null?P.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return Y!==null?null:h(k,P,""+N,U);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case $u:return N.key===Y?d(k,P,N,U):null;case _o:return N.key===Y?m(k,P,N,U):null;case cr:return Y=N._init,w(k,P,Y(N._payload),U)}if(Ja(N)||Wa(N))return Y!==null?null:v(k,P,N,U,null);ic(k,N)}return null}function C(k,P,N,U,Y){if(typeof U=="string"&&U!==""||typeof U=="number")return k=k.get(N)||null,h(P,k,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case $u:return k=k.get(U.key===null?N:U.key)||null,d(P,k,U,Y);case _o:return k=k.get(U.key===null?N:U.key)||null,m(P,k,U,Y);case cr:var K=U._init;return C(k,P,N,K(U._payload),Y)}if(Ja(U)||Wa(U))return k=k.get(N)||null,v(P,k,U,Y,null);ic(P,U)}return null}function M(k,P,N,U){for(var Y=null,K=null,A=P,I=P=0,S=null;A!==null&&I<N.length;I++){A.index>I?(S=A,A=null):S=A.sibling;var R=w(k,A,N[I],U);if(R===null){A===null&&(A=S);break}t&&A&&R.alternate===null&&e(k,A),P=o(R,P,I),K===null?Y=R:K.sibling=R,K=R,A=S}if(I===N.length)return n(k,A),Qe&&cs(k,I),Y;if(A===null){for(;I<N.length;I++)A=y(k,N[I],U),A!==null&&(P=o(A,P,I),K===null?Y=A:K.sibling=A,K=A);return Qe&&cs(k,I),Y}for(A=i(k,A);I<N.length;I++)S=C(A,k,I,N[I],U),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?I:S.key),P=o(S,P,I),K===null?Y=S:K.sibling=S,K=S);return t&&A.forEach(function(b){return e(k,b)}),Qe&&cs(k,I),Y}function V(k,P,N,U){var Y=Wa(N);if(typeof Y!="function")throw Error(Q(150));if(N=Y.call(N),N==null)throw Error(Q(151));for(var K=Y=null,A=P,I=P=0,S=null,R=N.next();A!==null&&!R.done;I++,R=N.next()){A.index>I?(S=A,A=null):S=A.sibling;var b=w(k,A,R.value,U);if(b===null){A===null&&(A=S);break}t&&A&&b.alternate===null&&e(k,A),P=o(b,P,I),K===null?Y=b:K.sibling=b,K=b,A=S}if(R.done)return n(k,A),Qe&&cs(k,I),Y;if(A===null){for(;!R.done;I++,R=N.next())R=y(k,R.value,U),R!==null&&(P=o(R,P,I),K===null?Y=R:K.sibling=R,K=R);return Qe&&cs(k,I),Y}for(A=i(k,A);!R.done;I++,R=N.next())R=C(A,k,I,R.value,U),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?I:R.key),P=o(R,P,I),K===null?Y=R:K.sibling=R,K=R);return t&&A.forEach(function(D){return e(k,D)}),Qe&&cs(k,I),Y}function H(k,P,N,U){if(typeof N=="object"&&N!==null&&N.type===vo&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case $u:e:{for(var Y=N.key,K=P;K!==null;){if(K.key===Y){if(Y=N.type,Y===vo){if(K.tag===7){n(k,K.sibling),P=s(K,N.props.children),P.return=k,k=P;break e}}else if(K.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===cr&&D_(Y)===K.type){n(k,K.sibling),P=s(K,N.props),P.ref=Ka(k,K,N),P.return=k,k=P;break e}n(k,K);break}else e(k,K);K=K.sibling}N.type===vo?(P=vs(N.props.children,k.mode,U,N.key),P.return=k,k=P):(U=Ac(N.type,N.key,N.props,null,k.mode,U),U.ref=Ka(k,P,N),U.return=k,k=U)}return l(k);case _o:e:{for(K=N.key;P!==null;){if(P.key===K)if(P.tag===4&&P.stateNode.containerInfo===N.containerInfo&&P.stateNode.implementation===N.implementation){n(k,P.sibling),P=s(P,N.children||[]),P.return=k,k=P;break e}else{n(k,P);break}else e(k,P);P=P.sibling}P=Kd(N,k.mode,U),P.return=k,k=P}return l(k);case cr:return K=N._init,H(k,P,K(N._payload),U)}if(Ja(N))return M(k,P,N,U);if(Wa(N))return V(k,P,N,U);ic(k,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,P!==null&&P.tag===6?(n(k,P.sibling),P=s(P,N),P.return=k,k=P):(n(k,P),P=Zd(N,k.mode,U),P.return=k,k=P),l(k)):n(k,P)}return H}var Wo=c0(!0),h0=c0(!1),Yc=Zr(null),Xc=null,Ao=null,sm=null;function om(){sm=Ao=Xc=null}function am(t){var e=Yc.current;$e(Yc),t._currentValue=e}function Uf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function bo(t,e){Xc=t,sm=Ao=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function bn(t){var e=t._currentValue;if(sm!==t)if(t={context:t,memoizedValue:e,next:null},Ao===null){if(Xc===null)throw Error(Q(308));Ao=t,Xc.dependencies={lanes:0,firstContext:t}}else Ao=Ao.next=t;return e}var ps=null;function lm(t){ps===null?ps=[t]:ps.push(t)}function d0(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,lm(e)):(n.next=s.next,s.next=n),e.interleaved=n,qi(t,i)}function qi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hr=!1;function um(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ji(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,be&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,qi(t,n)}return s=i.interleaved,s===null?(e.next=e,lm(i)):(e.next=s.next,s.next=e),i.interleaved=e,qi(t,n)}function wc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Zp(t,n)}}function M_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jc(t,e,n,i){var s=t.updateQueue;hr=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,m=d.next;d.next=null,l===null?o=m:l.next=m,l=d;var v=t.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==l&&(h===null?v.firstBaseUpdate=m:h.next=m,v.lastBaseUpdate=d))}if(o!==null){var y=s.baseState;l=0,v=m=d=null,h=o;do{var w=h.lane,C=h.eventTime;if((i&w)===w){v!==null&&(v=v.next={eventTime:C,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var M=t,V=h;switch(w=e,C=n,V.tag){case 1:if(M=V.payload,typeof M=="function"){y=M.call(C,y,w);break e}y=M;break e;case 3:M.flags=M.flags&-65537|128;case 0:if(M=V.payload,w=typeof M=="function"?M.call(C,y,w):M,w==null)break e;y=it({},y,w);break e;case 2:hr=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,w=s.effects,w===null?s.effects=[h]:w.push(h))}else C={eventTime:C,lane:w,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(m=v=C,d=y):v=v.next=C,l|=w;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;w=h,h=w.next,w.next=null,s.lastBaseUpdate=w,s.shared.pending=null}}while(!0);if(v===null&&(d=y),s.baseState=d,s.firstBaseUpdate=m,s.lastBaseUpdate=v,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Ss|=l,t.lanes=l,t.memoizedState=y}}function V_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(Q(191,s));s.call(i)}}}var tu={},fi=Zr(tu),Ml=Zr(tu),Vl=Zr(tu);function ms(t){if(t===tu)throw Error(Q(174));return t}function cm(t,e){switch(We(Vl,e),We(Ml,t),We(fi,tu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wf(e,t)}$e(fi),We(fi,e)}function qo(){$e(fi),$e(Ml),$e(Vl)}function p0(t){ms(Vl.current);var e=ms(fi.current),n=wf(e,t.type);e!==n&&(We(Ml,t),We(fi,n))}function hm(t){Ml.current===t&&($e(fi),$e(Ml))}var et=Zr(0);function eh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jd=[];function dm(){for(var t=0;t<jd.length;t++)jd[t]._workInProgressVersionPrimary=null;jd.length=0}var Ec=Qi.ReactCurrentDispatcher,Hd=Qi.ReactCurrentBatchConfig,Ps=0,tt=null,Et=null,Rt=null,th=!1,pl=!1,Fl=0,XS=0;function Vt(){throw Error(Q(321))}function fm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ei(t[n],e[n]))return!1;return!0}function pm(t,e,n,i,s,o){if(Ps=o,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ec.current=t===null||t.memoizedState===null?nA:iA,t=n(i,s),pl){o=0;do{if(pl=!1,Fl=0,25<=o)throw Error(Q(301));o+=1,Rt=Et=null,e.updateQueue=null,Ec.current=rA,t=n(i,s)}while(pl)}if(Ec.current=nh,e=Et!==null&&Et.next!==null,Ps=0,Rt=Et=tt=null,th=!1,e)throw Error(Q(300));return t}function mm(){var t=Fl!==0;return Fl=0,t}function li(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?tt.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Dn(){if(Et===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=Rt===null?tt.memoizedState:Rt.next;if(e!==null)Rt=e,Et=t;else{if(t===null)throw Error(Q(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Rt===null?tt.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function zl(t,e){return typeof e=="function"?e(t):e}function Wd(t){var e=Dn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=Et,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,m=o;do{var v=m.lane;if((Ps&v)===v)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:t(i,m.action);else{var y={lane:v,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(h=d=y,l=i):d=d.next=y,tt.lanes|=v,Ss|=v}m=m.next}while(m!==null&&m!==o);d===null?l=i:d.next=h,ei(i,e.memoizedState)||(on=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,tt.lanes|=o,Ss|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qd(t){var e=Dn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);ei(o,e.memoizedState)||(on=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function m0(){}function g0(t,e){var n=tt,i=Dn(),s=e(),o=!ei(i.memoizedState,s);if(o&&(i.memoizedState=s,on=!0),i=i.queue,gm(y0.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Ul(9,v0.bind(null,n,i,s,e),void 0,null),xt===null)throw Error(Q(349));Ps&30||_0(n,e,s)}return s}function _0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function v0(t,e,n,i){e.value=n,e.getSnapshot=i,w0(e)&&E0(t)}function y0(t,e,n){return n(function(){w0(e)&&E0(t)})}function w0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ei(t,n)}catch{return!0}}function E0(t){var e=qi(t,1);e!==null&&Jn(e,t,1,-1)}function F_(t){var e=li();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zl,lastRenderedState:t},e.queue=t,t=t.dispatch=tA.bind(null,tt,t),[e.memoizedState,t]}function Ul(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function T0(){return Dn().memoizedState}function Tc(t,e,n,i){var s=li();tt.flags|=t,s.memoizedState=Ul(1|e,n,void 0,i===void 0?null:i)}function Vh(t,e,n,i){var s=Dn();i=i===void 0?null:i;var o=void 0;if(Et!==null){var l=Et.memoizedState;if(o=l.destroy,i!==null&&fm(i,l.deps)){s.memoizedState=Ul(e,n,o,i);return}}tt.flags|=t,s.memoizedState=Ul(1|e,n,o,i)}function z_(t,e){return Tc(8390656,8,t,e)}function gm(t,e){return Vh(2048,8,t,e)}function I0(t,e){return Vh(4,2,t,e)}function P0(t,e){return Vh(4,4,t,e)}function S0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function A0(t,e,n){return n=n!=null?n.concat([t]):null,Vh(4,4,S0.bind(null,e,t),n)}function _m(){}function C0(t,e){var n=Dn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function k0(t,e){var n=Dn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function R0(t,e,n){return Ps&21?(ei(n,e)||(n=bw(),tt.lanes|=n,Ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function JS(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var i=Hd.transition;Hd.transition={};try{t(!1),e()}finally{Fe=n,Hd.transition=i}}function x0(){return Dn().memoizedState}function eA(t,e,n){var i=kr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},L0(t))O0(e,n);else if(n=d0(t,e,n,i),n!==null){var s=Qt();Jn(n,t,i,s),N0(n,e,i)}}function tA(t,e,n){var i=kr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(L0(t))O0(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,ei(h,l)){var d=e.interleaved;d===null?(s.next=s,lm(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=d0(t,e,s,i),n!==null&&(s=Qt(),Jn(n,t,i,s),N0(n,e,i))}}function L0(t){var e=t.alternate;return t===tt||e!==null&&e===tt}function O0(t,e){pl=th=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function N0(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Zp(t,n)}}var nh={readContext:bn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},nA={readContext:bn,useCallback:function(t,e){return li().memoizedState=[t,e===void 0?null:e],t},useContext:bn,useEffect:z_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Tc(4194308,4,S0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Tc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Tc(4,2,t,e)},useMemo:function(t,e){var n=li();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=li();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=eA.bind(null,tt,t),[i.memoizedState,t]},useRef:function(t){var e=li();return t={current:t},e.memoizedState=t},useState:F_,useDebugValue:_m,useDeferredValue:function(t){return li().memoizedState=t},useTransition:function(){var t=F_(!1),e=t[0];return t=JS.bind(null,t[1]),li().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=tt,s=li();if(Qe){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),xt===null)throw Error(Q(349));Ps&30||_0(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,z_(y0.bind(null,i,o,t),[t]),i.flags|=2048,Ul(9,v0.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=li(),e=xt.identifierPrefix;if(Qe){var n=zi,i=Fi;n=(i&~(1<<32-Xn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=XS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iA={readContext:bn,useCallback:C0,useContext:bn,useEffect:gm,useImperativeHandle:A0,useInsertionEffect:I0,useLayoutEffect:P0,useMemo:k0,useReducer:Wd,useRef:T0,useState:function(){return Wd(zl)},useDebugValue:_m,useDeferredValue:function(t){var e=Dn();return R0(e,Et.memoizedState,t)},useTransition:function(){var t=Wd(zl)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:m0,useSyncExternalStore:g0,useId:x0,unstable_isNewReconciler:!1},rA={readContext:bn,useCallback:C0,useContext:bn,useEffect:gm,useImperativeHandle:A0,useInsertionEffect:I0,useLayoutEffect:P0,useMemo:k0,useReducer:qd,useRef:T0,useState:function(){return qd(zl)},useDebugValue:_m,useDeferredValue:function(t){var e=Dn();return Et===null?e.memoizedState=t:R0(e,Et.memoizedState,t)},useTransition:function(){var t=qd(zl)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:m0,useSyncExternalStore:g0,useId:x0,unstable_isNewReconciler:!1};function Gn(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fh={isMounted:function(t){return(t=t._reactInternals)?Os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Qt(),s=kr(t),o=ji(i,s);o.payload=e,n!=null&&(o.callback=n),e=Ar(t,o,s),e!==null&&(Jn(e,t,s,i),wc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Qt(),s=kr(t),o=ji(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ar(t,o,s),e!==null&&(Jn(e,t,s,i),wc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),i=kr(t),s=ji(n,i);s.tag=2,e!=null&&(s.callback=e),e=Ar(t,s,i),e!==null&&(Jn(e,t,i,n),wc(e,t,i))}};function U_(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!Ol(n,i)||!Ol(s,o):!0}function b0(t,e,n){var i=!1,s=Fr,o=e.contextType;return typeof o=="object"&&o!==null?o=bn(o):(s=ln(e)?Ts:Wt.current,i=e.contextTypes,o=(i=i!=null)?jo(t,s):Fr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function B_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Fh.enqueueReplaceState(e,e.state,null)}function jf(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},um(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=bn(o):(o=ln(e)?Ts:Wt.current,s.context=jo(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Bf(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Fh.enqueueReplaceState(s,s.state,null),Jc(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function $o(t,e){try{var n="",i=e;do n+=OP(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function $d(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sA=typeof WeakMap=="function"?WeakMap:Map;function D0(t,e,n){n=ji(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){rh||(rh=!0,Jf=i),Hf(t,e)},n}function M0(t,e,n){n=ji(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){Hf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Hf(t,e),typeof i!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function j_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new sA;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=yA.bind(null,t,e,n),e.then(t,t))}function H_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function W_(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ji(-1,1),e.tag=2,Ar(n,e,1))),n.lanes|=1),t)}var oA=Qi.ReactCurrentOwner,on=!1;function Kt(t,e,n,i){e.child=t===null?h0(e,null,n,i):Wo(e,t.child,n,i)}function q_(t,e,n,i,s){n=n.render;var o=e.ref;return bo(e,s),i=pm(t,e,n,i,o,s),n=mm(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$i(t,e,s)):(Qe&&n&&nm(e),e.flags|=1,Kt(t,e,i,s),e.child)}function $_(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!Sm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,V0(t,e,o,i,s)):(t=Ac(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ol,n(l,i)&&t.ref===e.ref)return $i(t,e,s)}return e.flags|=1,t=Rr(o,i),t.ref=e.ref,t.return=e,e.child=t}function V0(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(Ol(o,i)&&t.ref===e.ref)if(on=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,$i(t,e,s)}return Wf(t,e,n,i,s)}function F0(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(ko,pn),pn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We(ko,pn),pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,We(ko,pn),pn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,We(ko,pn),pn|=i;return Kt(t,e,s,n),e.child}function z0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wf(t,e,n,i,s){var o=ln(n)?Ts:Wt.current;return o=jo(e,o),bo(e,s),n=pm(t,e,n,i,o,s),i=mm(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$i(t,e,s)):(Qe&&i&&nm(e),e.flags|=1,Kt(t,e,n,s),e.child)}function G_(t,e,n,i,s){if(ln(n)){var o=!0;Zc(e)}else o=!1;if(bo(e,s),e.stateNode===null)Ic(t,e),b0(e,n,i),jf(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=bn(m):(m=ln(n)?Ts:Wt.current,m=jo(e,m));var v=n.getDerivedStateFromProps,y=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==m)&&B_(e,l,i,m),hr=!1;var w=e.memoizedState;l.state=w,Jc(e,i,l,s),d=e.memoizedState,h!==i||w!==d||an.current||hr?(typeof v=="function"&&(Bf(e,n,v,i),d=e.memoizedState),(h=hr||U_(e,n,h,i,w,d,m))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=m,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,f0(t,e),h=e.memoizedProps,m=e.type===e.elementType?h:Gn(e.type,h),l.props=m,y=e.pendingProps,w=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=bn(d):(d=ln(n)?Ts:Wt.current,d=jo(e,d));var C=n.getDerivedStateFromProps;(v=typeof C=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==y||w!==d)&&B_(e,l,i,d),hr=!1,w=e.memoizedState,l.state=w,Jc(e,i,l,s);var M=e.memoizedState;h!==y||w!==M||an.current||hr?(typeof C=="function"&&(Bf(e,n,C,i),M=e.memoizedState),(m=hr||U_(e,n,m,i,w,M,d)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,M,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,M,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=M),l.props=i,l.state=M,l.context=d,i=m):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),i=!1)}return qf(t,e,n,i,o,s)}function qf(t,e,n,i,s,o){z0(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&O_(e,n,!1),$i(t,e,o);i=e.stateNode,oA.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Wo(e,t.child,null,o),e.child=Wo(e,null,h,o)):Kt(t,e,h,o),e.memoizedState=i.state,s&&O_(e,n,!0),e.child}function U0(t){var e=t.stateNode;e.pendingContext?L_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&L_(t,e.context,!1),cm(t,e.containerInfo)}function Z_(t,e,n,i,s){return Ho(),rm(s),e.flags|=256,Kt(t,e,n,i),e.child}var $f={dehydrated:null,treeContext:null,retryLane:0};function Gf(t){return{baseLanes:t,cachePool:null,transitions:null}}function B0(t,e,n){var i=e.pendingProps,s=et.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),We(et,s&1),t===null)return zf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Bh(l,i,0,null),t=vs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Gf(n),e.memoizedState=$f,t):vm(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return aA(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=Rr(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=Rr(h,o):(o=vs(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?Gf(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=$f,i}return o=t.child,t=o.sibling,i=Rr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function vm(t,e){return e=Bh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rc(t,e,n,i){return i!==null&&rm(i),Wo(e,t.child,null,n),t=vm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function aA(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=$d(Error(Q(422))),rc(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=Bh({mode:"visible",children:i.children},s,0,null),o=vs(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Wo(e,t.child,null,l),e.child.memoizedState=Gf(l),e.memoizedState=$f,o);if(!(e.mode&1))return rc(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Q(419)),i=$d(o,i,void 0),rc(t,e,l,i)}if(h=(l&t.childLanes)!==0,on||h){if(i=xt,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,qi(t,s),Jn(i,t,s,-1))}return Pm(),i=$d(Error(Q(421))),rc(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=wA.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,mn=Sr(s.nextSibling),gn=e,Qe=!0,Kn=null,t!==null&&(kn[Rn++]=Fi,kn[Rn++]=zi,kn[Rn++]=Is,Fi=t.id,zi=t.overflow,Is=e),e=vm(e,i.children),e.flags|=4096,e)}function K_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Uf(t.return,e,n)}function Gd(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function j0(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Kt(t,e,i.children,n),i=et.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&K_(t,n,e);else if(t.tag===19)K_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(We(et,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&eh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Gd(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&eh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Gd(e,!0,n,null,o);break;case"together":Gd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ic(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $i(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lA(t,e,n){switch(e.tag){case 3:U0(e),Ho();break;case 5:p0(e);break;case 1:ln(e.type)&&Zc(e);break;case 4:cm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;We(Yc,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(We(et,et.current&1),e.flags|=128,null):n&e.child.childLanes?B0(t,e,n):(We(et,et.current&1),t=$i(t,e,n),t!==null?t.sibling:null);We(et,et.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return j0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),We(et,et.current),i)break;return null;case 22:case 23:return e.lanes=0,F0(t,e,n)}return $i(t,e,n)}var H0,Zf,W0,q0;H0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zf=function(){};W0=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,ms(fi.current);var o=null;switch(n){case"input":s=gf(t,s),i=gf(t,i),o=[];break;case"select":s=it({},s,{value:void 0}),i=it({},i,{value:void 0}),o=[];break;case"textarea":s=yf(t,s),i=yf(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=$c)}Ef(n,i);var l;n=null;for(m in s)if(!i.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var h=s[m];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Sl.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in i){var d=i[m];if(h=s!=null?s[m]:void 0,i.hasOwnProperty(m)&&d!==h&&(d!=null||h!=null))if(m==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(m,n)),n=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Sl.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&qe("scroll",t),o||h===d||(o=[])):(o=o||[]).push(m,d))}n&&(o=o||[]).push("style",n);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};q0=function(t,e,n,i){n!==i&&(e.flags|=4)};function Qa(t,e){if(!Qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function uA(t,e,n){var i=e.pendingProps;switch(im(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return ln(e.type)&&Gc(),Ft(e),null;case 3:return i=e.stateNode,qo(),$e(an),$e(Wt),dm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(nc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(np(Kn),Kn=null))),Zf(t,e),Ft(e),null;case 5:hm(e);var s=ms(Vl.current);if(n=e.type,t!==null&&e.stateNode!=null)W0(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Q(166));return Ft(e),null}if(t=ms(fi.current),nc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[ci]=e,i[Dl]=o,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",i),qe("close",i);break;case"iframe":case"object":case"embed":qe("load",i);break;case"video":case"audio":for(s=0;s<tl.length;s++)qe(tl[s],i);break;case"source":qe("error",i);break;case"img":case"image":case"link":qe("error",i),qe("load",i);break;case"details":qe("toggle",i);break;case"input":r_(i,o),qe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},qe("invalid",i);break;case"textarea":o_(i,o),qe("invalid",i)}Ef(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&tc(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&tc(i.textContent,h,t),s=["children",""+h]):Sl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&qe("scroll",i)}switch(n){case"input":Gu(i),s_(i,o,!0);break;case"textarea":Gu(i),a_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=$c)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[ci]=e,t[Dl]=i,H0(t,e,!1,!1),e.stateNode=t;e:{switch(l=Tf(n,i),n){case"dialog":qe("cancel",t),qe("close",t),s=i;break;case"iframe":case"object":case"embed":qe("load",t),s=i;break;case"video":case"audio":for(s=0;s<tl.length;s++)qe(tl[s],t);s=i;break;case"source":qe("error",t),s=i;break;case"img":case"image":case"link":qe("error",t),qe("load",t),s=i;break;case"details":qe("toggle",t),s=i;break;case"input":r_(t,i),s=gf(t,i),qe("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=it({},i,{value:void 0}),qe("invalid",t);break;case"textarea":o_(t,i),s=yf(t,i),qe("invalid",t);break;default:s=i}Ef(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?Tw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&ww(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Al(t,d):typeof d=="number"&&Al(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Sl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&qe("scroll",t):d!=null&&jp(t,o,d,l))}switch(n){case"input":Gu(t),s_(t,i,!1);break;case"textarea":Gu(t),a_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Vr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?xo(t,!!i.multiple,o,!1):i.defaultValue!=null&&xo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$c)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)q0(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Q(166));if(n=ms(Vl.current),ms(fi.current),nc(e)){if(i=e.stateNode,n=e.memoizedProps,i[ci]=e,(o=i.nodeValue!==n)&&(t=gn,t!==null))switch(t.tag){case 3:tc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ci]=e,e.stateNode=i}return Ft(e),null;case 13:if($e(et),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&mn!==null&&e.mode&1&&!(e.flags&128))u0(),Ho(),e.flags|=98560,o=!1;else if(o=nc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[ci]=e}else Ho(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),o=!1}else Kn!==null&&(np(Kn),Kn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?Tt===0&&(Tt=3):Pm())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return qo(),Zf(t,e),t===null&&Nl(e.stateNode.containerInfo),Ft(e),null;case 10:return am(e.type._context),Ft(e),null;case 17:return ln(e.type)&&Gc(),Ft(e),null;case 19:if($e(et),o=e.memoizedState,o===null)return Ft(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Qa(o,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=eh(t),l!==null){for(e.flags|=128,Qa(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return We(et,et.current&1|2),e.child}t=t.sibling}o.tail!==null&&ct()>Go&&(e.flags|=128,i=!0,Qa(o,!1),e.lanes=4194304)}else{if(!i)if(t=eh(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Qe)return Ft(e),null}else 2*ct()-o.renderingStartTime>Go&&n!==1073741824&&(e.flags|=128,i=!0,Qa(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ct(),e.sibling=null,n=et.current,We(et,i?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return Im(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?pn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function cA(t,e){switch(im(e),e.tag){case 1:return ln(e.type)&&Gc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qo(),$e(an),$e(Wt),dm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hm(e),null;case 13:if($e(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Ho()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(et),null;case 4:return qo(),null;case 10:return am(e.type._context),null;case 22:case 23:return Im(),null;case 24:return null;default:return null}}var sc=!1,Bt=!1,hA=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Co(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ot(t,e,i)}else n.current=null}function Kf(t,e,n){try{n()}catch(i){ot(t,e,i)}}var Q_=!1;function dA(t,e){if(Of=Hc,t=Qw(),tm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,m=0,v=0,y=t,w=null;t:for(;;){for(var C;y!==n||s!==0&&y.nodeType!==3||(h=l+s),y!==o||i!==0&&y.nodeType!==3||(d=l+i),y.nodeType===3&&(l+=y.nodeValue.length),(C=y.firstChild)!==null;)w=y,y=C;for(;;){if(y===t)break t;if(w===n&&++m===s&&(h=l),w===o&&++v===i&&(d=l),(C=y.nextSibling)!==null)break;y=w,w=y.parentNode}y=C}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nf={focusedElem:t,selectionRange:n},Hc=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var M=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var V=M.memoizedProps,H=M.memoizedState,k=e.stateNode,P=k.getSnapshotBeforeUpdate(e.elementType===e.type?V:Gn(e.type,V),H);k.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(U){ot(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return M=Q_,Q_=!1,M}function ml(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Kf(e,n,o)}s=s.next}while(s!==i)}}function zh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Qf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $0(t){var e=t.alternate;e!==null&&(t.alternate=null,$0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ci],delete e[Dl],delete e[Mf],delete e[ZS],delete e[KS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function G0(t){return t.tag===5||t.tag===3||t.tag===4}function Y_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||G0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$c));else if(i!==4&&(t=t.child,t!==null))for(Yf(t,e,n),t=t.sibling;t!==null;)Yf(t,e,n),t=t.sibling}function Xf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Xf(t,e,n),t=t.sibling;t!==null;)Xf(t,e,n),t=t.sibling}var Ot=null,Zn=!1;function lr(t,e,n){for(n=n.child;n!==null;)Z0(t,e,n),n=n.sibling}function Z0(t,e,n){if(di&&typeof di.onCommitFiberUnmount=="function")try{di.onCommitFiberUnmount(Lh,n)}catch{}switch(n.tag){case 5:Bt||Co(n,e);case 6:var i=Ot,s=Zn;Ot=null,lr(t,e,n),Ot=i,Zn=s,Ot!==null&&(Zn?(t=Ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ot.removeChild(n.stateNode));break;case 18:Ot!==null&&(Zn?(t=Ot,n=n.stateNode,t.nodeType===8?Ud(t.parentNode,n):t.nodeType===1&&Ud(t,n),xl(t)):Ud(Ot,n.stateNode));break;case 4:i=Ot,s=Zn,Ot=n.stateNode.containerInfo,Zn=!0,lr(t,e,n),Ot=i,Zn=s;break;case 0:case 11:case 14:case 15:if(!Bt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Kf(n,e,l),s=s.next}while(s!==i)}lr(t,e,n);break;case 1:if(!Bt&&(Co(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){ot(n,e,h)}lr(t,e,n);break;case 21:lr(t,e,n);break;case 22:n.mode&1?(Bt=(i=Bt)||n.memoizedState!==null,lr(t,e,n),Bt=i):lr(t,e,n);break;default:lr(t,e,n)}}function X_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hA),e.forEach(function(i){var s=EA.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Ot=h.stateNode,Zn=!1;break e;case 3:Ot=h.stateNode.containerInfo,Zn=!0;break e;case 4:Ot=h.stateNode.containerInfo,Zn=!0;break e}h=h.return}if(Ot===null)throw Error(Q(160));Z0(o,l,s),Ot=null,Zn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(m){ot(s,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)K0(e,t),e=e.sibling}function K0(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),ai(t),i&4){try{ml(3,t,t.return),zh(3,t)}catch(V){ot(t,t.return,V)}try{ml(5,t,t.return)}catch(V){ot(t,t.return,V)}}break;case 1:$n(e,t),ai(t),i&512&&n!==null&&Co(n,n.return);break;case 5:if($n(e,t),ai(t),i&512&&n!==null&&Co(n,n.return),t.flags&32){var s=t.stateNode;try{Al(s,"")}catch(V){ot(t,t.return,V)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&_w(s,o),Tf(h,l);var m=Tf(h,o);for(l=0;l<d.length;l+=2){var v=d[l],y=d[l+1];v==="style"?Tw(s,y):v==="dangerouslySetInnerHTML"?ww(s,y):v==="children"?Al(s,y):jp(s,v,y,m)}switch(h){case"input":_f(s,o);break;case"textarea":vw(s,o);break;case"select":var w=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var C=o.value;C!=null?xo(s,!!o.multiple,C,!1):w!==!!o.multiple&&(o.defaultValue!=null?xo(s,!!o.multiple,o.defaultValue,!0):xo(s,!!o.multiple,o.multiple?[]:"",!1))}s[Dl]=o}catch(V){ot(t,t.return,V)}}break;case 6:if($n(e,t),ai(t),i&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(V){ot(t,t.return,V)}}break;case 3:if($n(e,t),ai(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{xl(e.containerInfo)}catch(V){ot(t,t.return,V)}break;case 4:$n(e,t),ai(t);break;case 13:$n(e,t),ai(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Em=ct())),i&4&&X_(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Bt=(m=Bt)||v,$n(e,t),Bt=m):$n(e,t),ai(t),i&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!v&&t.mode&1)for(ie=t,v=t.child;v!==null;){for(y=ie=v;ie!==null;){switch(w=ie,C=w.child,w.tag){case 0:case 11:case 14:case 15:ml(4,w,w.return);break;case 1:Co(w,w.return);var M=w.stateNode;if(typeof M.componentWillUnmount=="function"){i=w,n=w.return;try{e=i,M.props=e.memoizedProps,M.state=e.memoizedState,M.componentWillUnmount()}catch(V){ot(i,n,V)}}break;case 5:Co(w,w.return);break;case 22:if(w.memoizedState!==null){ev(y);continue}}C!==null?(C.return=w,ie=C):ev(y)}v=v.sibling}e:for(v=null,y=t;;){if(y.tag===5){if(v===null){v=y;try{s=y.stateNode,m?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=y.stateNode,d=y.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=Ew("display",l))}catch(V){ot(t,t.return,V)}}}else if(y.tag===6){if(v===null)try{y.stateNode.nodeValue=m?"":y.memoizedProps}catch(V){ot(t,t.return,V)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:$n(e,t),ai(t),i&4&&X_(t);break;case 21:break;default:$n(e,t),ai(t)}}function ai(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(G0(n)){var i=n;break e}n=n.return}throw Error(Q(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Al(s,""),i.flags&=-33);var o=Y_(t);Xf(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=Y_(t);Yf(t,h,l);break;default:throw Error(Q(161))}}catch(d){ot(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fA(t,e,n){ie=t,Q0(t)}function Q0(t,e,n){for(var i=(t.mode&1)!==0;ie!==null;){var s=ie,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||sc;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Bt;h=sc;var m=Bt;if(sc=l,(Bt=d)&&!m)for(ie=s;ie!==null;)l=ie,d=l.child,l.tag===22&&l.memoizedState!==null?tv(s):d!==null?(d.return=l,ie=d):tv(s);for(;o!==null;)ie=o,Q0(o),o=o.sibling;ie=s,sc=h,Bt=m}J_(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ie=o):J_(t)}}function J_(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||zh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Bt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Gn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&V_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}V_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var v=m.memoizedState;if(v!==null){var y=v.dehydrated;y!==null&&xl(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Bt||e.flags&512&&Qf(e)}catch(w){ot(e,e.return,w)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function ev(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function tv(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zh(4,e)}catch(d){ot(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){ot(e,s,d)}}var o=e.return;try{Qf(e)}catch(d){ot(e,o,d)}break;case 5:var l=e.return;try{Qf(e)}catch(d){ot(e,l,d)}}}catch(d){ot(e,e.return,d)}if(e===t){ie=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ie=h;break}ie=e.return}}var pA=Math.ceil,ih=Qi.ReactCurrentDispatcher,ym=Qi.ReactCurrentOwner,Nn=Qi.ReactCurrentBatchConfig,be=0,xt=null,_t=null,bt=0,pn=0,ko=Zr(0),Tt=0,Bl=null,Ss=0,Uh=0,wm=0,gl=null,sn=null,Em=0,Go=1/0,Mi=null,rh=!1,Jf=null,Cr=null,oc=!1,yr=null,sh=0,_l=0,ep=null,Pc=-1,Sc=0;function Qt(){return be&6?ct():Pc!==-1?Pc:Pc=ct()}function kr(t){return t.mode&1?be&2&&bt!==0?bt&-bt:YS.transition!==null?(Sc===0&&(Sc=bw()),Sc):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:Bw(t.type)),t):1}function Jn(t,e,n,i){if(50<_l)throw _l=0,ep=null,Error(Q(185));Xl(t,n,i),(!(be&2)||t!==xt)&&(t===xt&&(!(be&2)&&(Uh|=n),Tt===4&&fr(t,bt)),un(t,i),n===1&&be===0&&!(e.mode&1)&&(Go=ct()+500,Mh&&Kr()))}function un(t,e){var n=t.callbackNode;YP(t,e);var i=jc(t,t===xt?bt:0);if(i===0)n!==null&&c_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&c_(n),e===1)t.tag===0?QS(nv.bind(null,t)):o0(nv.bind(null,t)),$S(function(){!(be&6)&&Kr()}),n=null;else{switch(Dw(i)){case 1:n=Gp;break;case 4:n=Ow;break;case 16:n=Bc;break;case 536870912:n=Nw;break;default:n=Bc}n=rE(n,Y0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Y0(t,e){if(Pc=-1,Sc=0,be&6)throw Error(Q(327));var n=t.callbackNode;if(Do()&&t.callbackNode!==n)return null;var i=jc(t,t===xt?bt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=oh(t,i);else{e=i;var s=be;be|=2;var o=J0();(xt!==t||bt!==e)&&(Mi=null,Go=ct()+500,_s(t,e));do try{_A();break}catch(h){X0(t,h)}while(!0);om(),ih.current=o,be=s,_t!==null?e=0:(xt=null,bt=0,e=Tt)}if(e!==0){if(e===2&&(s=Cf(t),s!==0&&(i=s,e=tp(t,s))),e===1)throw n=Bl,_s(t,0),fr(t,i),un(t,ct()),n;if(e===6)fr(t,i);else{if(s=t.current.alternate,!(i&30)&&!mA(s)&&(e=oh(t,i),e===2&&(o=Cf(t),o!==0&&(i=o,e=tp(t,o))),e===1))throw n=Bl,_s(t,0),fr(t,i),un(t,ct()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(Q(345));case 2:hs(t,sn,Mi);break;case 3:if(fr(t,i),(i&130023424)===i&&(e=Em+500-ct(),10<e)){if(jc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Df(hs.bind(null,t,sn,Mi),e);break}hs(t,sn,Mi);break;case 4:if(fr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-Xn(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=ct()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*pA(i/1960))-i,10<i){t.timeoutHandle=Df(hs.bind(null,t,sn,Mi),i);break}hs(t,sn,Mi);break;case 5:hs(t,sn,Mi);break;default:throw Error(Q(329))}}}return un(t,ct()),t.callbackNode===n?Y0.bind(null,t):null}function tp(t,e){var n=gl;return t.current.memoizedState.isDehydrated&&(_s(t,e).flags|=256),t=oh(t,e),t!==2&&(e=sn,sn=n,e!==null&&np(e)),t}function np(t){sn===null?sn=t:sn.push.apply(sn,t)}function mA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!ei(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fr(t,e){for(e&=~wm,e&=~Uh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xn(e),i=1<<n;t[n]=-1,e&=~i}}function nv(t){if(be&6)throw Error(Q(327));Do();var e=jc(t,0);if(!(e&1))return un(t,ct()),null;var n=oh(t,e);if(t.tag!==0&&n===2){var i=Cf(t);i!==0&&(e=i,n=tp(t,i))}if(n===1)throw n=Bl,_s(t,0),fr(t,e),un(t,ct()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hs(t,sn,Mi),un(t,ct()),null}function Tm(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(Go=ct()+500,Mh&&Kr())}}function As(t){yr!==null&&yr.tag===0&&!(be&6)&&Do();var e=be;be|=1;var n=Nn.transition,i=Fe;try{if(Nn.transition=null,Fe=1,t)return t()}finally{Fe=i,Nn.transition=n,be=e,!(be&6)&&Kr()}}function Im(){pn=ko.current,$e(ko)}function _s(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qS(n)),_t!==null)for(n=_t.return;n!==null;){var i=n;switch(im(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Gc();break;case 3:qo(),$e(an),$e(Wt),dm();break;case 5:hm(i);break;case 4:qo();break;case 13:$e(et);break;case 19:$e(et);break;case 10:am(i.type._context);break;case 22:case 23:Im()}n=n.return}if(xt=t,_t=t=Rr(t.current,null),bt=pn=e,Tt=0,Bl=null,wm=Uh=Ss=0,sn=gl=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}ps=null}return t}function X0(t,e){do{var n=_t;try{if(om(),Ec.current=nh,th){for(var i=tt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}th=!1}if(Ps=0,Rt=Et=tt=null,pl=!1,Fl=0,ym.current=null,n===null||n.return===null){Tt=1,Bl=e,_t=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=bt,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,v=h,y=v.tag;if(!(v.mode&1)&&(y===0||y===11||y===15)){var w=v.alternate;w?(v.updateQueue=w.updateQueue,v.memoizedState=w.memoizedState,v.lanes=w.lanes):(v.updateQueue=null,v.memoizedState=null)}var C=H_(l);if(C!==null){C.flags&=-257,W_(C,l,h,o,e),C.mode&1&&j_(o,m,e),e=C,d=m;var M=e.updateQueue;if(M===null){var V=new Set;V.add(d),e.updateQueue=V}else M.add(d);break e}else{if(!(e&1)){j_(o,m,e),Pm();break e}d=Error(Q(426))}}else if(Qe&&h.mode&1){var H=H_(l);if(H!==null){!(H.flags&65536)&&(H.flags|=256),W_(H,l,h,o,e),rm($o(d,h));break e}}o=d=$o(d,h),Tt!==4&&(Tt=2),gl===null?gl=[o]:gl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var k=D0(o,d,e);M_(o,k);break e;case 1:h=d;var P=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Cr===null||!Cr.has(N)))){o.flags|=65536,e&=-e,o.lanes|=e;var U=M0(o,h,e);M_(o,U);break e}}o=o.return}while(o!==null)}tE(n)}catch(Y){e=Y,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(!0)}function J0(){var t=ih.current;return ih.current=nh,t===null?nh:t}function Pm(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),xt===null||!(Ss&268435455)&&!(Uh&268435455)||fr(xt,bt)}function oh(t,e){var n=be;be|=2;var i=J0();(xt!==t||bt!==e)&&(Mi=null,_s(t,e));do try{gA();break}catch(s){X0(t,s)}while(!0);if(om(),be=n,ih.current=i,_t!==null)throw Error(Q(261));return xt=null,bt=0,Tt}function gA(){for(;_t!==null;)eE(_t)}function _A(){for(;_t!==null&&!jP();)eE(_t)}function eE(t){var e=iE(t.alternate,t,pn);t.memoizedProps=t.pendingProps,e===null?tE(t):_t=e,ym.current=null}function tE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cA(n,e),n!==null){n.flags&=32767,_t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,_t=null;return}}else if(n=uA(n,e,pn),n!==null){_t=n;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);Tt===0&&(Tt=5)}function hs(t,e,n){var i=Fe,s=Nn.transition;try{Nn.transition=null,Fe=1,vA(t,e,n,i)}finally{Nn.transition=s,Fe=i}return null}function vA(t,e,n,i){do Do();while(yr!==null);if(be&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(XP(t,o),t===xt&&(_t=xt=null,bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oc||(oc=!0,rE(Bc,function(){return Do(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Nn.transition,Nn.transition=null;var l=Fe;Fe=1;var h=be;be|=4,ym.current=null,dA(t,n),K0(n,t),FS(Nf),Hc=!!Of,Nf=Of=null,t.current=n,fA(n),HP(),be=h,Fe=l,Nn.transition=o}else t.current=n;if(oc&&(oc=!1,yr=t,sh=s),o=t.pendingLanes,o===0&&(Cr=null),$P(n.stateNode),un(t,ct()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(rh)throw rh=!1,t=Jf,Jf=null,t;return sh&1&&t.tag!==0&&Do(),o=t.pendingLanes,o&1?t===ep?_l++:(_l=0,ep=t):_l=0,Kr(),null}function Do(){if(yr!==null){var t=Dw(sh),e=Nn.transition,n=Fe;try{if(Nn.transition=null,Fe=16>t?16:t,yr===null)var i=!1;else{if(t=yr,yr=null,sh=0,be&6)throw Error(Q(331));var s=be;for(be|=4,ie=t.current;ie!==null;){var o=ie,l=o.child;if(ie.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var m=h[d];for(ie=m;ie!==null;){var v=ie;switch(v.tag){case 0:case 11:case 15:ml(8,v,o)}var y=v.child;if(y!==null)y.return=v,ie=y;else for(;ie!==null;){v=ie;var w=v.sibling,C=v.return;if($0(v),v===m){ie=null;break}if(w!==null){w.return=C,ie=w;break}ie=C}}}var M=o.alternate;if(M!==null){var V=M.child;if(V!==null){M.child=null;do{var H=V.sibling;V.sibling=null,V=H}while(V!==null)}}ie=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ie=l;else e:for(;ie!==null;){if(o=ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ml(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,ie=k;break e}ie=o.return}}var P=t.current;for(ie=P;ie!==null;){l=ie;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,ie=N;else e:for(l=P;ie!==null;){if(h=ie,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:zh(9,h)}}catch(Y){ot(h,h.return,Y)}if(h===l){ie=null;break e}var U=h.sibling;if(U!==null){U.return=h.return,ie=U;break e}ie=h.return}}if(be=s,Kr(),di&&typeof di.onPostCommitFiberRoot=="function")try{di.onPostCommitFiberRoot(Lh,t)}catch{}i=!0}return i}finally{Fe=n,Nn.transition=e}}return!1}function iv(t,e,n){e=$o(n,e),e=D0(t,e,1),t=Ar(t,e,1),e=Qt(),t!==null&&(Xl(t,1,e),un(t,e))}function ot(t,e,n){if(t.tag===3)iv(t,t,n);else for(;e!==null;){if(e.tag===3){iv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Cr===null||!Cr.has(i))){t=$o(n,t),t=M0(e,t,1),e=Ar(e,t,1),t=Qt(),e!==null&&(Xl(e,1,t),un(e,t));break}}e=e.return}}function yA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(bt&n)===n&&(Tt===4||Tt===3&&(bt&130023424)===bt&&500>ct()-Em?_s(t,0):wm|=n),un(t,e)}function nE(t,e){e===0&&(t.mode&1?(e=Qu,Qu<<=1,!(Qu&130023424)&&(Qu=4194304)):e=1);var n=Qt();t=qi(t,e),t!==null&&(Xl(t,e,n),un(t,n))}function wA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nE(t,n)}function EA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Q(314))}i!==null&&i.delete(e),nE(t,n)}var iE;iE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,lA(t,e,n);on=!!(t.flags&131072)}else on=!1,Qe&&e.flags&1048576&&a0(e,Qc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ic(t,e),t=e.pendingProps;var s=jo(e,Wt.current);bo(e,n),s=pm(null,e,i,t,s,n);var o=mm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(i)?(o=!0,Zc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,um(e),s.updater=Fh,e.stateNode=s,s._reactInternals=e,jf(e,i,t,n),e=qf(null,e,i,!0,o,n)):(e.tag=0,Qe&&o&&nm(e),Kt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ic(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=IA(i),t=Gn(i,t),s){case 0:e=Wf(null,e,i,t,n);break e;case 1:e=G_(null,e,i,t,n);break e;case 11:e=q_(null,e,i,t,n);break e;case 14:e=$_(null,e,i,Gn(i.type,t),n);break e}throw Error(Q(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Gn(i,s),Wf(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Gn(i,s),G_(t,e,i,s,n);case 3:e:{if(U0(e),t===null)throw Error(Q(387));i=e.pendingProps,o=e.memoizedState,s=o.element,f0(t,e),Jc(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=$o(Error(Q(423)),e),e=Z_(t,e,i,n,s);break e}else if(i!==s){s=$o(Error(Q(424)),e),e=Z_(t,e,i,n,s);break e}else for(mn=Sr(e.stateNode.containerInfo.firstChild),gn=e,Qe=!0,Kn=null,n=h0(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ho(),i===s){e=$i(t,e,n);break e}Kt(t,e,i,n)}e=e.child}return e;case 5:return p0(e),t===null&&zf(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,bf(i,s)?l=null:o!==null&&bf(i,o)&&(e.flags|=32),z0(t,e),Kt(t,e,l,n),e.child;case 6:return t===null&&zf(e),null;case 13:return B0(t,e,n);case 4:return cm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Wo(e,null,i,n):Kt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Gn(i,s),q_(t,e,i,s,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,We(Yc,i._currentValue),i._currentValue=l,o!==null)if(ei(o.value,l)){if(o.children===s.children&&!an.current){e=$i(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=ji(-1,n&-n),d.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var v=m.pending;v===null?d.next=d:(d.next=v.next,v.next=d),m.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Uf(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Q(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Uf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,bo(e,n),s=bn(s),i=i(s),e.flags|=1,Kt(t,e,i,n),e.child;case 14:return i=e.type,s=Gn(i,e.pendingProps),s=Gn(i.type,s),$_(t,e,i,s,n);case 15:return V0(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Gn(i,s),Ic(t,e),e.tag=1,ln(i)?(t=!0,Zc(e)):t=!1,bo(e,n),b0(e,i,s),jf(e,i,s,n),qf(null,e,i,!0,t,n);case 19:return j0(t,e,n);case 22:return F0(t,e,n)}throw Error(Q(156,e.tag))};function rE(t,e){return Lw(t,e)}function TA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,e,n,i){return new TA(t,e,n,i)}function Sm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IA(t){if(typeof t=="function")return Sm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wp)return 11;if(t===qp)return 14}return 2}function Rr(t,e){var n=t.alternate;return n===null?(n=On(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ac(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")Sm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case vo:return vs(n.children,s,o,e);case Hp:l=8,s|=8;break;case df:return t=On(12,n,e,s|2),t.elementType=df,t.lanes=o,t;case ff:return t=On(13,n,e,s),t.elementType=ff,t.lanes=o,t;case pf:return t=On(19,n,e,s),t.elementType=pf,t.lanes=o,t;case pw:return Bh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dw:l=10;break e;case fw:l=9;break e;case Wp:l=11;break e;case qp:l=14;break e;case cr:l=16,i=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=On(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function vs(t,e,n,i){return t=On(7,t,i,e),t.lanes=n,t}function Bh(t,e,n,i){return t=On(22,t,i,e),t.elementType=pw,t.lanes=n,t.stateNode={isHidden:!1},t}function Zd(t,e,n){return t=On(6,t,null,e),t.lanes=n,t}function Kd(t,e,n){return e=On(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PA(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rd(0),this.expirationTimes=Rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rd(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Am(t,e,n,i,s,o,l,h,d){return t=new PA(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=On(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},um(o),t}function SA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_o,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function sE(t){if(!t)return Fr;t=t._reactInternals;e:{if(Os(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(ln(n))return s0(t,n,e)}return e}function oE(t,e,n,i,s,o,l,h,d){return t=Am(n,i,!0,t,s,o,l,h,d),t.context=sE(null),n=t.current,i=Qt(),s=kr(n),o=ji(i,s),o.callback=e??null,Ar(n,o,s),t.current.lanes=s,Xl(t,s,i),un(t,i),t}function jh(t,e,n,i){var s=e.current,o=Qt(),l=kr(s);return n=sE(n),e.context===null?e.context=n:e.pendingContext=n,e=ji(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ar(s,e,l),t!==null&&(Jn(t,s,l,o),wc(t,s,l)),l}function ah(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cm(t,e){rv(t,e),(t=t.alternate)&&rv(t,e)}function AA(){return null}var aE=typeof reportError=="function"?reportError:function(t){console.error(t)};function km(t){this._internalRoot=t}Hh.prototype.render=km.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));jh(t,e,null,null)};Hh.prototype.unmount=km.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;As(function(){jh(null,t,null,null)}),e[Wi]=null}};function Hh(t){this._internalRoot=t}Hh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<dr.length&&e!==0&&e<dr[n].priority;n++);dr.splice(n,0,t),n===0&&Uw(t)}};function Rm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sv(){}function CA(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var m=ah(l);o.call(m)}}var l=oE(e,i,t,0,null,!1,!1,"",sv);return t._reactRootContainer=l,t[Wi]=l.current,Nl(t.nodeType===8?t.parentNode:t),As(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var m=ah(d);h.call(m)}}var d=Am(t,0,!1,null,null,!1,!1,"",sv);return t._reactRootContainer=d,t[Wi]=d.current,Nl(t.nodeType===8?t.parentNode:t),As(function(){jh(e,d,n,i)}),d}function qh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=ah(l);h.call(d)}}jh(e,l,t,s)}else l=CA(n,e,t,s,i);return ah(l)}Mw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=el(e.pendingLanes);n!==0&&(Zp(e,n|1),un(e,ct()),!(be&6)&&(Go=ct()+500,Kr()))}break;case 13:As(function(){var i=qi(t,1);if(i!==null){var s=Qt();Jn(i,t,1,s)}}),Cm(t,1)}};Kp=function(t){if(t.tag===13){var e=qi(t,134217728);if(e!==null){var n=Qt();Jn(e,t,134217728,n)}Cm(t,134217728)}};Vw=function(t){if(t.tag===13){var e=kr(t),n=qi(t,e);if(n!==null){var i=Qt();Jn(n,t,e,i)}Cm(t,e)}};Fw=function(){return Fe};zw=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};Pf=function(t,e,n){switch(e){case"input":if(_f(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Dh(i);if(!s)throw Error(Q(90));gw(i),_f(i,s)}}}break;case"textarea":vw(t,n);break;case"select":e=n.value,e!=null&&xo(t,!!n.multiple,e,!1)}};Sw=Tm;Aw=As;var kA={usingClientEntryPoint:!1,Events:[eu,To,Dh,Iw,Pw,Tm]},Ya={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RA={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rw(t),t===null?null:t.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||AA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{Lh=ac.inject(RA),di=ac}catch{}}vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kA;vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rm(e))throw Error(Q(200));return SA(t,e,null,n)};vn.createRoot=function(t,e){if(!Rm(t))throw Error(Q(299));var n=!1,i="",s=aE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Am(t,1,!1,null,null,n,!1,i,s),t[Wi]=e.current,Nl(t.nodeType===8?t.parentNode:t),new km(e)};vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=Rw(e),t=t===null?null:t.stateNode,t};vn.flushSync=function(t){return As(t)};vn.hydrate=function(t,e,n){if(!Wh(e))throw Error(Q(200));return qh(null,t,e,!0,n)};vn.hydrateRoot=function(t,e,n){if(!Rm(t))throw Error(Q(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=aE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=oE(e,null,t,1,n??null,s,!1,o,l),t[Wi]=e.current,Nl(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Hh(e)};vn.render=function(t,e,n){if(!Wh(e))throw Error(Q(200));return qh(null,t,e,!1,n)};vn.unmountComponentAtNode=function(t){if(!Wh(t))throw Error(Q(40));return t._reactRootContainer?(As(function(){qh(null,null,t,!1,function(){t._reactRootContainer=null,t[Wi]=null})}),!0):!1};vn.unstable_batchedUpdates=Tm;vn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Wh(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return qh(t,e,n,!1,i)};vn.version="18.3.1-next-f1338f8080-20240426";function lE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lE)}catch(t){console.error(t)}}lE(),lw.exports=vn;var uE=lw.exports,ov=uE;cf.createRoot=ov.createRoot,cf.hydrateRoot=ov.hydrateRoot;const xA=()=>{};var av={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},LA=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},hE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,m=d?t[s+2]:0,v=o>>2,y=(o&3)<<4|h>>4;let w=(h&15)<<2|m>>6,C=m&63;d||(C=64,l||(w=64)),i.push(n[v],n[y],n[w],n[C])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||m==null||y==null)throw new OA;const w=o<<2|h>>4;if(i.push(w),m!==64){const C=h<<4&240|m>>2;if(i.push(C),y!==64){const M=m<<6&192|y;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class OA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NA=function(t){const e=cE(t);return hE.encodeByteArray(e,!0)},lh=function(t){return NA(t).replace(/\./g,"")},dE=function(t){try{return hE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=()=>bA().__FIREBASE_DEFAULTS__,MA=()=>{if(typeof process>"u"||typeof av>"u")return;const t=av.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dE(t[1]);return e&&JSON.parse(e)},$h=()=>{try{return xA()||DA()||MA()||VA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fE=t=>{var e,n;return(n=(e=$h())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},pE=t=>{const e=fE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},mE=()=>{var t;return(t=$h())===null||t===void 0?void 0:t.config},gE=t=>{var e;return(e=$h())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lh(JSON.stringify(n)),lh(JSON.stringify(l)),""].join(".")}const vl={};function zA(){const t={prod:[],emulator:[]};for(const e of Object.keys(vl))vl[e]?t.emulator.push(e):t.prod.push(e);return t}function UA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let lv=!1;function Lm(t,e){if(typeof window>"u"||typeof document>"u"||!Ns(window.location.host)||vl[t]===e||vl[t]||lv)return;vl[t]=e;function n(w){return`__firebase__banner__${w}`}const i="__firebase__banner",o=zA().prod.length>0;function l(){const w=document.getElementById(i);w&&w.remove()}function h(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,C){w.setAttribute("width","24"),w.setAttribute("id",C),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{lv=!0,l()},w}function v(w,C){w.setAttribute("id",C),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function y(){const w=UA(i),C=n("text"),M=document.getElementById(C)||document.createElement("span"),V=n("learnmore"),H=document.getElementById(V)||document.createElement("a"),k=n("preprendIcon"),P=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const N=w.element;h(N),v(H,V);const U=m();d(P,k),N.append(P,M,H,U),document.body.appendChild(N)}o?(M.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function jA(){var t;const e=(t=$h())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $A(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function GA(){return!jA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZA(){try{return typeof indexedDB=="object"}catch{return!1}}function KA(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="FirebaseError";class Ti extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=QA,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nu.prototype.create)}}class nu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?YA(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Ti(s,h,i)}}function YA(t,e){return t.replace(XA,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const XA=/\{\$([^}]+)}/g;function JA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cs(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(uv(o)&&uv(l)){if(!Cs(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function uv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function il(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function eC(t,e){const n=new tC(t,e);return n.subscribe.bind(n)}class tC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");nC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Qd),s.error===void 0&&(s.error=Qd),s.complete===void 0&&(s.complete=Qd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t){return t&&t._delegate?t._delegate:t}class zr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new FA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sC(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:rC(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rC(t){return t===ds?void 0:t}function sC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const aC={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},lC=Ce.INFO,uC={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},cC=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=uC[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Om{constructor(e){this.name=e,this._logLevel=lC,this._logHandler=cC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const hC=(t,e)=>e.some(n=>t instanceof n);let cv,hv;function dC(){return cv||(cv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fC(){return hv||(hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vE=new WeakMap,ip=new WeakMap,yE=new WeakMap,Yd=new WeakMap,Nm=new WeakMap;function pC(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(xr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&vE.set(n,t)}).catch(()=>{}),Nm.set(e,t),e}function mC(t){if(ip.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});ip.set(t,e)}let rp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ip.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gC(t){rp=t(rp)}function _C(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Xd(this),e,...n);return yE.set(i,e.sort?e.sort():[e]),xr(i)}:fC().includes(t)?function(...e){return t.apply(Xd(this),e),xr(vE.get(this))}:function(...e){return xr(t.apply(Xd(this),e))}}function vC(t){return typeof t=="function"?_C(t):(t instanceof IDBTransaction&&mC(t),hC(t,dC())?new Proxy(t,rp):t)}function xr(t){if(t instanceof IDBRequest)return pC(t);if(Yd.has(t))return Yd.get(t);const e=vC(t);return e!==t&&(Yd.set(t,e),Nm.set(e,t)),e}const Xd=t=>Nm.get(t);function yC(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=xr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(xr(l.result),d.oldVersion,d.newVersion,xr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const wC=["get","getKey","getAll","getAllKeys","count"],EC=["put","add","delete","clear"],Jd=new Map;function dv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jd.get(e))return Jd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=EC.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||wC.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),s&&d.done]))[0]};return Jd.set(e,o),o}gC(t=>({...t,get:(e,n,i)=>dv(e,n)||t.get(e,n,i),has:(e,n)=>!!dv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IC(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function IC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sp="@firebase/app",fv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi=new Om("@firebase/app"),PC="@firebase/app-compat",SC="@firebase/analytics-compat",AC="@firebase/analytics",CC="@firebase/app-check-compat",kC="@firebase/app-check",RC="@firebase/auth",xC="@firebase/auth-compat",LC="@firebase/database",OC="@firebase/data-connect",NC="@firebase/database-compat",bC="@firebase/functions",DC="@firebase/functions-compat",MC="@firebase/installations",VC="@firebase/installations-compat",FC="@firebase/messaging",zC="@firebase/messaging-compat",UC="@firebase/performance",BC="@firebase/performance-compat",jC="@firebase/remote-config",HC="@firebase/remote-config-compat",WC="@firebase/storage",qC="@firebase/storage-compat",$C="@firebase/firestore",GC="@firebase/ai",ZC="@firebase/firestore-compat",KC="firebase",QC="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]",YC={[sp]:"fire-core",[PC]:"fire-core-compat",[AC]:"fire-analytics",[SC]:"fire-analytics-compat",[kC]:"fire-app-check",[CC]:"fire-app-check-compat",[RC]:"fire-auth",[xC]:"fire-auth-compat",[LC]:"fire-rtdb",[OC]:"fire-data-connect",[NC]:"fire-rtdb-compat",[bC]:"fire-fn",[DC]:"fire-fn-compat",[MC]:"fire-iid",[VC]:"fire-iid-compat",[FC]:"fire-fcm",[zC]:"fire-fcm-compat",[UC]:"fire-perf",[BC]:"fire-perf-compat",[jC]:"fire-rc",[HC]:"fire-rc-compat",[WC]:"fire-gcs",[qC]:"fire-gcs-compat",[$C]:"fire-fst",[ZC]:"fire-fst-compat",[GC]:"fire-vertex","fire-js":"fire-js",[KC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Map,XC=new Map,ap=new Map;function pv(t,e){try{t.container.addComponent(e)}catch(n){Gi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ks(t){const e=t.name;if(ap.has(e))return Gi.debug(`There were multiple attempts to register component ${e}.`),!1;ap.set(e,t);for(const n of uh.values())pv(n,t);for(const n of XC.values())pv(n,t);return!0}function Gh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new nu("app","Firebase",JC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=QC;function bm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:op,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw Lr.create("bad-app-name",{appName:String(s)});if(n||(n=mE()),!n)throw Lr.create("no-options");const o=uh.get(s);if(o){if(Cs(n,o.options)&&Cs(i,o.config))return o;throw Lr.create("duplicate-app",{appName:s})}const l=new oC(s);for(const d of ap.values())l.addComponent(d);const h=new e1(n,i,l);return uh.set(s,h),h}function Dm(t=op){const e=uh.get(t);if(!e&&t===op&&mE())return bm();if(!e)throw Lr.create("no-app",{appName:t});return e}function pi(t,e,n){var i;let s=(i=YC[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gi.warn(h.join(" "));return}ks(new zr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="firebase-heartbeat-database",n1=1,jl="firebase-heartbeat-store";let ef=null;function wE(){return ef||(ef=yC(t1,n1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),ef}async function i1(t){try{const n=(await wE()).transaction(jl),i=await n.objectStore(jl).get(EE(t));return await n.done,i}catch(e){if(e instanceof Ti)Gi.warn(e.message);else{const n=Lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gi.warn(n.message)}}}async function mv(t,e){try{const i=(await wE()).transaction(jl,"readwrite");await i.objectStore(jl).put(e,EE(t)),await i.done}catch(n){if(n instanceof Ti)Gi.warn(n.message);else{const i=Lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gi.warn(i.message)}}}function EE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=1024,s1=30;class o1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new l1(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=gv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>s1){const l=u1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Gi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gv(),{heartbeatsToSend:i,unsentEntries:s}=a1(this._heartbeatsCache.heartbeats),o=lh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Gi.warn(n),""}}}function gv(){return new Date().toISOString().substring(0,10)}function a1(t,e=r1){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),_v(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),_v(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class l1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZA()?KA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await i1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return mv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return mv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function _v(t){return lh(JSON.stringify({version:2,heartbeats:t})).length}function u1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t){ks(new zr("platform-logger",e=>new TC(e),"PRIVATE")),ks(new zr("heartbeat",e=>new o1(e),"PRIVATE")),pi(sp,fv,t),pi(sp,fv,"esm2017"),pi("fire-js","")}c1("");var h1="firebase",d1="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(h1,d1,"app");function Mm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function TE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f1=TE,IE=new nu("auth","Firebase",TE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Om("@firebase/auth");function p1(t,...e){ch.logLevel<=Ce.WARN&&ch.warn(`Auth (${bs}): ${t}`,...e)}function Cc(t,...e){ch.logLevel<=Ce.ERROR&&ch.error(`Auth (${bs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t,...e){throw Vm(t,...e)}function mi(t,...e){return Vm(t,...e)}function PE(t,e,n){const i=Object.assign(Object.assign({},f1()),{[e]:n});return new nu("auth","Firebase",i).create(e,{appName:t.name})}function Or(t){return PE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return IE.create(t,...e)}function de(t,e,...n){if(!t)throw Vm(e,...n)}function Ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cc(e),new Error(e)}function Zi(t,e){t||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function m1(){return vv()==="http:"||vv()==="https:"}function vv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(m1()||WA()||"connection"in navigator)?navigator.onLine:!0}function _1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zi(n>e,"Short delay should be less than long delay!"),this.isMobile=BA()||qA()}get(){return g1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t,e){Zi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],w1=new ru(3e4,6e4);function Ds(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Qr(t,e,n,i,s={}){return AE(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=iu(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:d},o);return HA()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Ns(t.emulatorConfig.host)&&(m.credentials="include"),SE.fetch()(await CE(t,t.config.apiHost,n,h),m)})}async function AE(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},v1),e);try{const s=new T1(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw lc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw lc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw lc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw lc(t,"user-disabled",l);const v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw PE(t,v,m);ti(t,v)}}catch(s){if(s instanceof Ti)throw s;ti(t,"network-request-failed",{message:String(s)})}}async function Zh(t,e,n,i,s={}){const o=await Qr(t,e,n,i,s);return"mfaPendingCredential"in o&&ti(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function CE(t,e,n,i){const s=`${e}${n}?${i}`,o=t,l=o.config.emulator?Fm(t.config,s):`${t.config.apiScheme}://${s}`;return y1.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function E1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class T1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(mi(this.auth,"network-request-failed")),w1.get())})}}function lc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=mi(t,e,i);return s.customData._tokenResponse=n,s}function yv(t){return t!==void 0&&t.enterprise!==void 0}class I1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return E1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function P1(t,e){return Qr(t,"GET","/v2/recaptchaConfig",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(t,e){return Qr(t,"POST","/v1/accounts:delete",e)}async function hh(t,e){return Qr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A1(t,e=!1){const n=$t(t),i=await n.getIdToken(e),s=zm(i);de(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:yl(tf(s.auth_time)),issuedAtTime:yl(tf(s.iat)),expirationTime:yl(tf(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function tf(t){return Number(t)*1e3}function zm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Cc("JWT malformed, contained fewer than 3 sections"),null;try{const s=dE(n);return s?JSON.parse(s):(Cc("Failed to decode base64 JWT payload"),null)}catch(s){return Cc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function wv(t){const e=zm(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ti&&C1(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function C1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yl(this.lastLoginAt),this.creationTime=yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dh(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Hl(t,hh(n,{idToken:i}));de(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?kE(o.providerUserInfo):[],h=x1(t.providerData,l),d=t.isAnonymous,m=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),v=d?m:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new up(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,y)}async function R1(t){const e=$t(t);await dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function x1(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function kE(t){return t.map(e=>{var{providerId:n}=e,i=Mm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(t,e){const n=await AE(t,{},async()=>{const i=iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await CE(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return t.emulatorConfig&&Ns(t.emulatorConfig.host)&&(d.credentials="include"),SE.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function O1(t,e){return Qr(t,"POST","/v2/accounts:revokeToken",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=wv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await L1(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new Mo;return i&&(de(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(de(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(de(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qn{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,o=Mm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new k1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new up(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Hl(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return A1(this,e)}reload(){return R1(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await dh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Or(this.auth));const e=await this.getIdToken();return await Hl(this,S1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,o,l,h,d,m,v;const y=(i=n.displayName)!==null&&i!==void 0?i:void 0,w=(s=n.email)!==null&&s!==void 0?s:void 0,C=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,M=(l=n.photoURL)!==null&&l!==void 0?l:void 0,V=(h=n.tenantId)!==null&&h!==void 0?h:void 0,H=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,k=(m=n.createdAt)!==null&&m!==void 0?m:void 0,P=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:N,emailVerified:U,isAnonymous:Y,providerData:K,stsTokenManager:A}=n;de(N&&A,e,"internal-error");const I=Mo.fromJSON(this.name,A);de(typeof N=="string",e,"internal-error"),ur(y,e.name),ur(w,e.name),de(typeof U=="boolean",e,"internal-error"),de(typeof Y=="boolean",e,"internal-error"),ur(C,e.name),ur(M,e.name),ur(V,e.name),ur(H,e.name),ur(k,e.name),ur(P,e.name);const S=new Qn({uid:N,auth:e,email:w,emailVerified:U,displayName:y,isAnonymous:Y,photoURL:M,phoneNumber:C,tenantId:V,stsTokenManager:I,createdAt:k,lastLoginAt:P});return K&&Array.isArray(K)&&(S.providerData=K.map(R=>Object.assign({},R))),H&&(S._redirectEventId=H),S}static async _fromIdTokenResponse(e,n,i=!1){const s=new Mo;s.updateFromServerResponse(n);const o=new Qn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await dh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];de(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?kE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new Mo;h.updateFromIdToken(i);const d=new Qn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new up(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=new Map;function Bi(t){Zi(t instanceof Function,"Expected a class definition");let e=Ev.get(t);return e?(Zi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ev.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}RE.type="NONE";const Tv=RE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t,e,n){return`firebase:${t}:${e}:${n}`}class Vo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=kc(this.userKey,s.apiKey,o),this.fullPersistenceKey=kc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await hh(this.auth,{idToken:e}).catch(()=>{});return n?Qn._fromGetAccountInfoResponse(this.auth,n,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Vo(Bi(Tv),e,i);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||Bi(Tv);const l=kc(i,e.config.apiKey,e.name);let h=null;for(const m of n)try{const v=await m._get(l);if(v){let y;if(typeof v=="string"){const w=await hh(e,{idToken:v}).catch(()=>{});if(!w)break;y=await Qn._fromGetAccountInfoResponse(e,w,v)}else y=Qn._fromJSON(e,v);m!==o&&(h=y),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Vo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new Vo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DE(e))return"Blackberry";if(ME(e))return"Webos";if(LE(e))return"Safari";if((e.includes("chrome/")||OE(e))&&!e.includes("edge/"))return"Chrome";if(bE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function xE(t=qt()){return/firefox\//i.test(t)}function LE(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OE(t=qt()){return/crios\//i.test(t)}function NE(t=qt()){return/iemobile/i.test(t)}function bE(t=qt()){return/android/i.test(t)}function DE(t=qt()){return/blackberry/i.test(t)}function ME(t=qt()){return/webos/i.test(t)}function Um(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function N1(t=qt()){var e;return Um(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function b1(){return $A()&&document.documentMode===10}function VE(t=qt()){return Um(t)||bE(t)||ME(t)||DE(t)||/windows phone/i.test(t)||NE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t,e=[]){let n;switch(t){case"Browser":n=Iv(qt());break;case"Worker":n=`${Iv(qt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(t,e={}){return Qr(t,"GET","/v2/passwordPolicy",Ds(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=6;class F1{constructor(e){var n,i,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:V1,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pv(this),this.idTokenSubscription=new Pv(this),this.beforeStateQueue=new D1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Bi(n)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await Vo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hh(this,{idToken:e}),i=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(xn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Or(this));const n=e?$t(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await M1(this),n=new F1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await O1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Bi(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[Bi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&p1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ra(t){return $t(t)}class Pv{constructor(e){this.auth=e,this.observer=null,this.addObserver=eC(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function U1(t){Kh=t}function zE(t){return Kh.loadJS(t)}function B1(){return Kh.recaptchaEnterpriseScript}function j1(){return Kh.gapiScript}function H1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class W1{constructor(){this.enterprise=new q1}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class q1{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const $1="recaptcha-enterprise",UE="NO_RECAPTCHA";class G1{constructor(e){this.type=$1,this.auth=ra(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{P1(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new I1(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,l(m.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;yv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(m=>{l(m)}).catch(()=>{l(UE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new W1().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&yv(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=B1();d.length!==0&&(d+=h),zE(d).then(()=>{s(h,o,l)}).catch(m=>{l(m)})}}).catch(h=>{l(h)})})}}async function Sv(t,e,n,i=!1,s=!1){const o=new G1(t);let l;if(s)l=UE;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Av(t,e,n,i,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Sv(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Sv(t,e,n,n==="getOobCode");return i(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t,e){const n=Gh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Cs(o,e??{}))return s;ti(s,"already-initialized")}return n.initialize({options:e})}function K1(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Bi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Q1(t,e,n){const i=ra(t);de(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=BE(e),{host:l,port:h}=Y1(e),d=h===null?"":`:${h}`,m={url:`${o}//${l}${d}/`},v=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){de(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),de(Cs(m,i.config.emulator)&&Cs(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Ns(l)?(xm(`${o}//${l}${d}`),Lm("Auth",!0)):X1()}function BE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Y1(t){const e=BE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Cv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Cv(l)}}}function Cv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function X1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,n){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}async function J1(t,e){return Qr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(t,e){return Zh(t,"POST","/v1/accounts:signInWithPassword",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(t,e){return Zh(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}async function nk(t,e){return Zh(t,"POST","/v1/accounts:signInWithEmailLink",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends Bm{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Wl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Wl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Av(e,n,"signInWithPassword",ek);case"emailLink":return tk(e,{email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Av(e,i,"signUpPassword",J1);case"emailLink":return nk(e,{idToken:n,email:this._email,oobCode:this._password});default:ti(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(t,e){return Zh(t,"POST","/v1/accounts:signInWithIdp",Ds(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="http://localhost";class Rs extends Bm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Rs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,o=Mm(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new Rs(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Fo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Fo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fo(e,n)}buildRequest(){const e={requestUri:ik,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=iu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sk(t){const e=nl(il(t)).link,n=e?nl(il(e)).deep_link_id:null,i=nl(il(t)).deep_link_id;return(i?nl(il(i)).link:null)||i||n||e||t}class jm{constructor(e){var n,i,s,o,l,h;const d=nl(il(e)),m=(n=d.apiKey)!==null&&n!==void 0?n:null,v=(i=d.oobCode)!==null&&i!==void 0?i:null,y=rk((s=d.mode)!==null&&s!==void 0?s:null);de(m&&v&&y,"argument-error"),this.apiKey=m,this.operation=y,this.code=v,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=sk(e);try{return new jm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.providerId=sa.PROVIDER_ID}static credential(e,n){return Wl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=jm.parseLink(n);return de(i,"argument-error"),Wl._fromEmailAndCode(e,i.code,i.tenantId)}}sa.PROVIDER_ID="password";sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends jE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends su{constructor(){super("facebook.com")}static credential(e){return Rs._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Rs._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return mr.credential(n,i)}catch{return null}}}mr.GOOGLE_SIGN_IN_METHOD="google.com";mr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends su{constructor(){super("github.com")}static credential(e){return Rs._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.GITHUB_SIGN_IN_METHOD="github.com";gr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends su{constructor(){super("twitter.com")}static credential(e,n){return Rs._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return _r.credential(n,i)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Qn._fromIdTokenResponse(e,i,s),l=kv(i);return new Zo({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=kv(i);return new Zo({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function kv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh extends Ti{constructor(e,n,i,s){var o;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new fh(e,n,i,s)}}function HE(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?fh._fromErrorAndOperation(t,o,e,i):o})}async function ok(t,e,n=!1){const i=await Hl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(t,e,n=!1){const{auth:i}=t;if(xn(i.app))return Promise.reject(Or(i));const s="reauthenticate";try{const o=await Hl(t,HE(i,s,e,t),n);de(o.idToken,i,"internal-error");const l=zm(o.idToken);de(l,i,"internal-error");const{sub:h}=l;return de(t.uid===h,i,"user-mismatch"),Zo._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ti(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WE(t,e,n=!1){if(xn(t.app))return Promise.reject(Or(t));const i="signIn",s=await HE(t,i,e),o=await Zo._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function lk(t,e){return WE(ra(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uk(t){const e=ra(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function ck(t,e,n){return xn(t.app)?Promise.reject(Or(t)):lk($t(t),sa.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&uk(t),i})}function hk(t,e,n,i){return $t(t).onIdTokenChanged(e,n,i)}function dk(t,e,n){return $t(t).beforeAuthStateChanged(e,n)}function fk(t,e,n,i){return $t(t).onAuthStateChanged(e,n,i)}function pk(t){return $t(t).signOut()}const ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ph,"1"),this.storage.removeItem(ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=1e3,gk=10;class $E extends qE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);b1()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,gk):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},mk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$E.type="LOCAL";const _k=$E;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE extends qE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GE.type="SESSION";const ZE=GE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Qh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async m=>m(n.origin,o)),d=await vk(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const m=Hm("",20);s.port1.start();const v=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(y){const w=y;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(w.data.response);break;default:clearTimeout(v),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(){return window}function wk(t){gi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function Ek(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Tk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Ik(){return KE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="firebaseLocalStorageDb",Pk=1,mh="firebaseLocalStorage",YE="fbase_key";class ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yh(t,e){return t.transaction([mh],e?"readwrite":"readonly").objectStore(mh)}function Sk(){const t=indexedDB.deleteDatabase(QE);return new ou(t).toPromise()}function cp(){const t=indexedDB.open(QE,Pk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(mh,{keyPath:YE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(mh)?e(i):(i.close(),await Sk(),e(await cp()))})})}async function Rv(t,e,n){const i=Yh(t,!0).put({[YE]:e,value:n});return new ou(i).toPromise()}async function Ak(t,e){const n=Yh(t,!1).get(e),i=await new ou(n).toPromise();return i===void 0?null:i.value}function xv(t,e){const n=Yh(t,!0).delete(e);return new ou(n).toPromise()}const Ck=800,kk=3;class XE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>kk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qh._getInstance(Ik()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Ek(),!this.activeServiceWorker)return;this.sender=new yk(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Tk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await Rv(e,ph,"1"),await xv(e,ph),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Rv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Ak(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Yh(s,!1).getAll();return new ou(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ck)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XE.type="LOCAL";const Rk=XE;new ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t,e){return e?Bi(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm extends Bm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Lk(t){return WE(t.auth,new Wm(t),t.bypassAuthState)}function Ok(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),ak(n,new Wm(t),t.bypassAuthState)}async function Nk(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),ok(n,new Wm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Lk;case"linkViaPopup":case"linkViaRedirect":return Nk;case"reauthViaPopup":case"reauthViaRedirect":return Ok;default:ti(this.auth,"internal-error")}}resolve(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new ru(2e3,1e4);class Ro extends JE{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Zi(this.filter.length===1,"Popup operations only handle one event");const e=Hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bk.get())};e()}}Ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="pendingRedirect",Rc=new Map;class Mk extends JE{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Rc.get(this.auth._key());if(!e){try{const i=await Vk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Rc.set(this.auth._key(),e)}return this.bypassAuthState||Rc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vk(t,e){const n=Uk(e),i=zk(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function Fk(t,e){Rc.set(t._key(),e)}function zk(t){return Bi(t._redirectPersistence)}function Uk(t){return kc(Dk,t.config.apiKey,t.name)}async function Bk(t,e,n=!1){if(xn(t.app))return Promise.reject(Or(t));const i=ra(t),s=xk(i,e),l=await new Mk(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=10*60*1e3;class Hk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Wk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!eT(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(mi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lv(e))}saveEventToCache(e){this.cachedEventUids.add(Lv(e)),this.lastProcessedEventTime=Date.now()}}function Lv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function eT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Wk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(t,e={}){return Qr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gk=/^https?/;async function Zk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qk(t);for(const n of e)try{if(Kk(n))return}catch{}ti(t,"unauthorized-domain")}function Kk(t){const e=lp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!Gk.test(n))return!1;if($k.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=new ru(3e4,6e4);function Ov(){const t=gi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Yk(t){return new Promise((e,n)=>{var i,s,o;function l(){Ov(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ov(),n(mi(t,"network-request-failed"))},timeout:Qk.get()})}if(!((s=(i=gi().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=gi().gapi)===null||o===void 0)&&o.load)l();else{const h=H1("iframefcb");return gi()[h]=()=>{gapi.load?l():n(mi(t,"network-request-failed"))},zE(`${j1()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw xc=null,e})}let xc=null;function Xk(t){return xc=xc||Yk(t),xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=new ru(5e3,15e3),eR="__/auth/iframe",tR="emulator/auth/iframe",nR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rR(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Fm(e,tR):`https://${t.config.authDomain}/${eR}`,i={apiKey:e.apiKey,appName:t.name,v:bs},s=iR.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${iu(i).slice(1)}`}async function sR(t){const e=await Xk(t),n=gi().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:rR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nR,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=mi(t,"network-request-failed"),h=gi().setTimeout(()=>{o(l)},Jk.get());function d(){gi().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aR=500,lR=600,uR="_blank",cR="http://localhost";class Nv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hR(t,e,n,i=aR,s=lR){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},oR),{width:i.toString(),height:s.toString(),top:o,left:l}),m=qt().toLowerCase();n&&(h=OE(m)?uR:n),xE(m)&&(e=e||cR,d.scrollbars="yes");const v=Object.entries(d).reduce((w,[C,M])=>`${w}${C}=${M},`,"");if(N1(m)&&h!=="_self")return dR(e||"",h),new Nv(null);const y=window.open(e||"",h,v);de(y,t,"popup-blocked");try{y.focus()}catch{}return new Nv(y)}function dR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="__/auth/handler",pR="emulator/auth/handler",mR=encodeURIComponent("fac");async function bv(t,e,n,i,s,o){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:bs,eventId:s};if(e instanceof jE){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",JA(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,y]of Object.entries({}))l[v]=y}if(e instanceof su){const v=e.getScopes().filter(y=>y!=="");v.length>0&&(l.scopes=v.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const d=await t._getAppCheckToken(),m=d?`#${mR}=${encodeURIComponent(d)}`:"";return`${gR(t)}?${iu(h).slice(1)}${m}`}function gR({config:t}){return t.emulator?Fm(t,pR):`https://${t.authDomain}/${fR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="webStorageSupport";class _R{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZE,this._completeRedirectFn=Bk,this._overrideRedirectResult=Fk}async _openPopup(e,n,i,s){var o;Zi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await bv(e,n,i,lp(),s);return hR(e,l,Hm())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await bv(e,n,i,lp(),s);return wk(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Zi(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await sR(e),i=new Hk(e);return n.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nf,{type:nf},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[nf];l!==void 0&&n(!!l),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Zk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VE()||LE()||Um()}}const vR=_R;var Dv="@firebase/auth",Mv="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ER(t){ks(new zr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;de(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FE(t)},m=new z1(i,s,o,d);return K1(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ks(new zr("auth-internal",e=>{const n=ra(e.getProvider("auth").getImmediate());return(i=>new yR(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(Dv,Mv,wR(t)),pi(Dv,Mv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=5*60,IR=gE("authIdTokenMaxAge")||TR;let Vv=null;const PR=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>IR)return;const s=n==null?void 0:n.token;Vv!==s&&(Vv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function tT(t=Dm()){const e=Gh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Z1(t,{popupRedirectResolver:vR,persistence:[Rk,_k,ZE]}),i=gE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=PR(o.toString());dk(n,l,()=>l(n.currentUser)),hk(n,h=>l(h))}}const s=fE("auth");return s&&Q1(n,`http://${s}`),n}function SR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}U1({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=mi("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",SR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ER("Browser");var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nr,nT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,I){function S(){}S.prototype=I.prototype,A.D=I.prototype,A.prototype=new S,A.prototype.constructor=A,A.C=function(R,b,D){for(var O=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)O[Me-2]=arguments[Me];return I.prototype[b].apply(R,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,I,S){S||(S=0);var R=Array(16);if(typeof I=="string")for(var b=0;16>b;++b)R[b]=I.charCodeAt(S++)|I.charCodeAt(S++)<<8|I.charCodeAt(S++)<<16|I.charCodeAt(S++)<<24;else for(b=0;16>b;++b)R[b]=I[S++]|I[S++]<<8|I[S++]<<16|I[S++]<<24;I=A.g[0],S=A.g[1],b=A.g[2];var D=A.g[3],O=I+(D^S&(b^D))+R[0]+3614090360&4294967295;I=S+(O<<7&4294967295|O>>>25),O=D+(b^I&(S^b))+R[1]+3905402710&4294967295,D=I+(O<<12&4294967295|O>>>20),O=b+(S^D&(I^S))+R[2]+606105819&4294967295,b=D+(O<<17&4294967295|O>>>15),O=S+(I^b&(D^I))+R[3]+3250441966&4294967295,S=b+(O<<22&4294967295|O>>>10),O=I+(D^S&(b^D))+R[4]+4118548399&4294967295,I=S+(O<<7&4294967295|O>>>25),O=D+(b^I&(S^b))+R[5]+1200080426&4294967295,D=I+(O<<12&4294967295|O>>>20),O=b+(S^D&(I^S))+R[6]+2821735955&4294967295,b=D+(O<<17&4294967295|O>>>15),O=S+(I^b&(D^I))+R[7]+4249261313&4294967295,S=b+(O<<22&4294967295|O>>>10),O=I+(D^S&(b^D))+R[8]+1770035416&4294967295,I=S+(O<<7&4294967295|O>>>25),O=D+(b^I&(S^b))+R[9]+2336552879&4294967295,D=I+(O<<12&4294967295|O>>>20),O=b+(S^D&(I^S))+R[10]+4294925233&4294967295,b=D+(O<<17&4294967295|O>>>15),O=S+(I^b&(D^I))+R[11]+2304563134&4294967295,S=b+(O<<22&4294967295|O>>>10),O=I+(D^S&(b^D))+R[12]+1804603682&4294967295,I=S+(O<<7&4294967295|O>>>25),O=D+(b^I&(S^b))+R[13]+4254626195&4294967295,D=I+(O<<12&4294967295|O>>>20),O=b+(S^D&(I^S))+R[14]+2792965006&4294967295,b=D+(O<<17&4294967295|O>>>15),O=S+(I^b&(D^I))+R[15]+1236535329&4294967295,S=b+(O<<22&4294967295|O>>>10),O=I+(b^D&(S^b))+R[1]+4129170786&4294967295,I=S+(O<<5&4294967295|O>>>27),O=D+(S^b&(I^S))+R[6]+3225465664&4294967295,D=I+(O<<9&4294967295|O>>>23),O=b+(I^S&(D^I))+R[11]+643717713&4294967295,b=D+(O<<14&4294967295|O>>>18),O=S+(D^I&(b^D))+R[0]+3921069994&4294967295,S=b+(O<<20&4294967295|O>>>12),O=I+(b^D&(S^b))+R[5]+3593408605&4294967295,I=S+(O<<5&4294967295|O>>>27),O=D+(S^b&(I^S))+R[10]+38016083&4294967295,D=I+(O<<9&4294967295|O>>>23),O=b+(I^S&(D^I))+R[15]+3634488961&4294967295,b=D+(O<<14&4294967295|O>>>18),O=S+(D^I&(b^D))+R[4]+3889429448&4294967295,S=b+(O<<20&4294967295|O>>>12),O=I+(b^D&(S^b))+R[9]+568446438&4294967295,I=S+(O<<5&4294967295|O>>>27),O=D+(S^b&(I^S))+R[14]+3275163606&4294967295,D=I+(O<<9&4294967295|O>>>23),O=b+(I^S&(D^I))+R[3]+4107603335&4294967295,b=D+(O<<14&4294967295|O>>>18),O=S+(D^I&(b^D))+R[8]+1163531501&4294967295,S=b+(O<<20&4294967295|O>>>12),O=I+(b^D&(S^b))+R[13]+2850285829&4294967295,I=S+(O<<5&4294967295|O>>>27),O=D+(S^b&(I^S))+R[2]+4243563512&4294967295,D=I+(O<<9&4294967295|O>>>23),O=b+(I^S&(D^I))+R[7]+1735328473&4294967295,b=D+(O<<14&4294967295|O>>>18),O=S+(D^I&(b^D))+R[12]+2368359562&4294967295,S=b+(O<<20&4294967295|O>>>12),O=I+(S^b^D)+R[5]+4294588738&4294967295,I=S+(O<<4&4294967295|O>>>28),O=D+(I^S^b)+R[8]+2272392833&4294967295,D=I+(O<<11&4294967295|O>>>21),O=b+(D^I^S)+R[11]+1839030562&4294967295,b=D+(O<<16&4294967295|O>>>16),O=S+(b^D^I)+R[14]+4259657740&4294967295,S=b+(O<<23&4294967295|O>>>9),O=I+(S^b^D)+R[1]+2763975236&4294967295,I=S+(O<<4&4294967295|O>>>28),O=D+(I^S^b)+R[4]+1272893353&4294967295,D=I+(O<<11&4294967295|O>>>21),O=b+(D^I^S)+R[7]+4139469664&4294967295,b=D+(O<<16&4294967295|O>>>16),O=S+(b^D^I)+R[10]+3200236656&4294967295,S=b+(O<<23&4294967295|O>>>9),O=I+(S^b^D)+R[13]+681279174&4294967295,I=S+(O<<4&4294967295|O>>>28),O=D+(I^S^b)+R[0]+3936430074&4294967295,D=I+(O<<11&4294967295|O>>>21),O=b+(D^I^S)+R[3]+3572445317&4294967295,b=D+(O<<16&4294967295|O>>>16),O=S+(b^D^I)+R[6]+76029189&4294967295,S=b+(O<<23&4294967295|O>>>9),O=I+(S^b^D)+R[9]+3654602809&4294967295,I=S+(O<<4&4294967295|O>>>28),O=D+(I^S^b)+R[12]+3873151461&4294967295,D=I+(O<<11&4294967295|O>>>21),O=b+(D^I^S)+R[15]+530742520&4294967295,b=D+(O<<16&4294967295|O>>>16),O=S+(b^D^I)+R[2]+3299628645&4294967295,S=b+(O<<23&4294967295|O>>>9),O=I+(b^(S|~D))+R[0]+4096336452&4294967295,I=S+(O<<6&4294967295|O>>>26),O=D+(S^(I|~b))+R[7]+1126891415&4294967295,D=I+(O<<10&4294967295|O>>>22),O=b+(I^(D|~S))+R[14]+2878612391&4294967295,b=D+(O<<15&4294967295|O>>>17),O=S+(D^(b|~I))+R[5]+4237533241&4294967295,S=b+(O<<21&4294967295|O>>>11),O=I+(b^(S|~D))+R[12]+1700485571&4294967295,I=S+(O<<6&4294967295|O>>>26),O=D+(S^(I|~b))+R[3]+2399980690&4294967295,D=I+(O<<10&4294967295|O>>>22),O=b+(I^(D|~S))+R[10]+4293915773&4294967295,b=D+(O<<15&4294967295|O>>>17),O=S+(D^(b|~I))+R[1]+2240044497&4294967295,S=b+(O<<21&4294967295|O>>>11),O=I+(b^(S|~D))+R[8]+1873313359&4294967295,I=S+(O<<6&4294967295|O>>>26),O=D+(S^(I|~b))+R[15]+4264355552&4294967295,D=I+(O<<10&4294967295|O>>>22),O=b+(I^(D|~S))+R[6]+2734768916&4294967295,b=D+(O<<15&4294967295|O>>>17),O=S+(D^(b|~I))+R[13]+1309151649&4294967295,S=b+(O<<21&4294967295|O>>>11),O=I+(b^(S|~D))+R[4]+4149444226&4294967295,I=S+(O<<6&4294967295|O>>>26),O=D+(S^(I|~b))+R[11]+3174756917&4294967295,D=I+(O<<10&4294967295|O>>>22),O=b+(I^(D|~S))+R[2]+718787259&4294967295,b=D+(O<<15&4294967295|O>>>17),O=S+(D^(b|~I))+R[9]+3951481745&4294967295,A.g[0]=A.g[0]+I&4294967295,A.g[1]=A.g[1]+(b+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+b&4294967295,A.g[3]=A.g[3]+D&4294967295}i.prototype.u=function(A,I){I===void 0&&(I=A.length);for(var S=I-this.blockSize,R=this.B,b=this.h,D=0;D<I;){if(b==0)for(;D<=S;)s(this,A,D),D+=this.blockSize;if(typeof A=="string"){for(;D<I;)if(R[b++]=A.charCodeAt(D++),b==this.blockSize){s(this,R),b=0;break}}else for(;D<I;)if(R[b++]=A[D++],b==this.blockSize){s(this,R),b=0;break}}this.h=b,this.o+=I},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var I=1;I<A.length-8;++I)A[I]=0;var S=8*this.o;for(I=A.length-8;I<A.length;++I)A[I]=S&255,S/=256;for(this.u(A),A=Array(16),I=S=0;4>I;++I)for(var R=0;32>R;R+=8)A[S++]=this.g[I]>>>R&255;return A};function o(A,I){var S=h;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=I(A)}function l(A,I){this.h=I;for(var S=[],R=!0,b=A.length-1;0<=b;b--){var D=A[b]|0;R&&D==I||(S[b]=D,R=!1)}this.g=S}var h={};function d(A){return-128<=A&&128>A?o(A,function(I){return new l([I|0],0>I?-1:0)}):new l([A|0],0>A?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return y;if(0>A)return H(m(-A));for(var I=[],S=1,R=0;A>=S;R++)I[R]=A/S|0,S*=4294967296;return new l(I,0)}function v(A,I){if(A.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A.charAt(0)=="-")return H(v(A.substring(1),I));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=m(Math.pow(I,8)),R=y,b=0;b<A.length;b+=8){var D=Math.min(8,A.length-b),O=parseInt(A.substring(b,b+D),I);8>D?(D=m(Math.pow(I,D)),R=R.j(D).add(m(O))):(R=R.j(S),R=R.add(m(O)))}return R}var y=d(0),w=d(1),C=d(16777216);t=l.prototype,t.m=function(){if(V(this))return-H(this).m();for(var A=0,I=1,S=0;S<this.g.length;S++){var R=this.i(S);A+=(0<=R?R:4294967296+R)*I,I*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(M(this))return"0";if(V(this))return"-"+H(this).toString(A);for(var I=m(Math.pow(A,6)),S=this,R="";;){var b=U(S,I).g;S=k(S,b.j(I));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(A);if(S=b,M(S))return D+R;for(;6>D.length;)D="0"+D;R=D+R}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function M(A){if(A.h!=0)return!1;for(var I=0;I<A.g.length;I++)if(A.g[I]!=0)return!1;return!0}function V(A){return A.h==-1}t.l=function(A){return A=k(this,A),V(A)?-1:M(A)?0:1};function H(A){for(var I=A.g.length,S=[],R=0;R<I;R++)S[R]=~A.g[R];return new l(S,~A.h).add(w)}t.abs=function(){return V(this)?H(this):this},t.add=function(A){for(var I=Math.max(this.g.length,A.g.length),S=[],R=0,b=0;b<=I;b++){var D=R+(this.i(b)&65535)+(A.i(b)&65535),O=(D>>>16)+(this.i(b)>>>16)+(A.i(b)>>>16);R=O>>>16,D&=65535,O&=65535,S[b]=O<<16|D}return new l(S,S[S.length-1]&-2147483648?-1:0)};function k(A,I){return A.add(H(I))}t.j=function(A){if(M(this)||M(A))return y;if(V(this))return V(A)?H(this).j(H(A)):H(H(this).j(A));if(V(A))return H(this.j(H(A)));if(0>this.l(C)&&0>A.l(C))return m(this.m()*A.m());for(var I=this.g.length+A.g.length,S=[],R=0;R<2*I;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var b=0;b<A.g.length;b++){var D=this.i(R)>>>16,O=this.i(R)&65535,Me=A.i(b)>>>16,Mn=A.i(b)&65535;S[2*R+2*b]+=O*Mn,P(S,2*R+2*b),S[2*R+2*b+1]+=D*Mn,P(S,2*R+2*b+1),S[2*R+2*b+1]+=O*Me,P(S,2*R+2*b+1),S[2*R+2*b+2]+=D*Me,P(S,2*R+2*b+2)}for(R=0;R<I;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=I;R<2*I;R++)S[R]=0;return new l(S,0)};function P(A,I){for(;(A[I]&65535)!=A[I];)A[I+1]+=A[I]>>>16,A[I]&=65535,I++}function N(A,I){this.g=A,this.h=I}function U(A,I){if(M(I))throw Error("division by zero");if(M(A))return new N(y,y);if(V(A))return I=U(H(A),I),new N(H(I.g),H(I.h));if(V(I))return I=U(A,H(I)),new N(H(I.g),I.h);if(30<A.g.length){if(V(A)||V(I))throw Error("slowDivide_ only works with positive integers.");for(var S=w,R=I;0>=R.l(A);)S=Y(S),R=Y(R);var b=K(S,1),D=K(R,1);for(R=K(R,2),S=K(S,2);!M(R);){var O=D.add(R);0>=O.l(A)&&(b=b.add(S),D=O),R=K(R,1),S=K(S,1)}return I=k(A,b.j(I)),new N(b,I)}for(b=y;0<=A.l(I);){for(S=Math.max(1,Math.floor(A.m()/I.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),D=m(S),O=D.j(I);V(O)||0<O.l(A);)S-=R,D=m(S),O=D.j(I);M(D)&&(D=w),b=b.add(D),A=k(A,O)}return new N(b,A)}t.A=function(A){return U(this,A).h},t.and=function(A){for(var I=Math.max(this.g.length,A.g.length),S=[],R=0;R<I;R++)S[R]=this.i(R)&A.i(R);return new l(S,this.h&A.h)},t.or=function(A){for(var I=Math.max(this.g.length,A.g.length),S=[],R=0;R<I;R++)S[R]=this.i(R)|A.i(R);return new l(S,this.h|A.h)},t.xor=function(A){for(var I=Math.max(this.g.length,A.g.length),S=[],R=0;R<I;R++)S[R]=this.i(R)^A.i(R);return new l(S,this.h^A.h)};function Y(A){for(var I=A.g.length+1,S=[],R=0;R<I;R++)S[R]=A.i(R)<<1|A.i(R-1)>>>31;return new l(S,A.h)}function K(A,I){var S=I>>5;I%=32;for(var R=A.g.length-S,b=[],D=0;D<R;D++)b[D]=0<I?A.i(D+S)>>>I|A.i(D+S+1)<<32-I:A.i(D+S);return new l(b,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,nT=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=v,Nr=l}).apply(typeof Fv<"u"?Fv:typeof self<"u"?self:typeof window<"u"?window:{});var uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iT,rl,rT,Lc,hp,sT,oT,aT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof uc=="object"&&uc];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function s(u,p){if(p)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],p=p(T),p!=T&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function o(u,p){u instanceof String&&(u+="");var _=0,T=!1,F={next:function(){if(!T&&_<u.length){var j=_++;return{value:p(j,u[j]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(u){return u||function(){return o(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function v(u,p,_){return u.call.apply(u.bind,arguments)}function y(u,p,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function w(u,p,_){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:y,w.apply(null,arguments)}function C(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function M(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,F,j){for(var J=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)J[Ve-2]=arguments[Ve];return p.prototype[F].apply(T,J)}}function V(u){const p=u.length;if(0<p){const _=Array(p);for(let T=0;T<p;T++)_[T]=u[T];return _}return[]}function H(u,p){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(d(T)){const F=u.length||0,j=T.length||0;u.length=F+j;for(let J=0;J<j;J++)u[F+J]=T[J]}else u.push(T)}}class k{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function P(u){return/^[\s\xa0]*$/.test(u)}function N(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function U(u){return U[" "](u),u}U[" "]=function(){};var Y=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function K(u,p,_){for(const T in u)p.call(_,u[T],T,u)}function A(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function I(u){const p={};for(const _ in u)p[_]=u[_];return p}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(u,p){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let j=0;j<S.length;j++)_=S[j],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function b(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function D(u){h.setTimeout(()=>{throw u},0)}function O(){var u=le;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Me{constructor(){this.h=this.g=null}add(p,_){const T=Mn.get();T.set(p,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Mn=new k(()=>new Ge,u=>u.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Pt,W=!1,le=new Me,X=()=>{const u=h.Promise.resolve(void 0);Pt=()=>{u.then(ue)}};var ue=()=>{for(var u;u=O();){try{u.h.call(u.g)}catch(_){D(_)}var p=Mn;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}W=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,p),h.removeEventListener("test",_,p)}catch{}return u}();function ye(u,p){if(we.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Y){e:{try{U(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:fe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ye.aa.h.call(this)}}M(ye,we);var fe={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var rt="closure_listenable_"+(1e6*Math.random()|0),cn=0;function re(u,p,_,T,F){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!T,this.ha=F,this.key=++cn,this.da=this.fa=!1}function Se(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ze(u){this.src=u,this.g={},this.h=0}ze.prototype.add=function(u,p,_,T,F){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var J=Re(u,p,T,F);return-1<J?(p=u[J],_||(p.fa=!1)):(p=new re(p,this.src,j,!!T,F),p.fa=_,u.push(p)),p};function ke(u,p){var _=p.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,p,void 0),j;(j=0<=F)&&Array.prototype.splice.call(T,F,1),j&&(Se(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Re(u,p,_,T){for(var F=0;F<u.length;++F){var j=u[F];if(!j.da&&j.listener==p&&j.capture==!!_&&j.ha==T)return F}return-1}var dt="closure_lm_"+(1e6*Math.random()|0),at={};function Jt(u,p,_,T,F){if(Array.isArray(p)){for(var j=0;j<p.length;j++)Jt(u,p[j],_,T,F);return null}return _=du(_),u&&u[rt]?u.K(p,_,m(T)?!!T.capture:!1,F):Vn(u,p,_,!1,T,F)}function Vn(u,p,_,T,F,j){if(!p)throw Error("Invalid event type");var J=m(F)?!!F.capture:!!F,Ve=Fs(u);if(Ve||(u[dt]=Ve=new ze(u)),_=Ve.add(p,_,T,J,j),_.proxy)return _;if(T=Fn(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)De||(F=J),F===void 0&&(F=!1),u.addEventListener(p.toString(),T,F);else if(u.attachEvent)u.attachEvent(Xi(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Fn(){function u(_){return p.call(u.src,u.listener,_)}const p=Vs;return u}function zn(u,p,_,T,F){if(Array.isArray(p))for(var j=0;j<p.length;j++)zn(u,p[j],_,T,F);else T=m(T)?!!T.capture:!!T,_=du(_),u&&u[rt]?(u=u.i,p=String(p).toString(),p in u.g&&(j=u.g[p],_=Re(j,_,T,F),-1<_&&(Se(j[_]),Array.prototype.splice.call(j,_,1),j.length==0&&(delete u.g[p],u.h--)))):u&&(u=Fs(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Re(p,_,T,F)),(_=-1<u?p[u]:null)&&Un(_))}function Un(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[rt])ke(p.i,u);else{var _=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(_,T,u.capture):p.detachEvent?p.detachEvent(Xi(_),T):p.addListener&&p.removeListener&&p.removeListener(T),(_=Fs(p))?(ke(_,u),_.h==0&&(_.src=null,p[dt]=null)):Se(u)}}}function Xi(u){return u in at?at[u]:at[u]="on"+u}function Vs(u,p){if(u.da)u=!0;else{p=new ye(p,this);var _=u.listener,T=u.ha||u.src;u.fa&&Un(u),u=_.call(T,p)}return u}function Fs(u){return u=u[dt],u instanceof ze?u:null}var ha="__closure_events_fn_"+(1e9*Math.random()>>>0);function du(u){return typeof u=="function"?u:(u[ha]||(u[ha]=function(p){return u.handleEvent(p)}),u[ha])}function ft(){me.call(this),this.i=new ze(this),this.M=this,this.F=null}M(ft,me),ft.prototype[rt]=!0,ft.prototype.removeEventListener=function(u,p,_,T){zn(this,u,p,_,T)};function St(u,p){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new we(p,u);else if(p instanceof we)p.target=p.target||u;else{var F=p;p=new we(T,u),R(p,F)}if(F=!0,_)for(var j=_.length-1;0<=j;j--){var J=p.g=_[j];F=Yr(J,T,!0,p)&&F}if(J=p.g=u,F=Yr(J,T,!0,p)&&F,F=Yr(J,T,!1,p)&&F,_)for(j=0;j<_.length;j++)J=p.g=_[j],F=Yr(J,T,!1,p)&&F}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],T=0;T<_.length;T++)Se(_[T]);delete u.g[p],u.h--}}this.F=null},ft.prototype.K=function(u,p,_,T){return this.i.add(String(u),p,!1,_,T)},ft.prototype.L=function(u,p,_,T){return this.i.add(String(u),p,!0,_,T)};function Yr(u,p,_,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,j=0;j<p.length;++j){var J=p[j];if(J&&!J.da&&J.capture==_){var Ve=J.listener,pt=J.ha||J.src;J.fa&&ke(u.i,J),F=Ve.call(pt,T)!==!1&&F}}return F&&!T.defaultPrevented}function fu(u,p,_){if(typeof u=="function")_&&(u=w(u,_));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:h.setTimeout(u,p||0)}function da(u){u.g=fu(()=>{u.g=null,u.i&&(u.i=!1,da(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class pu extends me{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:da(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xr(u){me.call(this),this.h=u,this.g={}}M(Xr,me);var fa=[];function zs(u){K(u.g,function(p,_){this.g.hasOwnProperty(_)&&Un(p)},u),u.g={}}Xr.prototype.N=function(){Xr.aa.N.call(this),zs(this)},Xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Us=h.JSON.stringify,gd=h.JSON.parse,Jr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function pa(){}pa.prototype.h=null;function mu(u){return u.h||(u.h=u.i())}function ma(){}var Ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bs(){we.call(this,"d")}M(Bs,we);function ga(){we.call(this,"c")}M(ga,we);var Pi={},gu=null;function js(){return gu=gu||new ft}Pi.La="serverreachability";function _u(u){we.call(this,Pi.La,u)}M(_u,we);function es(u){const p=js();St(p,new _u(p))}Pi.STAT_EVENT="statevent";function Hs(u,p){we.call(this,Pi.STAT_EVENT,u),this.stat=p}M(Hs,we);function Lt(u){const p=js();St(p,new Hs(p,u))}Pi.Ma="timingevent";function vu(u,p){we.call(this,Pi.Ma,u),this.size=p}M(vu,we);function ts(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function ns(){this.g=!0}ns.prototype.xa=function(){this.g=!1};function wn(u,p,_,T,F,j){u.info(function(){if(u.g)if(j)for(var J="",Ve=j.split("&"),pt=0;pt<Ve.length;pt++){var xe=Ve[pt].split("=");if(1<xe.length){var Be=xe[0];xe=xe[1];var Je=Be.split("_");J=2<=Je.length&&Je[1]=="type"?J+(Be+"="+xe+"&"):J+(Be+"=redacted&")}}else J=null;else J=j;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+p+`
`+_+`
`+J})}function oe(u,p,_,T,F,j,J){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+p+`
`+_+`
`+j+" "+J})}function Si(u,p,_,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+wu(u,_)+(T?" "+T:"")})}function yu(u,p){u.info(function(){return"TIMEOUT: "+p})}ns.prototype.info=function(){};function wu(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var j=F[0];if(j!="noop"&&j!="stop"&&j!="close")for(var J=1;J<F.length;J++)F[J]=""}}}}return Us(_)}catch{return p}}var is={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ws={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qs;function Bn(){}M(Bn,pa),Bn.prototype.g=function(){return new XMLHttpRequest},Bn.prototype.i=function(){return{}},qs=new Bn;function jn(u,p,_,T){this.j=u,this.i=p,this.l=_,this.R=T||1,this.U=new Xr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Eu}function Eu(){this.i=null,this.g="",this.h=!1}var Tu={},_a={};function va(u,p,_){u.L=1,u.v=Tn(st(p)),u.m=_,u.P=!0,ya(u,null)}function ya(u,p){u.F=Date.now(),Gs(u),u.A=st(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Su(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Eu,u.g=Ou(u.j,_?p:null,!u.m),0<u.O&&(u.M=new pu(w(u.Y,u,u.g),u.O)),p=u.U,_=u.g,T=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(fa[0]=F.toString()),F=fa);for(var j=0;j<F.length;j++){var J=Jt(_,F[j],T||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),es(),wn(u.i,u.u,u.A,u.l,u.R,u.m)}jn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Gt(u)==3?p.j():this.Y(u)},jn.prototype.Y=function(u){try{if(u==this.g)e:{const Je=Gt(this.g);var p=this.g.Ba();const or=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||Da(this.g)))){this.J||Je!=4||p==7||(p==8||0>=or?es(3):es(2)),wa(this);var _=this.g.Z();this.X=_;t:if(Iu(this)){var T=Da(this.g);u="";var F=T.length,j=Gt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ai(this),rs(this);var J="";break t}this.h.i=new h.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!(j&&p==F-1)});T.length=0,this.h.g+=u,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=_==200,oe(this.i,this.u,this.A,this.l,this.R,Je,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,pt=this.g;if((Ve=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Ve)){var xe=Ve;break t}}xe=null}if(_=xe)Si(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ss(this,_);else{this.o=!1,this.s=3,Lt(12),Ai(this),rs(this);break e}}if(this.P){_=!0;let lt;for(;!this.J&&this.C<J.length;)if(lt=$s(this,J),lt==_a){Je==4&&(this.s=4,Lt(14),_=!1),Si(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==Tu){this.s=4,Lt(15),Si(this.i,this.l,J,"[Invalid Chunk]"),_=!1;break}else Si(this.i,this.l,lt,null),ss(this,lt);if(Iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||J.length!=0||this.h.h||(this.s=1,Lt(16),_=!1),this.o=this.o&&_,!_)Si(this.i,this.l,J,"[Invalid Chunked Response]"),Ai(this),rs(this);else if(0<J.length&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.ba&&!Be.M&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),no(Be),Be.M=!0,Lt(11))}}else Si(this.i,this.l,J,null),ss(this,J);Je==4&&Ai(this),this.o&&!this.J&&(Je==4?Va(this.j,this):(this.o=!1,Gs(this)))}else _d(this.g),_==400&&0<J.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),Ai(this),rs(this)}}}catch{}finally{}};function Iu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function $s(u,p){var _=u.C,T=p.indexOf(`
`,_);return T==-1?_a:(_=Number(p.substring(_,T)),isNaN(_)?Tu:(T+=1,T+_>p.length?_a:(p=p.slice(T,T+_),u.C=T+_,p)))}jn.prototype.cancel=function(){this.J=!0,Ai(this)};function Gs(u){u.S=Date.now()+u.I,Pu(u,u.I)}function Pu(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ts(w(u.ba,u),p)}function wa(u){u.B&&(h.clearTimeout(u.B),u.B=null)}jn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(yu(this.i,this.A),this.L!=2&&(es(),Lt(17)),Ai(this),this.s=2,rs(this)):Pu(this,this.S-u)};function rs(u){u.j.G==0||u.J||Va(u.j,u)}function Ai(u){wa(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,zs(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function ss(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Ae(_.h,u))){if(!u.K&&Ae(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)ro(_),eo(_);else break e;to(_),Lt(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=ts(w(_.Za,_),6e3));if(1>=er(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Li(_,11)}else if((u.K||_.g==u)&&ro(_),!P(p))for(F=_.Da.g.parse(p),p=0;p<F.length;p++){let xe=F[p];if(_.T=xe[0],xe=xe[1],_.G==2)if(xe[0]=="c"){_.K=xe[1],_.ia=xe[2];const Be=xe[3];Be!=null&&(_.la=Be,_.j.info("VER="+_.la));const Je=xe[4];Je!=null&&(_.Aa=Je,_.j.info("SVER="+_.Aa));const or=xe[5];or!=null&&typeof or=="number"&&0<or&&(T=1.5*or,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const lt=u.g;if(lt){const oo=lt.g?lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var j=T.h;j.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(je(j,j.h),j.h=null))}if(T.D){const si=lt.g?lt.g.getResponseHeader("X-HTTP-Session-Id"):null;si&&(T.ya=si,pe(T.I,T.D,si))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var J=u;if(T.qa=so(T,T.J?T.ia:null,T.W),J.K){as(T.h,J);var Ve=J,pt=T.L;pt&&(Ve.I=pt),Ve.B&&(wa(Ve),Gs(Ve)),T.g=J}else qn(T);0<_.i.length&&sr(_)}else xe[0]!="stop"&&xe[0]!="close"||Li(_,7);else _.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Li(_,7):Js(_):xe[0]!="noop"&&_.l&&_.l.ta(xe),_.v=0)}}es(4)}catch{}}var os=class{constructor(u,p){this.g=u,this.map=p}};function Ea(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ta(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function er(u){return u.h?1:u.g?u.g.size:0}function Ae(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function je(u,p){u.g?u.g.add(p):u.h=p}function as(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Ea.prototype.cancel=function(){if(this.i=Ci(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ci(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return V(u.i)}function tr(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var p=[],_=u.length,T=0;T<_;T++)p.push(u[T]);return p}p=[],_=0;for(T in u)p[_++]=u[T];return p}function Ia(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const T in u)p[_++]=T;return p}}}function ve(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=Ia(u),T=tr(u),F=T.length,j=0;j<F;j++)p.call(void 0,T[j],_&&_[j],u)}var Ze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pa(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),F=null;if(0<=T){var j=u[_].substring(0,T);F=u[_].substring(T+1)}else j=u[_];p(j,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function En(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof En){this.h=u.h,Zs(this,u.j),this.o=u.o,this.g=u.g,ki(this,u.s),this.l=u.l;var p=u.i,_=new Ri;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),ii(this,_),this.m=u.m}else u&&(p=String(u).match(Ze))?(this.h=!1,Zs(this,p[1]||"",!0),this.o=Hn(p[2]||""),this.g=Hn(p[3]||"",!0),ki(this,p[4]),this.l=Hn(p[5]||"",!0),ii(this,p[6]||"",!0),this.m=Hn(p[7]||"")):(this.h=!1,this.i=new Ri(null,this.h))}En.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Wn(p,nr,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Wn(p,nr,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Wn(_,_.charAt(0)=="/"?Ca:Aa,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Wn(_,ka)),u.join("")};function st(u){return new En(u)}function Zs(u,p,_){u.j=_?Hn(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ki(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function ii(u,p,_){p instanceof Ri?(u.i=p,In(u.i,u.h)):(_||(p=Wn(p,Ks)),u.i=new Ri(p,u.h))}function pe(u,p,_){u.i.set(p,_)}function Tn(u){return pe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Hn(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Wn(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Sa),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Sa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var nr=/[#\/\?@]/g,Aa=/[#\?:]/g,Ca=/[#\?]/g,Ks=/[#\?@]/g,ka=/#/g;function Ri(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function hn(u){u.g||(u.g=new Map,u.h=0,u.i&&Pa(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=Ri.prototype,t.add=function(u,p){hn(this),this.i=null,u=ce(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Ra(u,p){hn(u),p=ce(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Qs(u,p){return hn(u),p=ce(u,p),u.g.has(p)}t.forEach=function(u,p){hn(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(p,F,T,this)},this)},this)},t.na=function(){hn(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let T=0;T<p.length;T++){const F=u[T];for(let j=0;j<F.length;j++)_.push(p[T])}return _},t.V=function(u){hn(this);let p=[];if(typeof u=="string")Qs(this,u)&&(p=p.concat(this.g.get(ce(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},t.set=function(u,p){return hn(this),this.i=null,u=ce(this,u),Qs(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Su(u,p,_){Ra(u,p),0<_.length&&(u.i=null,u.g.set(ce(u,p),V(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var T=p[_];const j=encodeURIComponent(String(T)),J=this.V(T);for(T=0;T<J.length;T++){var F=j;J[T]!==""&&(F+="="+encodeURIComponent(String(J[T]))),u.push(F)}}return this.i=u.join("&")};function ce(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function In(u,p){p&&!u.j&&(hn(u),u.i=null,u.g.forEach(function(_,T){var F=T.toLowerCase();T!=F&&(Ra(this,T),Su(this,F,_))},u)),u.j=p}function Ue(u,p){const _=new ns;if(h.Image){const T=new Image;T.onload=C(Pn,_,"TestLoadImage: loaded",!0,p,T),T.onerror=C(Pn,_,"TestLoadImage: error",!1,p,T),T.onabort=C(Pn,_,"TestLoadImage: abort",!1,p,T),T.ontimeout=C(Pn,_,"TestLoadImage: timeout",!1,p,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function Au(u,p){const _=new ns,T=new AbortController,F=setTimeout(()=>{T.abort(),Pn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(j=>{clearTimeout(F),j.ok?Pn(_,"TestPingServer: ok",!0,p):Pn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Pn(_,"TestPingServer: error",!1,p)})}function Pn(u,p,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function xa(){this.g=new Jr}function La(u,p,_){const T=_||"";try{ve(u,function(F,j){let J=F;m(F)&&(J=Us(F)),p.push(T+j+"="+encodeURIComponent(J))})}catch(F){throw p.push(T+"type="+encodeURIComponent("_badmap")),F}}function Sn(u){this.l=u.Ub||null,this.j=u.eb||!1}M(Sn,pa),Sn.prototype.g=function(){return new ir(this.l,this.j)},Sn.prototype.i=function(u){return function(){return u}}({});function ir(u,p){ft.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(ir,ft),t=ir.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,dn(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||h).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xe(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,dn(this)),this.g&&(this.readyState=3,dn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rr(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function rr(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Xe(this):dn(this),this.readyState==3&&rr(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Xe(this))},t.Qa=function(u){this.g&&(this.response=u,Xe(this))},t.ga=function(){this.g&&Xe(this)};function Xe(u){u.readyState=4,u.l=null,u.j=null,u.v=null,dn(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function dn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ir.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Oa(u){let p="";return K(u,function(_,T){p+=T,p+=":",p+=_,p+=`\r
`}),p}function Ys(u,p,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Oa(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):pe(u,p,_))}function Ke(u){ft.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Ke,ft);var Cu=/^https?$/i,Na=["POST","PUT"];t=Ke.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qs.g(),this.v=this.o?mu(this.o):mu(qs),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(j){ku(this,j);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const j of T.keys())_.set(j,T.get(j));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Na,p,void 0))||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,J]of _)this.g.setRequestHeader(j,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){ku(this,j)}};function ku(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,ba(u),Xs(u)}function ba(u){u.A||(u.A=!0,St(u,"complete"),St(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,St(this,"complete"),St(this,"abort"),Xs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xs(this,!0)),Ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ie(this):this.bb())},t.bb=function(){Ie(this)};function Ie(u){if(u.h&&typeof l<"u"&&(!u.v[1]||Gt(u)!=4||u.Z()!=2)){if(u.u&&Gt(u)==4)fu(u.Ea,0,u);else if(St(u,"readystatechange"),Gt(u)==4){u.h=!1;try{const J=u.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var T;if(T=J===0){var F=String(u.D).match(Ze)[1]||null;!F&&h.self&&h.self.location&&(F=h.self.location.protocol.slice(0,-1)),T=!Cu.test(F?F.toLowerCase():"")}_=T}if(_)St(u,"complete"),St(u,"success");else{u.m=6;try{var j=2<Gt(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",ba(u)}}finally{Xs(u)}}}}function Xs(u,p){if(u.g){en(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||St(u,"ready");try{_.onreadystatechange=T}catch{}}}function en(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Gt(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Gt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),gd(p)}};function Da(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function _d(u){const p={};u=(u.g&&2<=Gt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(P(u[T]))continue;var _=b(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=p[F]||[];p[F]=j,j.push(_)}A(p,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Ru(u){this.Aa=0,this.i=[],this.j=new ns,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xi("baseRetryDelayMs",5e3,u),this.cb=xi("retryDelaySeedMs",1e4,u),this.Wa=xi("forwardChannelMaxRetries",2,u),this.wa=xi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ea(u&&u.concurrentRequestLimit),this.Da=new xa,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ru.prototype,t.la=8,t.G=1,t.connect=function(u,p,_,T){Lt(0),this.W=u,this.H=p||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=so(this,null,this.W),sr(this)};function Js(u){if(xu(u),u.G==3){var p=u.U++,_=st(u.I);if(pe(_,"SID",u.K),pe(_,"RID",p),pe(_,"TYPE","terminate"),ls(u,_),p=new jn(u,u.j,p),p.L=2,p.v=Tn(st(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=p.v,_=!0),_||(p.g=Ou(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Gs(p)}Lu(u)}function eo(u){u.g&&(no(u),u.g.cancel(),u.g=null)}function xu(u){eo(u),u.u&&(h.clearTimeout(u.u),u.u=null),ro(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function sr(u){if(!Ta(u.h)&&!u.s){u.s=!0;var p=u.Ga;Pt||X(),W||(Pt(),W=!0),le.add(p,u),u.B=0}}function vd(u,p){return er(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ts(w(u.Ga,u,p),Fa(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new jn(this,this.j,u);let j=this.o;if(this.S&&(j?(j=I(j),R(j,this.S)):j=this.S),this.m!==null||this.O||(F.H=j,j=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Ma(this,F,p),_=st(this.I),pe(_,"RID",u),pe(_,"CVER",22),this.D&&pe(_,"X-HTTP-Session-Id",this.D),ls(this,_),j&&(this.O?p="headers="+encodeURIComponent(String(Oa(j)))+"&"+p:this.m&&Ys(_,this.m,j)),je(this.h,F),this.Ua&&pe(_,"TYPE","init"),this.P?(pe(_,"$req",p),pe(_,"SID","null"),F.T=!0,va(F,_,null)):va(F,_,p),this.G=2}}else this.G==3&&(u?fn(this,u):this.i.length==0||Ta(this.h)||fn(this))};function fn(u,p){var _;p?_=p.l:_=u.U++;const T=st(u.I);pe(T,"SID",u.K),pe(T,"RID",_),pe(T,"AID",u.T),ls(u,T),u.m&&u.o&&Ys(T,u.m,u.o),_=new jn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Ma(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),je(u.h,_),va(_,T,p)}function ls(u,p){u.H&&K(u.H,function(_,T){pe(p,T,_)}),u.l&&ve({},function(_,T){pe(p,T,_)})}function Ma(u,p,_){_=Math.min(u.i.length,_);var T=u.l?w(u.l.Na,u.l,u):null;e:{var F=u.i;let j=-1;for(;;){const J=["count="+_];j==-1?0<_?(j=F[0].g,J.push("ofs="+j)):j=0:J.push("ofs="+j);let Ve=!0;for(let pt=0;pt<_;pt++){let xe=F[pt].g;const Be=F[pt].map;if(xe-=j,0>xe)j=Math.max(0,F[pt].g-100),Ve=!1;else try{La(Be,J,"req"+xe+"_")}catch{T&&T(Be)}}if(Ve){T=J.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,T}function qn(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Pt||X(),W||(Pt(),W=!0),le.add(p,u),u.v=0}}function to(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ts(w(u.Fa,u),Fa(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,io(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ts(w(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),eo(this),io(this))};function no(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function io(u){u.g=new jn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=st(u.qa);pe(p,"RID","rpc"),pe(p,"SID",u.K),pe(p,"AID",u.T),pe(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&pe(p,"TO",u.ja),pe(p,"TYPE","xmlhttp"),ls(u,p),u.m&&u.o&&Ys(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Tn(st(p)),_.m=null,_.P=!0,ya(_,u)}t.Za=function(){this.C!=null&&(this.C=null,eo(this),to(this),Lt(19))};function ro(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Va(u,p){var _=null;if(u.g==p){ro(u),no(u),u.g=null;var T=2}else if(Ae(u.h,p))_=p.D,as(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;T=js(),St(T,new vu(T,_)),sr(u)}else qn(u);else if(F=p.s,F==3||F==0&&0<p.X||!(T==1&&vd(u,p)||T==2&&to(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),F){case 1:Li(u,5);break;case 4:Li(u,10);break;case 3:Li(u,6);break;default:Li(u,2)}}}function Fa(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function Li(u,p){if(u.j.info("Error code "+p),p==2){var _=w(u.fb,u),T=u.Xa;const F=!T;T=new En(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Zs(T,"https"),Tn(T),F?Ue(T.toString(),_):Au(T.toString(),_)}else Lt(2);u.G=0,u.l&&u.l.sa(p),Lu(u),xu(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Lu(u){if(u.G=0,u.ka=[],u.l){const p=Ci(u.h);(p.length!=0||u.i.length!=0)&&(H(u.ka,p),H(u.ka,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.ra()}}function so(u,p,_){var T=_ instanceof En?st(_):new En(_);if(T.g!="")p&&(T.g=p+"."+T.g),ki(T,T.s);else{var F=h.location;T=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var j=new En(null);T&&Zs(j,T),p&&(j.g=p),F&&ki(j,F),_&&(j.l=_),T=j}return _=u.D,p=u.ya,_&&p&&pe(T,_,p),pe(T,"VER",u.la),ls(u,T),T}function Ou(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Ke(new Sn({eb:_})):new Ke(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function za(){}t=za.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function us(){}us.prototype.g=function(u,p){return new At(u,p)};function At(u,p){ft.call(this),this.g=new Ru(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!P(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!P(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new An(this)}M(At,ft),At.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){Js(this.g)},At.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Us(u),u=_);p.i.push(new os(p.Ya++,u)),p.G==3&&sr(p)},At.prototype.N=function(){this.g.l=null,delete this.j,Js(this.g),delete this.g,At.aa.N.call(this)};function ri(u){Bs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}M(ri,Bs);function Nu(){ga.call(this),this.status=1}M(Nu,ga);function An(u){this.g=u}M(An,za),An.prototype.ua=function(){St(this.g,"a")},An.prototype.ta=function(u){St(this.g,new ri(u))},An.prototype.sa=function(u){St(this.g,new Nu)},An.prototype.ra=function(){St(this.g,"b")},us.prototype.createWebChannel=us.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,aT=function(){return new us},oT=function(){return js()},sT=Pi,hp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},is.NO_ERROR=0,is.TIMEOUT=8,is.HTTP_ERROR=6,Lc=is,Ws.COMPLETE="complete",rT=Ws,ma.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",ft.prototype.listen=ft.prototype.K,rl=ma,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,iT=Ke}).apply(typeof uc<"u"?uc:typeof self<"u"?self:typeof window<"u"?window:{});const zv="@firebase/firestore",Uv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Om("@firebase/firestore");function fo(){return xs.logLevel}function ne(t,...e){if(xs.logLevel<=Ce.DEBUG){const n=e.map(qm);xs.debug(`Firestore (${oa}): ${t}`,...n)}}function Ki(t,...e){if(xs.logLevel<=Ce.ERROR){const n=e.map(qm);xs.error(`Firestore (${oa}): ${t}`,...n)}}function Ur(t,...e){if(xs.logLevel<=Ce.WARN){const n=e.map(qm);xs.warn(`Firestore (${oa}): ${t}`,...n)}}function qm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,lT(t,i,n)}function lT(t,e,n){let i=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ki(i),new Error(i)}function nt(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||lT(e,s,i)}function Oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Ti{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class CR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kR{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new br;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new br,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new br)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(nt(typeof i.accessToken=="string",31837,{l:i}),new uT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class RR{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xR{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new RR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nt(this.o===void 0,3512);const i=o=>{o.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ne("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Bv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Bv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=OR(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%62))}return i}}function Te(t,e){return t<e?-1:t>e?1:0}function dp(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),s=e.codePointAt(n);if(i!==s){if(i<128&&s<128)return Te(i,s);{const o=cT(),l=NR(o.encode(jv(t,n)),o.encode(jv(e,n)));return l!==0?l:Te(i,s)}}n+=i>65535?2:1}return Te(t.length,e.length)}function jv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function NR(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Te(t[n],e[n]);return Te(t.length,e.length)}function Ko(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="__name__";class ui{constructor(e,n,i){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&_e(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ui.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ui?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=ui.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Te(e.length,n.length)}static compareSegments(e,n){const i=ui.isNumericId(e),s=ui.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?ui.extractNumericId(e).compare(ui.extractNumericId(n)):dp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nr.fromString(e.substring(4,e.length-2))}}class He extends ui{construct(e,n,i){return new He(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ee(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new He(n)}static emptyPath(){return new He([])}}const bR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends ui{construct(e,n,i){return new Ht(e,n,i)}static isValidIdentifier(e){return bR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hv}static keyField(){return new Ht([Hv])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ee(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ee(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ee(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new ee(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(He.fromString(e))}static fromName(e){return new ae(He.fromString(e).popFirst(5))}static empty(){return new ae(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t,e,n){if(!n)throw new ee(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DR(t,e,n,i){if(e===!0&&i===!0)throw new ee(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Wv(t){if(!ae.isDocumentKey(t))throw new ee(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qv(t){if(ae.isDocumentKey(t))throw new ee(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Xh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e(12329,{type:typeof t})}function Dr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xh(t);throw new ee(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function au(t,e){if(!dT(t))throw new ee(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ee(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=-62135596800,Gv=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Gv);return new Ye(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$v)throw new ee(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gv}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(au(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$v;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:yt("string",Ye._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Ye(0,0))}static max(){return new ge(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=-1;function MR(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(i===1e9?new Ye(n+1,0):new Ye(n,i));return new Br(s,ae.empty(),e)}function VR(t){return new Br(t.readTime,t.key,ql)}class Br{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Br(ge.min(),ae.empty(),ql)}static max(){return new Br(ge.max(),ae.empty(),ql)}}function FR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jh(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==zR)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,i)=>{n(e)})}static reject(e){return new q((n,i)=>{i(e)})}static waitFor(e){return new q((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=q.resolve(!1);for(const i of e)n=n.next(s=>s?q.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new q((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;n(e[m]).next(v=>{l[m]=v,++h,h===o&&i(l)},v=>s(v))}})}static doWhile(e,n){return new q((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function BR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function aa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ed.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=-1;function td(t){return t==null}function gh(t){return t===0&&1/t==-1/0}function HR(t){return typeof t=="number"&&Number.isInteger(t)&&!gh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="";function WR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Zv(e)),e=qR(t.get(n),e);return Zv(e)}function qR(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case fT:n+="";break;default:n+=o}}return n}function Zv(t){return t+fT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function la(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){this.comparator=e,this.root=n||Nt.EMPTY}insert(e,n){return new ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cc(this.root,e,this.comparator,!0)}}class cc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??Nt.RED,this.left=s??Nt.EMPTY,this.right=o??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new Nt(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Nt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,i,s,o){return this}insert(e,n,i){return new Nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qv(this.data.getIterator())}getIteratorFrom(e){return new Qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class Qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new wr([])}unionWith(e){let n=new It(Ht.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new wr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ko(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new mT("Invalid base64 string: "+o):o}}(e);return new Mt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const $R=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jr(t){if(nt(!!t,39018),typeof t=="string"){let e=0;const n=$R.exec(t);if(nt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hr(t){return typeof t=="string"?Mt.fromBase64String(t):Mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="server_timestamp",_T="__type__",vT="__previous_value__",yT="__local_write_time__";function Gm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[_T])===null||n===void 0?void 0:n.stringValue)===gT}function nd(t){const e=t.mapValue.fields[vT];return Gm(e)?nd(e):e}function $l(t){const e=jr(t.mapValue.fields[yT].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n,i,s,o,l,h,d,m,v){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=v}}const _h="(default)";class Gl{constructor(e,n){this.projectId=e,this.database=n||_h}static empty(){return new Gl("","")}get isDefaultDatabase(){return this.database===_h}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="__type__",ZR="__max__",hc={mapValue:{}},ET="__vector__",vh="value";function Wr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gm(t)?4:QR(t)?9007199254740991:KR(t)?10:11:_e(28295,{value:t})}function wi(t,e){if(t===e)return!0;const n=Wr(t);if(n!==Wr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $l(t).isEqual($l(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=jr(s.timestampValue),h=jr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Hr(s.bytesValue).isEqual(Hr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return ut(s.geoPointValue.latitude)===ut(o.geoPointValue.latitude)&&ut(s.geoPointValue.longitude)===ut(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return ut(s.integerValue)===ut(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=ut(s.doubleValue),h=ut(o.doubleValue);return l===h?gh(l)===gh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Ko(t.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Kv(l)!==Kv(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!wi(l[d],h[d])))return!1;return!0}(t,e);default:return _e(52216,{left:t})}}function Zl(t,e){return(t.values||[]).find(n=>wi(n,e))!==void 0}function Qo(t,e){if(t===e)return 0;const n=Wr(t),i=Wr(e);if(n!==i)return Te(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=ut(o.integerValue||o.doubleValue),d=ut(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Yv(t.timestampValue,e.timestampValue);case 4:return Yv($l(t),$l(e));case 5:return dp(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Hr(o),d=Hr(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let m=0;m<h.length&&m<d.length;m++){const v=Te(h[m],d[m]);if(v!==0)return v}return Te(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Te(ut(o.latitude),ut(l.latitude));return h!==0?h:Te(ut(o.longitude),ut(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Xv(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,m,v;const y=o.fields||{},w=l.fields||{},C=(h=y[vh])===null||h===void 0?void 0:h.arrayValue,M=(d=w[vh])===null||d===void 0?void 0:d.arrayValue,V=Te(((m=C==null?void 0:C.values)===null||m===void 0?void 0:m.length)||0,((v=M==null?void 0:M.values)===null||v===void 0?void 0:v.length)||0);return V!==0?V:Xv(C,M)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===hc.mapValue&&l===hc.mapValue)return 0;if(o===hc.mapValue)return 1;if(l===hc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=l.fields||{},v=Object.keys(m);d.sort(),v.sort();for(let y=0;y<d.length&&y<v.length;++y){const w=dp(d[y],v[y]);if(w!==0)return w;const C=Qo(h[d[y]],m[v[y]]);if(C!==0)return C}return Te(d.length,v.length)}(t.mapValue,e.mapValue);default:throw _e(23264,{le:n})}}function Yv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=jr(t),i=jr(e),s=Te(n.seconds,i.seconds);return s!==0?s:Te(n.nanos,i.nanos)}function Xv(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=Qo(n[s],i[s]);if(o)return o}return Te(n.length,i.length)}function Yo(t){return fp(t)}function fp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=jr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=fp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${fp(n.fields[l])}`;return s+"}"}(t.mapValue):_e(61005,{value:t})}function Oc(t){switch(Wr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nd(t);return e?16+Oc(e):16;case 5:return 2*t.stringValue.length;case 6:return Hr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Oc(o),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return la(i.fields,(o,l)=>{s+=o.length+Oc(l)}),s}(t.mapValue);default:throw _e(13486,{value:t})}}function Jv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pp(t){return!!t&&"integerValue"in t}function Zm(t){return!!t&&"arrayValue"in t}function ey(t){return!!t&&"nullValue"in t}function ty(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rf(t){return!!t&&"mapValue"in t}function KR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[wT])===null||n===void 0?void 0:n.stringValue)===ET}function wl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return la(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=wl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function QR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ZR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!rf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wl(n)}setAll(e){let n=Ht.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=wl(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());rf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];rf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){la(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new hi(wl(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new jt(e,0,ge.min(),ge.min(),ge.min(),hi.empty(),0)}static newFoundDocument(e,n,i,s){return new jt(e,1,n,ge.min(),i,s,0)}static newNoDocument(e,n){return new jt(e,2,n,ge.min(),ge.min(),hi.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,ge.min(),ge.min(),hi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.position=e,this.inclusive=n}}function ny(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=ae.comparator(ae.fromName(l.referenceValue),n.key):i=Qo(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function iy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n="asc"){this.field=e,this.dir=n}}function YR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{}class vt extends TT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new JR(e,n,i):n==="array-contains"?new nx(e,i):n==="in"?new ix(e,i):n==="not-in"?new rx(e,i):n==="array-contains-any"?new sx(e,i):new vt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new ex(e,i):new tx(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qo(n,this.value)):n!==null&&Wr(this.value)===Wr(n)&&this.matchesComparison(Qo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends TT{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new ni(e,n)}matches(e){return IT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function IT(t){return t.op==="and"}function PT(t){return XR(t)&&IT(t)}function XR(t){for(const e of t.filters)if(e instanceof ni)return!1;return!0}function mp(t){if(t instanceof vt)return t.field.canonicalString()+t.op.toString()+Yo(t.value);if(PT(t))return t.filters.map(e=>mp(e)).join(",");{const e=t.filters.map(n=>mp(n)).join(",");return`${t.op}(${e})`}}function ST(t,e){return t instanceof vt?function(i,s){return s instanceof vt&&i.op===s.op&&i.field.isEqual(s.field)&&wi(i.value,s.value)}(t,e):t instanceof ni?function(i,s){return s instanceof ni&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&ST(l,s.filters[h]),!0):!1}(t,e):void _e(19439)}function AT(t){return t instanceof vt?function(n){return`${n.field.canonicalString()} ${n.op} ${Yo(n.value)}`}(t):t instanceof ni?function(n){return n.op.toString()+" {"+n.getFilters().map(AT).join(" ,")+"}"}(t):"Filter"}class JR extends vt{constructor(e,n,i){super(e,n,i),this.key=ae.fromName(i.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class ex extends vt{constructor(e,n){super(e,"in",n),this.keys=CT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class tx extends vt{constructor(e,n){super(e,"not-in",n),this.keys=CT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function CT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ae.fromName(i.referenceValue))}class nx extends vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zm(n)&&Zl(n.arrayValue,this.value)}}class ix extends vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zl(this.value.arrayValue,n)}}class rx extends vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zl(this.value.arrayValue,n)}}class sx extends vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Zl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Pe=null}}function ry(t,e=null,n=[],i=[],s=null,o=null,l=null){return new ox(t,e,n,i,s,o,l)}function Km(t){const e=Oe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>mp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),td(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Yo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Yo(i)).join(",")),e.Pe=n}return e.Pe}function Qm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ST(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iy(t.startAt,e.startAt)&&iy(t.endAt,e.endAt)}function gp(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function ax(t,e,n,i,s,o,l,h){return new ua(t,e,n,i,s,o,l,h)}function id(t){return new ua(t)}function sy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kT(t){return t.collectionGroup!==null}function El(t){const e=Oe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new It(Ht.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Kl(o,i))}),n.has(Ht.keyField().canonicalString())||e.Te.push(new Kl(Ht.keyField(),i))}return e.Te}function _i(t){const e=Oe(t);return e.Ie||(e.Ie=lx(e,El(t))),e.Ie}function lx(t,e){if(t.limitType==="F")return ry(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Kl(s.field,o)});const n=t.endAt?new yh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new yh(t.startAt.position,t.startAt.inclusive):null;return ry(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function _p(t,e){const n=t.filters.concat([e]);return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wh(t,e,n){return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rd(t,e){return Qm(_i(t),_i(e))&&t.limitType===e.limitType}function RT(t){return`${Km(_i(t))}|lt:${t.limitType}`}function po(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>AT(s)).join(", ")}]`),td(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Yo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Yo(s)).join(",")),`Target(${i})`}(_i(t))}; limitType=${t.limitType})`}function sd(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ae.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of El(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const m=ny(l,h,d);return l.inclusive?m<=0:m<0}(i.startAt,El(i),s)||i.endAt&&!function(l,h,d){const m=ny(l,h,d);return l.inclusive?m>=0:m>0}(i.endAt,El(i),s))}(t,e)}function ux(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xT(t){return(e,n)=>{let i=!1;for(const s of El(t)){const o=cx(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function cx(t,e,n){const i=t.field.isKeyField()?ae.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),m=h.data.field(o);return d!==null&&m!==null?Qo(d,m):_e(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return _e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){la(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return pT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=new ht(ae.comparator);function qr(){return hx}const LT=new ht(ae.comparator);function sl(...t){let e=LT;for(const n of t)e=e.insert(n.key,n);return e}function dx(t){let e=LT;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function gs(){return Tl()}function OT(){return Tl()}function Tl(){return new Ms(t=>t.toString(),(t,e)=>t.isEqual(e))}const fx=new It(ae.comparator);function Ne(...t){let e=fx;for(const n of t)e=e.add(n);return e}const px=new It(Te);function mx(){return px}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gh(e)?"-0":e}}function NT(t){return{integerValue:""+t}}function gx(t,e){return HR(e)?NT(e):Ym(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this._=void 0}}function _x(t,e,n){return t instanceof vp?function(s,o){const l={fields:{[_T]:{stringValue:gT},[yT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Gm(o)&&(o=nd(o)),o&&(l.fields[vT]=o),{mapValue:l}}(n,e):t instanceof Eh?bT(t,e):t instanceof Th?DT(t,e):function(s,o){const l=yx(s,o),h=oy(l)+oy(s.Ee);return pp(l)&&pp(s.Ee)?NT(h):Ym(s.serializer,h)}(t,e)}function vx(t,e,n){return t instanceof Eh?bT(t,e):t instanceof Th?DT(t,e):n}function yx(t,e){return t instanceof yp?function(i){return pp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class vp extends od{}class Eh extends od{constructor(e){super(),this.elements=e}}function bT(t,e){const n=MT(e);for(const i of t.elements)n.some(s=>wi(s,i))||n.push(i);return{arrayValue:{values:n}}}class Th extends od{constructor(e){super(),this.elements=e}}function DT(t,e){let n=MT(e);for(const i of t.elements)n=n.filter(s=>!wi(s,i));return{arrayValue:{values:n}}}class yp extends od{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function oy(t){return ut(t.integerValue||t.doubleValue)}function MT(t){return Zm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function wx(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Eh&&s instanceof Eh||i instanceof Th&&s instanceof Th?Ko(i.elements,s.elements,wi):i instanceof yp&&s instanceof yp?wi(i.Ee,s.Ee):i instanceof vp&&s instanceof vp}(t.transform,e.transform)}class ys{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ys}static exists(e){return new ys(void 0,e)}static updateTime(e){return new ys(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xm{}function VT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Tx(t.key,ys.none()):new Jm(t.key,t.data,ys.none());{const n=t.data,i=hi.empty();let s=new It(Ht.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new ad(t.key,i,new wr(s.toArray()),ys.none())}}function Ex(t,e,n){t instanceof Jm?function(s,o,l){const h=s.value.clone(),d=ly(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof ad?function(s,o,l){if(!Nc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=ly(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(FT(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function Il(t,e,n,i){return t instanceof Jm?function(o,l,h,d){if(!Nc(o.precondition,l))return h;const m=o.value.clone(),v=uy(o.fieldTransforms,d,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(t,e,n,i):t instanceof ad?function(o,l,h,d){if(!Nc(o.precondition,l))return h;const m=uy(o.fieldTransforms,d,l),v=l.data;return v.setAll(FT(o)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,l,h){return Nc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function ay(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Ko(i,s,(o,l)=>wx(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Jm extends Xm{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ad extends Xm{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function FT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function ly(t,e,n){const i=new Map;nt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,vx(l,h,n[s]))}return i}function uy(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,_x(o,l,e))}return i}class Tx extends Xm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Ex(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Il(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Il(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=OT();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=VT(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(ge.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ne())}isEqual(e){return this.batchId===e.batchId&&Ko(this.mutations,e.mutations,(n,i)=>ay(n,i))&&Ko(this.baseMutations,e.baseMutations,(n,i)=>ay(n,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Le;function zT(t){if(t===void 0)return Ki("GRPC error has no .code"),Z.UNKNOWN;switch(t){case gt.OK:return Z.OK;case gt.CANCELLED:return Z.CANCELLED;case gt.UNKNOWN:return Z.UNKNOWN;case gt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case gt.INTERNAL:return Z.INTERNAL;case gt.UNAVAILABLE:return Z.UNAVAILABLE;case gt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case gt.NOT_FOUND:return Z.NOT_FOUND;case gt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case gt.ABORTED:return Z.ABORTED;case gt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case gt.DATA_LOSS:return Z.DATA_LOSS;default:return _e(39323,{code:t})}}(Le=gt||(gt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new Nr([4294967295,4294967295],0);function cy(t){const e=cT().encode(t),n=new nT;return n.update(e),new Uint8Array(n.digest())}function hy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Nr([n,i],0),new Nr([s,o],0)]}class eg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ol(`Invalid padding: ${n}`);if(i<0)throw new ol(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ol(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ol(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Nr.fromNumber(this.fe)}pe(e,n,i){let s=e.add(n.multiply(Nr.fromNumber(i)));return s.compare(Ax)===1&&(s=new Nr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=cy(e),[i,s]=hy(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,s,o);if(!this.ye(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new eg(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.fe===0)return;const n=cy(e),[i,s]=hy(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,s,o);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,lu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new ld(ge.min(),s,new ht(Te),qr(),Ne())}}class lu{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new lu(i,n,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n,i,s){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=s}}class UT{constructor(e,n){this.targetId=e,this.De=n}}class BT{constructor(e,n,i=Mt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class dy{constructor(){this.ve=0,this.Ce=fy(),this.Fe=Mt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ne(),n=Ne(),i=Ne();return this.Ce.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:_e(38017,{changeType:o})}}),new lu(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=fy()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Cx{constructor(e){this.We=e,this.Ge=new Map,this.ze=qr(),this.je=dc(),this.Je=dc(),this.He=new ht(Te)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((i,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,i=e.De.count,s=this.st(n);if(s){const o=s.target;if(gp(o))if(i===0){const l=new ae(o.path);this.Xe(n,l,jt.newNoDocument(l,ge.min()))}else nt(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const h=this._t(e),d=h?this.ut(h,e,l):1;if(d!==0){this.rt(n);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,m)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=Hr(i).toUint8Array()}catch(d){if(d instanceof mT)return Ur("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new eg(l,s,o)}catch(d){return Ur(d instanceof ol?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.fe===0?null:h}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.We.lt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Xe(n,o,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((o,l)=>{const h=this.st(l);if(h){if(o.current&&gp(h.target)){const d=new ae(h.target.path);this.Tt(d).has(l)||this.It(l,d)||this.Xe(l,d,jt.newNoDocument(d,e))}o.Ne&&(n.set(l,o.Le()),o.ke())}});let i=Ne();this.Je.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const m=this.st(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ze.forEach((o,l)=>l.setReadTime(e));const s=new ld(e,n,this.He,this.ze,i);return this.ze=qr(),this.je=dc(),this.Je=dc(),this.He=new ht(Te),s}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new dy,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new It(Te),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new It(Te),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new dy),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function dc(){return new ht(ae.comparator)}function fy(){return new ht(ae.comparator)}const kx={asc:"ASCENDING",desc:"DESCENDING"},Rx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xx={and:"AND",or:"OR"};class Lx{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wp(t,e){return t.useProto3Json||td(e)?e:{value:e}}function Ep(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zo(t){return nt(!!t,49232),ge.fromTimestamp(function(n){const i=jr(n);return new Ye(i.seconds,i.nanos)}(t))}function HT(t,e){return Tp(t,e).canonicalString()}function Tp(t,e){const n=function(s){return new He(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function WT(t){const e=He.fromString(t);return nt(KT(e),10190,{key:e.toString()}),e}function sf(t,e){const n=WT(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae($T(n))}function qT(t,e){return HT(t.databaseId,e)}function Ox(t){const e=WT(t);return e.length===4?He.emptyPath():$T(e)}function py(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $T(t){return nt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Nx(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:_e(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(m,v){return m.useProto3Json?(nt(v===void 0||typeof v=="string",58123),Mt.fromBase64String(v||"")):(nt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Mt.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=m.code===void 0?Z.UNKNOWN:zT(m.code);return new ee(v,m.message||"")}(l);n=new BT(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=sf(t,i.document.name),o=zo(i.document.updateTime),l=i.document.createTime?zo(i.document.createTime):ge.min(),h=new hi({mapValue:{fields:i.document.fields}}),d=jt.newFoundDocument(s,o,l,h),m=i.targetIds||[],v=i.removedTargetIds||[];n=new bc(m,v,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=sf(t,i.document),o=i.readTime?zo(i.readTime):ge.min(),l=jt.newNoDocument(s,o),h=i.removedTargetIds||[];n=new bc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=sf(t,i.document),o=i.removedTargetIds||[];n=new bc([],o,s,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new Sx(s,o),h=i.targetId;n=new UT(h,l)}}return n}function bx(t,e){return{documents:[qT(t,e.path)]}}function Dx(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=qT(t,s);const o=function(m){if(m.length!==0)return ZT(ni.create(m,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(m){if(m.length!==0)return m.map(v=>function(w){return{field:mo(w.field),direction:Fx(w.dir)}}(v))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=wp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{Vt:n,parent:s}}function Mx(t){let e=Ox(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){nt(i===1,65062);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=function(y){const w=GT(y);return w instanceof ni&&PT(w)?w.getFilters():[w]}(n.where));let l=[];n.orderBy&&(l=function(y){return y.map(w=>function(M){return new Kl(go(M.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(w))}(n.orderBy));let h=null;n.limit&&(h=function(y){let w;return w=typeof y=="object"?y.value:y,td(w)?null:w}(n.limit));let d=null;n.startAt&&(d=function(y){const w=!!y.before,C=y.values||[];return new yh(C,w)}(n.startAt));let m=null;return n.endAt&&(m=function(y){const w=!y.before,C=y.values||[];return new yh(C,w)}(n.endAt)),ax(e,s,l,o,h,"F",d,m)}function Vx(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function GT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=go(n.unaryFilter.field);return vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=go(n.unaryFilter.field);return vt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=go(n.unaryFilter.field);return vt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=go(n.unaryFilter.field);return vt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(t):t.fieldFilter!==void 0?function(n){return vt.create(go(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ni.create(n.compositeFilter.filters.map(i=>GT(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(n.compositeFilter.op))}(t):_e(30097,{filter:t})}function Fx(t){return kx[t]}function zx(t){return Rx[t]}function Ux(t){return xx[t]}function mo(t){return{fieldPath:t.canonicalString()}}function go(t){return Ht.fromServerFormat(t.fieldPath)}function ZT(t){return t instanceof vt?function(n){if(n.op==="=="){if(ty(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NAN"}};if(ey(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ty(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NAN"}};if(ey(n.value))return{unaryFilter:{field:mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(n.field),op:zx(n.op),value:n.value}}}(t):t instanceof ni?function(n){const i=n.getFilters().map(s=>ZT(s));return i.length===1?i[0]:{compositeFilter:{op:Ux(n.op),filters:i}}}(t):_e(54877,{filter:t})}function KT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,i,s,o=ge.min(),l=ge.min(),h=Mt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.gt=e}}function jx(t){const e=Mx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.Dn=new Wx}addToCollectionParentIndex(e,n){return this.Dn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Br.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Br.min())}updateCollectionGroup(e,n,i){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class Wx{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new It(He.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new It(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QT=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(QT,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Xo(0)}static ur(){return new Xo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="LruGarbageCollector",qx=1048576;function _y([t,e],[n,i]){const s=Te(t,n);return s===0?Te(e,i):s}class $x{constructor(e){this.Tr=e,this.buffer=new It(_y),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();_y(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Gx{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ne(gy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){aa(n)?ne(gy,"Ignoring IndexedDB error during garbage collection: ",n):await Jh(n)}await this.Rr(3e5)})}}class Zx{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return q.resolve(ed.ue);const i=new $x(n);return this.Vr.forEachTarget(e,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(my)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),my):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,s,o,l,h,d,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(i=y,h=Date.now(),this.removeTargets(e,i,n))).next(y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(y=>(m=Date.now(),fo()<=Ce.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-v}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${y} documents in `+(m-d)+`ms
Total Duration: ${m-v}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y})))}}function Kx(t,e){return new Zx(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.changes=new Ms(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Il(i.mutation,s,wr.empty(),Ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ne()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ne()){const s=gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=sl();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ne()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=qr();const l=Tl(),h=function(){return Tl()}();return n.forEach((d,m)=>{const v=i.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof ad)?o=o.insert(m.key,m):v!==void 0?(l.set(m.key,v.mutation.getFieldMask()),Il(v.mutation,m,v.mutation.getFieldMask(),Ye.now())):l.set(m.key,wr.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((m,v)=>l.set(m,v)),n.forEach((m,v)=>{var y;return h.set(m,new Yx(v,(y=l.get(m))!==null&&y!==void 0?y:null))}),h))}recalculateAndSaveOverlays(e,n){const i=Tl();let s=new ht((l,h)=>l-h),o=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const m=n.get(d);if(m===null)return;let v=i.get(d)||wr.empty();v=h.applyToLocalView(m,v),i.set(d,v);const y=(s.get(h.batchId)||Ne()).add(d);s=s.insert(h.batchId,y)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,v=d.value,y=OT();v.forEach(w=>{if(!o.has(w)){const C=VT(n.get(w),i.get(w));C!==null&&y.set(w,C),o=o.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,y))}return q.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return ae.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):q.resolve(gs());let h=ql,d=o;return l.next(m=>q.forEach(m,(v,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),o.get(v)?q.resolve():this.remoteDocumentCache.getEntry(e,v).next(w=>{d=d.insert(v,w)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,d,m,Ne())).next(v=>({batchId:h,changes:dx(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(i=>{let s=sl();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=sl();return this.indexManager.getCollectionParents(e,o).next(h=>q.forEach(h,d=>{const m=function(y,w){return new ua(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,s).next(v=>{v.forEach((y,w)=>{l=l.insert(y,w)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,m)=>{const v=m.getKey();l.get(v)===null&&(l=l.insert(v,jt.newInvalidDocument(v)))});let h=sl();return l.forEach((d,m)=>{const v=o.get(d);v!==void 0&&Il(v.mutation,m,wr.empty(),Ye.now()),sd(n,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return q.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:zo(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:jx(s.bundledQuery),readTime:zo(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(){this.overlays=new ht(ae.comparator),this.kr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=gs();return q.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.wt(e,n,o)}),q.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(i)),q.resolve()}getOverlaysForCollection(e,n,i){const s=gs(),o=n.length+1,l=new ae(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new ht((m,v)=>m-v);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>i){let v=o.get(m.largestBatchId);v===null&&(v=gs(),o=o.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=gs(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,v)=>h.set(m,v)),!(h.size()>=s)););return q.resolve(h)}wt(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new Px(n,i));let o=this.kr.get(n);o===void 0&&(o=Ne(),this.kr.set(n,o)),this.kr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(){this.qr=new It(kt.Qr),this.$r=new It(kt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new kt(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new kt(e,n))}Gr(e,n){e.forEach(i=>this.removeReference(i,n))}zr(e){const n=new ae(new He([])),i=new kt(n,e),s=new kt(n,e+1),o=[];return this.$r.forEachInRange([i,s],l=>{this.Wr(l),o.push(l.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ae(new He([])),i=new kt(n,e),s=new kt(n,e+1);let o=Ne();return this.$r.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new kt(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ae.comparator(e.key,n.key)||Te(e.Hr,n.Hr)}static Ur(e,n){return Te(e.Hr,n.Hr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new It(kt.Qr)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Ix(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.Yr=this.Yr.add(new kt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return q.resolve(l)}lookupMutationBatch(e,n){return q.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Xr(i),o=s<0?0:s;return q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?jR:this.er-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new kt(n,0),s=new kt(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,s],l=>{const h=this.Zr(l.Hr);o.push(h)}),q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new It(Te);return n.forEach(s=>{const o=new kt(s,0),l=new kt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,l],h=>{i=i.add(h.Hr)})}),q.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;ae.isDocumentKey(o)||(o=o.child(""));const l=new kt(new ae(o),0);let h=new It(Te);return this.Yr.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.Hr)),!0)},l),q.resolve(this.ei(h))}ei(e){const n=[];return e.forEach(i=>{const s=this.Zr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){nt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return q.forEach(n.mutations,s=>{const o=new kt(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,n){const i=new kt(n,0),s=this.Yr.firstAfterOrEqual(i);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.ni=e,this.docs=function(){return new ht(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return q.resolve(i?i.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let i=qr();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():jt.newInvalidDocument(s))}),q.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=qr();const l=n.path,h=new ae(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:v}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||FR(VR(v),i)<=0||(s.has(v.key)||sd(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return q.resolve(o)}getAllFromCollectionGroup(e,n,i,s){_e(9500)}ri(e,n){return q.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new rL(this)}getSize(e){return q.resolve(this.size)}}class rL extends Qx{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(i)}),q.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e){this.persistence=e,this.ii=new Ms(n=>Km(n),Qm),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.si=0,this.oi=new tg,this.targetCount=0,this._i=Xo.ar()}forEachTarget(e,n){return this.ii.forEach((i,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),q.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Xo(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.hr(n),q.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.ii.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.ii.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),q.waitFor(o).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return q.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),q.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return q.resolve(i)}containsKey(e,n){return q.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n){this.ai={},this.overlays={},this.ui=new ed(0),this.ci=!1,this.ci=!0,this.li=new tL,this.referenceDelegate=e(this),this.hi=new sL(this),this.indexManager=new Hx,this.remoteDocumentCache=function(s){return new iL(s)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new Bx(n),this.Ti=new Jx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new nL(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){ne("MemoryPersistence","Starting transaction:",e);const s=new oL(this.ui.next());return this.referenceDelegate.Ii(),i(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ei(e,n){return q.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,n)))}}class oL extends UR{constructor(e){super(),this.currentSequenceNumber=e}}class ng{constructor(e){this.persistence=e,this.Ai=new tg,this.Ri=null}static Vi(e){return new ng(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),q.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.mi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.mi,i=>{const s=ae.fromPath(i);return this.fi(e,s).next(o=>{o||n.removeEntry(s,ge.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return q.or([()=>q.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ih{constructor(e,n){this.persistence=e,this.gi=new Ms(i=>WR(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=Kx(this,n)}static Vi(e,n){return new Ih(e,n)}Ii(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}yr(e){let n=0;return this.gr(e,i=>{n++}).next(()=>n)}gr(e,n){return q.forEach(this.gi,(i,s)=>this.Sr(e,i,s).next(o=>o?q.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ri(e,l=>this.Sr(e,l,n).next(h=>{h||(i++,o.removeEntry(l,ge.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),q.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),q.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Oc(e.data.value)),n}Sr(e,n,i){return q.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return q.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=s}static Es(e,n){let i=Ne(),s=Ne();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new ig(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return GA()?8:BR(qt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.ps(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ys(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new aL;return this.ws(e,n,l).next(h=>{if(o.result=h,this.Rs)return this.Ss(e,n,l,h.size)})}).next(()=>o.result)}Ss(e,n,i,s){return i.documentReadCount<this.Vs?(fo()<=Ce.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),q.resolve()):(fo()<=Ce.DEBUG&&ne("QueryEngine","Query:",po(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(fo()<=Ce.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_i(n))):q.resolve())}ps(e,n){if(sy(n))return q.resolve(null);let i=_i(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=wh(n,null,"F"),i=_i(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Ne(...o);return this.gs.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const m=this.bs(n,h);return this.Ds(n,m,l,d.readTime)?this.ps(e,wh(n,null,"F")):this.vs(e,m,n,d)}))})))}ys(e,n,i,s){return sy(n)||s.isEqual(ge.min())?q.resolve(null):this.gs.getDocuments(e,i).next(o=>{const l=this.bs(n,o);return this.Ds(n,l,i,s)?q.resolve(null):(fo()<=Ce.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),po(n)),this.vs(e,l,n,MR(s,ql)).next(h=>h))})}bs(e,n){let i=new It(xT(e));return n.forEach((s,o)=>{sd(e,o)&&(i=i.add(o))}),i}Ds(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ws(e,n,i){return fo()<=Ce.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",po(n)),this.gs.getDocumentsMatchingQuery(e,n,Br.min(),i)}vs(e,n,i,s){return this.gs.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="LocalStore",uL=3e8;class cL{constructor(e,n,i,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new ht(Te),this.Ms=new Ms(o=>Km(o),Qm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function hL(t,e,n,i){return new cL(t,e,n,i)}async function XT(t,e){const n=Oe(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Ne();for(const m of s){l.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}for(const m of o){h.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}return n.localDocuments.getDocuments(i,d).next(m=>({Bs:m,removedBatchIds:l,addedBatchIds:h}))})})}function JT(t){const e=Oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function dL(t,e){const n=Oe(t),i=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const h=[];e.targetChanges.forEach((v,y)=>{const w=s.get(y);if(!w)return;h.push(n.hi.removeMatchingKeys(o,v.removedDocuments,y).next(()=>n.hi.addMatchingKeys(o,v.addedDocuments,y)));let C=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?C=C.withResumeToken(Mt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,i)),s=s.insert(y,C),function(V,H,k){return V.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=uL?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(w,C,v)&&h.push(n.hi.updateTargetData(o,C))});let d=qr(),m=Ne();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(fL(o,l,e.documentUpdates).next(v=>{d=v.Ls,m=v.ks})),!i.isEqual(ge.min())){const v=n.hi.getLastRemoteSnapshotVersion(o).next(y=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(v)}return q.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(n.Fs=s,o))}function fL(t,e,n){let i=Ne(),s=Ne();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=qr();return n.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(ge.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ne(rg,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Ls:l,ks:s}})}function pL(t,e){const n=Oe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.hi.getTargetData(i,e).next(o=>o?(s=o,q.resolve(s)):n.hi.allocateTargetId(i).next(l=>(s=new Er(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i})}async function Ip(t,e,n){const i=Oe(t),s=i.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!aa(l))throw l;ne(rg,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(s.target)}function vy(t,e,n){const i=Oe(t);let s=ge.min(),o=Ne();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,m,v){const y=Oe(d),w=y.Ms.get(v);return w!==void 0?q.resolve(y.Fs.get(w)):y.hi.getTargetData(m,v)}(i,l,_i(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.Cs.getDocumentsMatchingQuery(l,e,n?s:ge.min(),n?o:Ne())).next(h=>(mL(i,ux(e),h),{documents:h,qs:o})))}function mL(t,e,n){let i=t.xs.get(e)||ge.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.xs.set(e,i)}class yy{constructor(){this.activeTargetIds=mx()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gL{constructor(){this.Fo=new yy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new yy,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="ConnectivityMonitor";class Ey{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ne(wy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ne(wy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc=null;function Pp(){return fc===null?fc=function(){return 268435456+Math.round(2147483648*Math.random())}():fc++,"0x"+fc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="RestConnection",vL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yL{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===_h?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,n,i,s,o){const l=Pp(),h=this.Go(e,n.toUriEncodedString());ne(of,`Sending RPC '${e}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,s,o);const{host:m}=new URL(h),v=Ns(m);return this.jo(e,h,d,i,v).then(y=>(ne(of,`Received RPC '${e}' ${l}: `,y),y),y=>{throw Ur(of,`RPC '${e}' ${l} failed with error: `,y,"url: ",h,"request:",i),y})}Jo(e,n,i,s,o,l){return this.Wo(e,n,i,s,o)}zo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}Go(e,n){const i=vL[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class EL extends yL{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,s,o){const l=Pp();return new Promise((h,d)=>{const m=new iT;m.setWithCredentials(!0),m.listenOnce(rT.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Lc.NO_ERROR:const y=m.getResponseJson();ne(zt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),h(y);break;case Lc.TIMEOUT:ne(zt,`RPC '${e}' ${l} timed out`),d(new ee(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Lc.HTTP_ERROR:const w=m.getStatus();if(ne(zt,`RPC '${e}' ${l} failed with status:`,w,"response text:",m.getResponseText()),w>0){let C=m.getResponseJson();Array.isArray(C)&&(C=C[0]);const M=C==null?void 0:C.error;if(M&&M.status&&M.message){const V=function(k){const P=k.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(P)>=0?P:Z.UNKNOWN}(M.status);d(new ee(V,M.message))}else d(new ee(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ee(Z.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:l,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ne(zt,`RPC '${e}' ${l} completed.`)}});const v=JSON.stringify(s);ne(zt,`RPC '${e}' ${l} sending request:`,s),m.send(n,"POST",v,i,15)})}P_(e,n,i){const s=Pp(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=aT(),h=oT(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const v=o.join("");ne(zt,`Creating RPC '${e}' stream ${s}: ${v}`,d);const y=l.createWebChannel(v,d);this.T_(y);let w=!1,C=!1;const M=new wL({Ho:H=>{C?ne(zt,`Not sending because RPC '${e}' stream ${s} is closed:`,H):(w||(ne(zt,`Opening RPC '${e}' stream ${s} transport.`),y.open(),w=!0),ne(zt,`RPC '${e}' stream ${s} sending:`,H),y.send(H))},Yo:()=>y.close()}),V=(H,k,P)=>{H.listen(k,N=>{try{P(N)}catch(U){setTimeout(()=>{throw U},0)}})};return V(y,rl.EventType.OPEN,()=>{C||(ne(zt,`RPC '${e}' stream ${s} transport opened.`),M.s_())}),V(y,rl.EventType.CLOSE,()=>{C||(C=!0,ne(zt,`RPC '${e}' stream ${s} transport closed`),M.__(),this.I_(y))}),V(y,rl.EventType.ERROR,H=>{C||(C=!0,Ur(zt,`RPC '${e}' stream ${s} transport errored. Name:`,H.name,"Message:",H.message),M.__(new ee(Z.UNAVAILABLE,"The operation could not be completed")))}),V(y,rl.EventType.MESSAGE,H=>{var k;if(!C){const P=H.data[0];nt(!!P,16349);const N=P,U=(N==null?void 0:N.error)||((k=N[0])===null||k===void 0?void 0:k.error);if(U){ne(zt,`RPC '${e}' stream ${s} received error:`,U);const Y=U.status;let K=function(S){const R=gt[S];if(R!==void 0)return zT(R)}(Y),A=U.message;K===void 0&&(K=Z.INTERNAL,A="Unknown error status: "+Y+" with message "+U.message),C=!0,M.__(new ee(K,A)),y.close()}else ne(zt,`RPC '${e}' stream ${s} received:`,P),M.a_(P)}}),V(h,sT.STAT_EVENT,H=>{H.stat===hp.PROXY?ne(zt,`RPC '${e}' stream ${s} detected buffering proxy`):H.stat===hp.NOPROXY&&ne(zt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{M.o_()},0),M}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function af(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t){return new Lx(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=s,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-i);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="PersistentStream";class TL{constructor(e,n,i,s,o,l,h,d){this.Fi=e,this.w_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new eI(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Ki(n.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.b_===n&&this.W_(i,s)},i=>{e(()=>{const s=new ee(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)})})}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{i(()=>this.G_(s))}),this.stream.onMessage(s=>{i(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ne(Ty,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ne(Ty,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IL extends TL{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=Nx(this.serializer,e),i=function(o){if(!("targetChange"in o))return ge.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ge.min():l.readTime?zo(l.readTime):ge.min()}(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=py(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=gp(d)?{documents:bx(o,d)}:{query:Dx(o,d).Vt},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=jT(o,l.resumeToken);const m=wp(o,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(ge.min())>0){h.readTime=Ep(o,l.snapshotVersion.toTimestamp());const m=wp(o,l.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=Vx(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=py(this.serializer),n.removeTarget=e,this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{}class SL extends PL{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new ee(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Wo(e,Tp(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(Z.UNKNOWN,o.toString())})}Jo(e,n,i,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Jo(e,Tp(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ee(Z.UNKNOWN,l.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class AL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ki(n),this._a=!1):ne("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="RemoteStore";class CL{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(l=>{i.enqueueAndForget(async()=>{cu(this)&&(ne(Jo,"Restarting streams for network reachability change."),await async function(d){const m=Oe(d);m.Ia.add(4),await uu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await cd(m)}(this))})}),this.Aa=new AL(i,s)}}async function cd(t){if(cu(t))for(const e of t.da)await e(!0)}async function uu(t){for(const e of t.da)await e(!1)}function tI(t,e){const n=Oe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),lg(n)?ag(n):ca(n).x_()&&og(n,e))}function sg(t,e){const n=Oe(t),i=ca(n);n.Ta.delete(e),i.x_()&&nI(n,e),n.Ta.size===0&&(i.x_()?i.B_():cu(n)&&n.Aa.set("Unknown"))}function og(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ca(t).H_(e)}function nI(t,e){t.Ra.$e(e),ca(t).Y_(e)}function ag(t){t.Ra=new Cx({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ca(t).start(),t.Aa.aa()}function lg(t){return cu(t)&&!ca(t).M_()&&t.Ta.size>0}function cu(t){return Oe(t).Ia.size===0}function iI(t){t.Ra=void 0}async function kL(t){t.Aa.set("Online")}async function RL(t){t.Ta.forEach((e,n)=>{og(t,e)})}async function xL(t,e){iI(t),lg(t)?(t.Aa.la(e),ag(t)):t.Aa.set("Unknown")}async function LL(t,e,n){if(t.Aa.set("Online"),e instanceof BT&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ta.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ta.delete(h),s.Ra.removeTarget(h))}(t,e)}catch(i){ne(Jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Iy(t,i)}else if(e instanceof bc?t.Ra.Ye(e):e instanceof UT?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ge.min()))try{const i=await JT(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Ra.Pt(l);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const v=o.Ta.get(m);v&&o.Ta.set(m,v.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,m)=>{const v=o.Ta.get(d);if(!v)return;o.Ta.set(d,v.withResumeToken(Mt.EMPTY_BYTE_STRING,v.snapshotVersion)),nI(o,d);const y=new Er(v.target,d,m,v.sequenceNumber);og(o,y)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){ne(Jo,"Failed to raise snapshot:",i),await Iy(t,i)}}async function Iy(t,e,n){if(!aa(e))throw e;t.Ia.add(1),await uu(t),t.Aa.set("Offline"),n||(n=()=>JT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne(Jo,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await cd(t)})}async function Py(t,e){const n=Oe(t);n.asyncQueue.verifyOperationInProgress(),ne(Jo,"RemoteStore received new credentials");const i=cu(n);n.Ia.add(3),await uu(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await cd(n)}async function OL(t,e){const n=Oe(t);e?(n.Ia.delete(2),await cd(n)):e||(n.Ia.add(2),await uu(n),n.Aa.set("Unknown"))}function ca(t){return t.Va||(t.Va=function(n,i,s){const o=Oe(n);return o.ia(),new IL(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Zo:kL.bind(null,t),e_:RL.bind(null,t),n_:xL.bind(null,t),J_:LL.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),lg(t)?ag(t):t.Aa.set("Unknown")):(await t.Va.stop(),iI(t))})),t.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new ug(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rI(t,e){if(Ki("AsyncQueue",`${e}: ${t}`),aa(t))return new ee(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ae.comparator(n.key,i.key):(n,i)=>ae.comparator(n.key,i.key),this.keyedMap=sl(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Uo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.fa=new ht(ae.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):_e(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,i)=>{e.push(i)}),e}}class ea{constructor(e,n,i,s,o,l,h,d,m){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new ea(e,n,Uo.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class bL{constructor(){this.queries=Ay(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const s=Oe(n),o=s.queries;s.queries=Ay(),o.forEach((l,h)=>{for(const d of h.wa)d.onError(i)})})(this,new ee(Z.ABORTED,"Firestore shutting down"))}}function Ay(){return new Ms(t=>RT(t),rd)}async function cg(t,e){const n=Oe(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.Sa()&&e.ba()&&(i=2):(o=new NL,i=e.ba()?0:1);try{switch(i){case 0:o.ya=await n.onListen(s,!0);break;case 1:o.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=rI(l,`Initialization of query '${po(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&dg(n)}async function hg(t,e){const n=Oe(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.wa.indexOf(e);l>=0&&(o.wa.splice(l,1),o.wa.length===0?s=e.ba()?0:1:!o.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function DL(t,e){const n=Oe(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.wa)h.Ca(s)&&(i=!0);l.ya=s}}i&&dg(n)}function ML(t,e,n){const i=Oe(t),s=i.queries.get(e);if(s)for(const o of s.wa)o.onError(n);i.queries.delete(e)}function dg(t){t.Da.forEach(e=>{e.next()})}var Sp,Cy;(Cy=Sp||(Sp={})).Fa="default",Cy.Cache="cache";class fg{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ea(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Sp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.key=e}}class oI{constructor(e){this.key=e}}class VL{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ne(),this.mutatedKeys=Ne(),this.Xa=xT(e),this.eu=new Uo(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new Sy,s=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,y)=>{const w=s.get(v),C=sd(this.query,y)?y:null,M=!!w&&this.mutatedKeys.has(w.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let H=!1;w&&C?w.data.isEqual(C.data)?M!==V&&(i.track({type:3,doc:C}),H=!0):this.iu(w,C)||(i.track({type:2,doc:C}),H=!0,(d&&this.Xa(C,d)>0||m&&this.Xa(C,m)<0)&&(h=!0)):!w&&C?(i.track({type:0,doc:C}),H=!0):w&&!C&&(i.track({type:1,doc:w}),H=!0,(d||m)&&(h=!0)),H&&(C?(l=l.add(C),o=V?o.add(v):o.delete(v)):(l=l.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),o=o.delete(v.key),i.track({type:1,doc:v})}return{eu:l,ru:i,Ds:h,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort((v,y)=>function(C,M){const V=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:H})}};return V(C)-V(M)}(v.type,y.type)||this.Xa(v.doc,y.doc)),this.su(i),s=s!=null&&s;const h=n&&!s?this.ou():[],d=this.Za.size===0&&this.current&&!s?1:0,m=d!==this.Ya;return this.Ya=d,l.length!==0||m?{snapshot:new ea(this.query,e.eu,o,l,e.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Sy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ne(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const n=[];return e.forEach(i=>{this.Za.has(i)||n.push(new oI(i))}),this.Za.forEach(i=>{e.has(i)||n.push(new sI(i))}),n}uu(e){this.Ha=e.qs,this.Za=Ne();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ea.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const pg="SyncEngine";class FL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class zL{constructor(e){this.key=e,this.lu=!1}}class UL{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new Ms(h=>RT(h),rd),this.Tu=new Map,this.Iu=new Set,this.du=new ht(ae.comparator),this.Eu=new Map,this.Au=new tg,this.Ru={},this.Vu=new Map,this.mu=Xo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function BL(t,e,n=!0){const i=hI(t);let s;const o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.cu()):s=await aI(i,e,n,!0),s}async function jL(t,e){const n=hI(t);await aI(n,e,!0,!1)}async function aI(t,e,n,i){const s=await pL(t.localStore,_i(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await HL(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&tI(t.remoteStore,s),h}async function HL(t,e,n,i,s){t.gu=(y,w,C)=>async function(V,H,k,P){let N=H.view.nu(k);N.Ds&&(N=await vy(V.localStore,H.query,!1).then(({documents:A})=>H.view.nu(A,N)));const U=P&&P.targetChanges.get(H.targetId),Y=P&&P.targetMismatches.get(H.targetId)!=null,K=H.view.applyChanges(N,V.isPrimaryClient,U,Y);return Ry(V,H.targetId,K._u),K.snapshot}(t,y,w,C);const o=await vy(t.localStore,e,!0),l=new VL(e,o.qs),h=l.nu(o.documents),d=lu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),m=l.applyChanges(h,t.isPrimaryClient,d);Ry(t,n,m._u);const v=new FL(e,n,l);return t.Pu.set(e,v),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),m.snapshot}async function WL(t,e,n){const i=Oe(t),s=i.Pu.get(e),o=i.Tu.get(s.targetId);if(o.length>1)return i.Tu.set(s.targetId,o.filter(l=>!rd(l,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Ip(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&sg(i.remoteStore,s.targetId),Ap(i,s.targetId)}).catch(Jh)):(Ap(i,s.targetId),await Ip(i.localStore,s.targetId,!0))}async function qL(t,e){const n=Oe(t),i=n.Pu.get(e),s=n.Tu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),sg(n.remoteStore,i.targetId))}async function lI(t,e){const n=Oe(t);try{const i=await dL(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Eu.get(o);l&&(nt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.lu=!0:s.modifiedDocuments.size>0?nt(l.lu,14607):s.removedDocuments.size>0&&(nt(l.lu,42227),l.lu=!1))}),await cI(n,i,e)}catch(i){await Jh(i)}}function ky(t,e,n){const i=Oe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Pu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=Oe(l);d.onlineState=h;let m=!1;d.queries.forEach((v,y)=>{for(const w of y.wa)w.va(h)&&(m=!0)}),m&&dg(d)}(i.eventManager,e),s.length&&i.hu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function $L(t,e,n){const i=Oe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Eu.get(e),o=s&&s.key;if(o){let l=new ht(ae.comparator);l=l.insert(o,jt.newNoDocument(o,ge.min()));const h=Ne().add(o),d=new ld(ge.min(),new Map,new ht(Te),l,h);await lI(i,d),i.du=i.du.remove(o),i.Eu.delete(e),mg(i)}else await Ip(i.localStore,e,!1).then(()=>Ap(i,e,n)).catch(Jh)}function Ap(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(i=>{t.Au.containsKey(i)||uI(t,i)})}function uI(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(sg(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),mg(t))}function Ry(t,e,n){for(const i of n)i instanceof sI?(t.Au.addReference(i.key,e),GL(t,i)):i instanceof oI?(ne(pg,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||uI(t,i.key)):_e(19791,{yu:i})}function GL(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(ne(pg,"New document in limbo: "+n),t.Iu.add(i),mg(t))}function mg(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ae(He.fromString(e)),i=t.mu.next();t.Eu.set(i,new zL(n)),t.du=t.du.insert(n,i),tI(t.remoteStore,new Er(_i(id(n.path)),i,"TargetPurposeLimboResolution",ed.ue))}}async function cI(t,e,n){const i=Oe(t),s=[],o=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach((h,d)=>{l.push(i.gu(d,e,n).then(m=>{var v;if((m||n)&&i.isPrimaryClient){const y=m?!m.fromCache:(v=n==null?void 0:n.targetChanges.get(d.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(m){s.push(m);const y=ig.Es(d.targetId,m);o.push(y)}}))}),await Promise.all(l),i.hu.J_(s),await async function(d,m){const v=Oe(d);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>q.forEach(m,w=>q.forEach(w.Is,C=>v.persistence.referenceDelegate.addReference(y,w.targetId,C)).next(()=>q.forEach(w.ds,C=>v.persistence.referenceDelegate.removeReference(y,w.targetId,C)))))}catch(y){if(!aa(y))throw y;ne(rg,"Failed to update sequence numbers: "+y)}for(const y of m){const w=y.targetId;if(!y.fromCache){const C=v.Fs.get(w),M=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(M);v.Fs=v.Fs.insert(w,V)}}}(i.localStore,o))}async function ZL(t,e){const n=Oe(t);if(!n.currentUser.isEqual(e)){ne(pg,"User change. New user:",e.toKey());const i=await XT(n.localStore,e);n.currentUser=e,function(o,l){o.Vu.forEach(h=>{h.forEach(d=>{d.reject(new ee(Z.CANCELLED,l))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await cI(n,i.Bs)}}function KL(t,e){const n=Oe(t),i=n.Eu.get(e);if(i&&i.lu)return Ne().add(i.key);{let s=Ne();const o=n.Tu.get(e);if(!o)return s;for(const l of o){const h=n.Pu.get(l);s=s.unionWith(h.view.tu)}return s}}function hI(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$L.bind(null,e),e.hu.J_=DL.bind(null,e.eventManager),e.hu.pu=ML.bind(null,e.eventManager),e}class Ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ud(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return hL(this.persistence,new lL,e.initialUser,this.serializer)}Du(e){return new YT(ng.Vi,this.serializer)}bu(e){return new gL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ph.provider={build:()=>new Ph};class QL extends Ph{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){nt(this.persistence.referenceDelegate instanceof Ih,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Gx(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new YT(i=>Ih.Vi(i,n),this.serializer)}}class Cp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ky(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZL.bind(null,this.syncEngine),await OL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bL}()}createDatastore(e){const n=ud(e.databaseInfo.databaseId),i=function(o){return new EL(o)}(e.databaseInfo);return function(o,l,h,d){return new SL(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new CL(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>ky(this.syncEngine,n,0),function(){return Ey.C()?new Ey:new _L}())}createSyncEngine(e,n){return function(s,o,l,h,d,m,v){const y=new UL(s,o,l,h,d,m);return v&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=Oe(s);ne(Jo,"RemoteStore shutting down."),o.Ia.add(5),await uu(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Cp.provider={build:()=>new Cp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="FirestoreClient";class YL{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Ut.UNAUTHENTICATED,this.clientId=$m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{ne($r,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(ne($r,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=rI(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function lf(t,e){t.asyncQueue.verifyOperationInProgress(),ne($r,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await XT(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>{Ur("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ne("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Ur("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function xy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await XL(t);ne($r,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Py(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Py(e.remoteStore,s)),t._onlineComponents=e}async function XL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne($r,"Using user provided OfflineComponentProvider");try{await lf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ur("Error using user provided cache. Falling back to memory cache: "+n),await lf(t,new Ph)}}else ne($r,"Using default OfflineComponentProvider"),await lf(t,new QL(void 0));return t._offlineComponents}async function JL(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne($r,"Using user provided OnlineComponentProvider"),await xy(t,t._uninitializedComponentsProvider._online)):(ne($r,"Using default OnlineComponentProvider"),await xy(t,new Cp))),t._onlineComponents}async function Sh(t){const e=await JL(t),n=e.eventManager;return n.onListen=BL.bind(null,e.syncEngine),n.onUnlisten=WL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qL.bind(null,e.syncEngine),n}function eO(t,e,n={}){const i=new br;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,m){const v=new gg({next:w=>{v.Ou(),l.enqueueAndForget(()=>hg(o,y));const C=w.docs.has(h);!C&&w.fromCache?m.reject(new ee(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&w.fromCache&&d&&d.source==="server"?m.reject(new ee(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),y=new fg(id(h.path),v,{includeMetadataChanges:!0,ka:!0});return cg(o,y)}(await Sh(t),t.asyncQueue,e,n,i)),i.promise}function tO(t,e,n={}){const i=new br;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,m){const v=new gg({next:w=>{v.Ou(),l.enqueueAndForget(()=>hg(o,y)),w.fromCache&&d.source==="server"?m.reject(new ee(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),y=new fg(h,v,{includeMetadataChanges:!0,ka:!0});return cg(o,y)}(await Sh(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="firestore.googleapis.com",Oy=!0;class Ny{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fI,this.ssl=Oy}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Oy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qx)throw new ee(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ee(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ee(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ee(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hd{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ny({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ny(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new AR;switch(i.type){case"firstParty":return new xR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ee(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Ly.get(n);i&&(ne("ComponentProvider","Removing Datastore"),Ly.delete(n),i.terminate())}(this),Promise.resolve()}}function nO(t,e,n,i={}){var s;t=Dr(t,hd);const o=Ns(e),l=t._getSettings(),h=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&(xm(`https://${d}`),Lm("Firestore",!0)),l.host!==fI&&l.host!==d&&Ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:d,ssl:o,emulatorOptions:i});if(!Cs(m,h)&&(t._setSettings(m),i.mockUserToken)){let v,y;if(typeof i.mockUserToken=="string")v=i.mockUserToken,y=Ut.MOCK_USER;else{v=_E(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new ee(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Ut(w)}t._authCredentials=new CR(new uT(v,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Yi(this.firestore,e,this._query)}}class wt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(au(n,wt._jsonSchema))return new wt(e,i||null,new ae(He.fromString(n.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:yt("string",wt._jsonSchemaVersion),referencePath:yt("string")};class Mr extends Yi{constructor(e,n,i){super(e,n,id(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new ae(e))}withConverter(e){return new Mr(this.firestore,e,this._path)}}function kp(t,e,...n){if(t=$t(t),hT("collection","path",e),t instanceof hd){const i=He.fromString(e,...n);return qv(i),new Mr(t,null,i)}{if(!(t instanceof wt||t instanceof Mr))throw new ee(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(He.fromString(e,...n));return qv(i),new Mr(t.firestore,null,i)}}function iO(t,e,...n){if(t=$t(t),arguments.length===1&&(e=$m.newId()),hT("doc","path",e),t instanceof hd){const i=He.fromString(e,...n);return Wv(i),new wt(t,null,new ae(i))}{if(!(t instanceof wt||t instanceof Mr))throw new ee(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(He.fromString(e,...n));return Wv(i),new wt(t.firestore,t instanceof Mr?t.converter:null,new ae(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="AsyncQueue";class Dy{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new eI(this,"async_queue_retry"),this.oc=()=>{const i=af();i&&ne(by,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=af();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=af();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new br;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!aa(e))throw e;ne(by,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Ki("INTERNAL UNHANDLED ERROR: ",My(i)),i}).then(i=>(this.nc=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=ug.createAndSchedule(this,e,n,i,o=>this.lc(o));return this.ec.push(s),s}ac(){this.tc&&_e(47125,{hc:My(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function My(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Ql extends hd{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Dy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dy(e),this._firestoreClient=void 0,await e}}}function pI(t,e){const n=typeof t=="object"?t:Dm(),i=typeof t=="string"?t:_h,s=Gh(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=pE("firestore");o&&nO(s,...o)}return s}function _g(t){if(t._terminated)throw new ee(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rO(t),t._firestoreClient}function rO(t){var e,n,i;const s=t._freezeSettings(),o=function(h,d,m,v){return new GR(h,d,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,dI(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new YL(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(Mt.fromBase64String(e))}catch(n){throw new ee(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(au(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:yt("string",Ln._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vi._jsonSchemaVersion}}static fromJSON(e){if(au(e,vi._jsonSchema))return new vi(e.latitude,e.longitude)}}vi._jsonSchemaVersion="firestore/geoPoint/1.0",vi._jsonSchema={type:yt("string",vi._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(au(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new yi(e.vectorValues);throw new ee(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:yt("string",yi._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=/^__.*__$/;function _I(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:t})}}class vg{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new vg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.fc(e),s}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Rp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(_I(this.Ec)&&sO.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class oO{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ud(e)}Dc(e,n,i,s=!1){return new vg({Ec:e,methodName:n,bc:i,path:Ht.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function aO(t){const e=t._freezeSettings(),n=ud(t._databaseId);return new oO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lO(t,e,n,i=!1){return yg(n,t.Dc(i?4:3,e))}function yg(t,e){if(vI(t=$t(t)))return cO("Unsupported field value:",e,t),uO(t,e);if(t instanceof gI)return function(i,s){if(!_I(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=yg(h,s.yc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=$t(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gx(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ye.fromDate(i);return{timestampValue:Ep(s.serializer,o)}}if(i instanceof Ye){const o=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ep(s.serializer,o)}}if(i instanceof vi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ln)return{bytesValue:jT(s.serializer,i._byteString)};if(i instanceof wt){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:HT(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof yi)return function(l,h){return{mapValue:{fields:{[wT]:{stringValue:ET},[vh]:{arrayValue:{values:l.toArray().map(m=>{if(typeof m!="number")throw h.wc("VectorValues must only contain numeric values.");return Ym(h.serializer,m)})}}}}}}(i,s);throw s.wc(`Unsupported field value: ${Xh(i)}`)}(t,e)}function uO(t,e){const n={};return pT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):la(t,(i,s)=>{const o=yg(s,e.Vc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function vI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof vi||t instanceof Ln||t instanceof wt||t instanceof gI||t instanceof yi)}function cO(t,e,n){if(!vI(n)||!dT(n)){const i=Xh(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}const hO=new RegExp("[~\\*/\\[\\]]");function dO(t,e,n){if(e.search(hO)>=0)throw Rp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mI(...e.split("."))._internalPath}catch{throw Rp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rp(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new ee(Z.INVALID_ARGUMENT,h+t+d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fO extends yI{data(){return super.data()}}function dd(t,e){return typeof e=="string"?dO(t,e):e instanceof mI?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wg{}class Eg extends wg{}function xp(t,e,...n){let i=[];e instanceof wg&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof Tg).length,h=o.filter(d=>d instanceof fd).length;if(l>1||l>0&&h>0)throw new ee(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class fd extends Eg{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new fd(e,n,i)}_apply(e){const n=this._parse(e);return EI(e._query,n),new Yi(e.firestore,e.converter,_p(e._query,n))}_parse(e){const n=aO(e.firestore);return function(o,l,h,d,m,v,y){let w;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ee(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){zy(y,v);const M=[];for(const V of y)M.push(Fy(d,o,V));w={arrayValue:{values:M}}}else w=Fy(d,o,y)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||zy(y,v),w=lO(h,l,y,v==="in"||v==="not-in");return vt.create(m,v,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function al(t,e,n){const i=e,s=dd("where",t);return fd._create(s,i,n)}class Tg extends wg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Tg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ni.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)EI(l,d),l=_p(l,d)}(e._query,n),new Yi(e.firestore,e.converter,_p(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ig extends Eg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ig(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new ee(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ee(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kl(o,l)}(e._query,this._field,this._direction);return new Yi(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new ua(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Lp(t,e="asc"){const n=e,i=dd("orderBy",t);return Ig._create(i,n)}class Pg extends Eg{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Pg(e,n,i)}_apply(e){return new Yi(e.firestore,e.converter,wh(e._query,this._limit,this._limitType))}}function Op(t){return Pg._create("limit",t,"F")}function Fy(t,e,n){if(typeof(n=$t(n))=="string"){if(n==="")throw new ee(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kT(e)&&n.indexOf("/")!==-1)throw new ee(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(He.fromString(n));if(!ae.isDocumentKey(i))throw new ee(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Jv(t,new ae(i))}if(n instanceof wt)return Jv(t,n._key);throw new ee(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xh(n)}.`)}function zy(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EI(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class pO{convertValue(e,n="none"){switch(Wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return la(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,s;const o=(s=(i=(n=e.fields)===null||n===void 0?void 0:n[vh].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(l=>ut(l.doubleValue));return new yi(o)}convertGeoPoint(e){return new vi(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=nd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp($l(e));default:return null}}convertTimestamp(e){const n=jr(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=He.fromString(e);nt(KT(i),9688,{name:e});const s=new Gl(i.get(1),i.get(3)),o=new ae(i.popFirst(5));return s.isEqual(n)||Ki(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}class ll{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ws extends yI{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(dd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ws._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",ws._jsonSchema={type:yt("string",ws._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Dc extends ws{data(e={}){return super.data(e)}}class Es{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ll(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Dc(this._firestore,this._userDataWriter,i.key,i,new ll(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new Dc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new ll(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new Dc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new ll(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return h.type!==0&&(m=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),v=l.indexOf(h.doc.key)),{type:mO(h.type),doc:d,oldIndex:m,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Es._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$m.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t){t=Dr(t,wt);const e=Dr(t.firestore,Ql);return eO(_g(e),t._key).then(n=>TI(e,t,n))}Es._jsonSchemaVersion="firestore/querySnapshot/1.0",Es._jsonSchema={type:yt("string",Es._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class Sg extends pO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}function Uy(t){t=Dr(t,Yi);const e=Dr(t.firestore,Ql),n=_g(e),i=new Sg(e);return wI(t._query),tO(n,t._query).then(s=>new Es(e,i,t,s))}function _O(t,...e){var n,i,s;t=$t(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||Vy(e[l])||(o=e[l++]);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Vy(e[l])){const y=e[l];e[l]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[l+1]=(i=y.error)===null||i===void 0?void 0:i.bind(y),e[l+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let d,m,v;if(t instanceof wt)m=Dr(t.firestore,Ql),v=id(t._key.path),d={next:y=>{e[l]&&e[l](TI(m,t,y))},error:e[l+1],complete:e[l+2]};else{const y=Dr(t,Yi);m=Dr(y.firestore,Ql),v=y._query;const w=new Sg(m);d={next:C=>{e[l]&&e[l](new Es(m,w,y,C))},error:e[l+1],complete:e[l+2]},wI(t._query)}return function(w,C,M,V){const H=new gg(V),k=new fg(C,H,M);return w.asyncQueue.enqueueAndForget(async()=>cg(await Sh(w),k)),()=>{H.Ou(),w.asyncQueue.enqueueAndForget(async()=>hg(await Sh(w),k))}}(_g(m),v,h,d)}function TI(t,e,n){const i=n.docs.get(e._key),s=new Sg(t);return new ws(t,s,e._key,i,new ll(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){oa=s})(bs),ks(new zr("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new Ql(new kR(i.getProvider("auth-internal")),new LR(l,i.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ee(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(m.options.projectId,v)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),pi(zv,Uv,e),pi(zv,Uv,"esm2017")})();const Ah={apiKey:"AIzaSyD8G2ge10c_2JJfPvfct8Xj-yFv3liYCQU",authDomain:"milemend-9ed78.firebaseapp.com",projectId:"milemend-9ed78",storageBucket:"milemend-9ed78.firebasestorage.app",messagingSenderId:"716788069394",appId:"1:716788069394:web:936abea7dacf9e7413d4cb"};var Np={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(rP,function(n){var i="1.9.4";function s(r){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function m(r,a,c){var f,g,E,x;return x=function(){f=!1,g&&(E.apply(c,g),g=!1)},E=function(){f?g=arguments:(r.apply(c,arguments),setTimeout(x,a),f=!0)},E}function v(r,a,c){var f=a[1],g=a[0],E=f-g;return r===f&&c?r:((r-g)%E+E)%E+g}function y(){return!1}function w(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function C(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function M(r){return C(r).split(/\s+/)}function V(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function H(r,a,c){var f=[];for(var g in r)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function P(r,a){return r.replace(k,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var N=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function U(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function K(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var A=0;function I(r){var a=+new Date,c=Math.max(0,16-(a-A));return A=a+c,window.setTimeout(r,c)}var S=window.requestAnimationFrame||K("RequestAnimationFrame")||I,R=window.cancelAnimationFrame||K("CancelAnimationFrame")||K("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function b(r,a,c){if(c&&S===I)r.call(a);else return S.call(window,l(r,a))}function D(r){r&&R.call(window,r)}var O={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:m,wrapNum:v,falseFn:y,formatNum:w,trim:C,splitWords:M,setOptions:V,getParamString:H,template:P,isArray:N,indexOf:U,emptyImageUrl:Y,requestFn:S,cancelFn:R,requestAnimFrame:b,cancelAnimFrame:D};function Me(){}Me.extend=function(r){var a=function(){V(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(Mn(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,x=f._initHooks.length;E<x;E++)f._initHooks[E].call(this)}},a},Me.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},Me.mergeOptions=function(r){return s(this.prototype.options,r),this},Me.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Mn(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=N(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ge={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=M(r);for(var g=0,E=r.length;g<E;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=M(r);for(var g=arguments.length===1,E=0,x=r.length;E<x;E++)g?this._off(r[E]):this._off(r[E],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var f,g,E;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,E=f.length;g<E;g++)f[g].fn=y;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var x=this._listens(r,a,c);if(x!==!1){var z=f[x];this._firingCount&&(z.fn=y,this._events[r]=f=f.slice()),f.splice(x,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var E=0,x=g.length;E<x;E++){var z=g[E],B=z.fn;z.once&&this.off(r,B,z.ctx),B.call(z.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var E=this._events&&this._events[r];if(E&&E.length&&this._listens(r,g,c)!==!1)return!0;if(f){for(var x in this._eventParents)if(this._eventParents[x].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,E=f.length;g<E;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=M(r);for(var g=0,E=r.length;g<E;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};Ge.addEventListener=Ge.on,Ge.removeEventListener=Ge.clearAllEventListeners=Ge.off,Ge.addOneTimeEventListener=Ge.once,Ge.fireEvent=Ge.fire,Ge.hasEventListeners=Ge.listens;var Pt=Me.extend(Ge);function W(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var le=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(r){return this.clone()._add(X(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(X(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new W(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new W(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(r){r=X(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=X(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=X(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function X(r,a,c){return r instanceof W?r:N(r)?new W(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new W(r.x,r.y):new W(r,a,c)}function ue(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}ue.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof W||typeof r[0]=="number"||"x"in r)a=c=X(r);else if(r=me(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof W?r=X(r):r=me(r),r instanceof ue?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=me(r);var a=this.min,c=this.max,f=r.min,g=r.max,E=g.x>=a.x&&f.x<=c.x,x=g.y>=a.y&&f.y<=c.y;return E&&x},overlaps:function(r){r=me(r);var a=this.min,c=this.max,f=r.min,g=r.max,E=g.x>a.x&&f.x<c.x,x=g.y>a.y&&f.y<c.y;return E&&x},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return me(X(a.x-f,a.y-g),X(c.x+f,c.y+g))},equals:function(r){return r?(r=me(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function me(r,a){return!r||r instanceof ue?r:new ue(r,a)}function we(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}we.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,g;if(r instanceof ye)f=r,g=r;else if(r instanceof we){if(f=r._southWest,g=r._northEast,!f||!g)return this}else return r?this.extend(fe(r)||De(r)):this;return!a&&!c?(this._southWest=new ye(f.lat,f.lng),this._northEast=new ye(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new we(new ye(a.lat-f,a.lng-g),new ye(c.lat+f,c.lng+g))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof ye||"lat"in r?r=fe(r):r=De(r);var a=this._southWest,c=this._northEast,f,g;return r instanceof we?(f=r.getSouthWest(),g=r.getNorthEast()):f=g=r,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=De(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),E=g.lat>=a.lat&&f.lat<=c.lat,x=g.lng>=a.lng&&f.lng<=c.lng;return E&&x},overlaps:function(r){r=De(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),E=g.lat>a.lat&&f.lat<c.lat,x=g.lng>a.lng&&f.lng<c.lng;return E&&x},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=De(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function De(r,a){return r instanceof we?r:new we(r,a)}function ye(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}ye.prototype={equals:function(r,a){if(!r)return!1;r=fe(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+w(this.lat,r)+", "+w(this.lng,r)+")"},distanceTo:function(r){return cn.distance(this,fe(r))},wrap:function(){return cn.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return De([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function fe(r,a,c){return r instanceof ye?r:N(r)&&typeof r[0]!="object"?r.length===3?new ye(r[0],r[1],r[2]):r.length===2?new ye(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new ye(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new ye(r,a,c)}var rt={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new ue(f,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new ye(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return r;var E=r.getSouthWest(),x=r.getNorthEast(),z=new ye(E.lat-f,E.lng-g),B=new ye(x.lat-f,x.lng-g);return new we(z,B)}},cn=s({},rt,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,g=a.lat*c,E=Math.sin((a.lat-r.lat)*c/2),x=Math.sin((a.lng-r.lng)*c/2),z=E*E+Math.cos(f)*Math.cos(g)*x*x,B=2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z));return this.R*B}}),re=6378137,Se={R:re,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),g=Math.sin(f*a);return new W(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new ye((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=re*Math.PI;return new ue([-r,-r],[r,r])}()};function ze(r,a,c,f){if(N(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}ze.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new W((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function ke(r,a,c,f){return new ze(r,a,c,f)}var Re=s({},cn,{code:"EPSG:3857",projection:Se,transformation:function(){var r=.5/(Math.PI*Se.R);return ke(r,.5,-r,.5)}()}),dt=s({},Re,{code:"EPSG:900913"});function at(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Jt(r,a){var c="",f,g,E,x,z,B;for(f=0,E=r.length;f<E;f++){for(z=r[f],g=0,x=z.length;g<x;g++)B=z[g],c+=(g?"L":"M")+B.x+" "+B.y;c+=a?oe.svg?"z":"x":""}return c||"M0 0"}var Vn=document.documentElement.style,Fn="ActiveXObject"in window,zn=Fn&&!document.addEventListener,Un="msLaunchUri"in navigator&&!("documentMode"in document),Xi=wn("webkit"),Vs=wn("android"),Fs=wn("android 2")||wn("android 3"),ha=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),du=Vs&&wn("Google")&&ha<537&&!("AudioNode"in window),ft=!!window.opera,St=!Un&&wn("chrome"),Yr=wn("gecko")&&!Xi&&!ft&&!Fn,fu=!St&&wn("safari"),da=wn("phantom"),pu="OTransition"in Vn,Xr=navigator.platform.indexOf("Win")===0,fa=Fn&&"transition"in Vn,zs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Fs,Us="MozPerspective"in Vn,gd=!window.L_DISABLE_3D&&(fa||zs||Us)&&!pu&&!da,Jr=typeof orientation<"u"||wn("mobile"),pa=Jr&&Xi,mu=Jr&&zs,ma=!window.PointerEvent&&window.MSPointerEvent,Ji=!!(window.PointerEvent||ma),Bs="ontouchstart"in window||!!window.TouchEvent,ga=!window.L_NO_TOUCH&&(Bs||Ji),Pi=Jr&&ft,gu=Jr&&Yr,js=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,_u=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",y,a),window.removeEventListener("testPassiveEventSupport",y,a)}catch{}return r}(),es=function(){return!!document.createElement("canvas").getContext}(),Hs=!!(document.createElementNS&&at("svg").createSVGRect),Lt=!!Hs&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),vu=!Hs&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),ts=navigator.platform.indexOf("Mac")===0,ns=navigator.platform.indexOf("Linux")===0;function wn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var oe={ie:Fn,ielt9:zn,edge:Un,webkit:Xi,android:Vs,android23:Fs,androidStock:du,opera:ft,chrome:St,gecko:Yr,safari:fu,phantom:da,opera12:pu,win:Xr,ie3d:fa,webkit3d:zs,gecko3d:Us,any3d:gd,mobile:Jr,mobileWebkit:pa,mobileWebkit3d:mu,msPointer:ma,pointer:Ji,touch:ga,touchNative:Bs,mobileOpera:Pi,mobileGecko:gu,retina:js,passiveEvents:_u,canvas:es,svg:Hs,vml:vu,inlineSvg:Lt,mac:ts,linux:ns},Si=oe.msPointer?"MSPointerDown":"pointerdown",yu=oe.msPointer?"MSPointerMove":"pointermove",wu=oe.msPointer?"MSPointerUp":"pointerup",is=oe.msPointer?"MSPointerCancel":"pointercancel",Ws={touchstart:Si,touchmove:yu,touchend:wu,touchcancel:is},qs={touchstart:Gs,touchmove:$s,touchend:$s,touchcancel:$s},Bn={},jn=!1;function Eu(r,a,c){return a==="touchstart"&&Iu(),qs[a]?(c=qs[a].bind(this,c),r.addEventListener(Ws[a],c,!1),c):(console.warn("wrong event specified:",a),y)}function Tu(r,a,c){if(!Ws[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(Ws[a],c,!1)}function _a(r){Bn[r.pointerId]=r}function va(r){Bn[r.pointerId]&&(Bn[r.pointerId]=r)}function ya(r){delete Bn[r.pointerId]}function Iu(){jn||(document.addEventListener(Si,_a,!0),document.addEventListener(yu,va,!0),document.addEventListener(wu,ya,!0),document.addEventListener(is,ya,!0),jn=!0)}function $s(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Bn)a.touches.push(Bn[c]);a.changedTouches=[a],r(a)}}function Gs(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&Xe(a),$s(r,a)}function Pu(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var wa=200;function rs(r,a){r.addEventListener("dblclick",a);var c=0,f;function g(E){if(E.detail!==1){f=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var x=Oa(E);if(!(x.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!x.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var z=Date.now();z-c<=wa?(f++,f===2&&a(Pu(E))):f=1,c=z}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function Ai(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var ss=ki(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),os=ki(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ea=os==="webkitTransition"||os==="OTransition"?os+"End":"transitionend";function Ta(r){return typeof r=="string"?document.getElementById(r):r}function er(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function Ae(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function je(r){var a=r.parentNode;a&&a.removeChild(r)}function as(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Ci(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function tr(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function Ia(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=En(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function ve(r,a){if(r.classList!==void 0)for(var c=M(a),f=0,g=c.length;f<g;f++)r.classList.add(c[f]);else if(!Ia(r,a)){var E=En(r);Pa(r,(E?E+" ":"")+a)}}function Ze(r,a){r.classList!==void 0?r.classList.remove(a):Pa(r,C((" "+En(r)+" ").replace(" "+a+" "," ")))}function Pa(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function En(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function st(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Zs(r,a)}function Zs(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function ki(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function ii(r,a,c){var f=a||new W(0,0);r.style[ss]=(oe.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function pe(r,a){r._leaflet_pos=a,oe.any3d?ii(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function Tn(r){return r._leaflet_pos||new W(0,0)}var Hn,Wn,Sa;if("onselectstart"in document)Hn=function(){ce(window,"selectstart",Xe)},Wn=function(){Ue(window,"selectstart",Xe)};else{var nr=ki(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Hn=function(){if(nr){var r=document.documentElement.style;Sa=r[nr],r[nr]="none"}},Wn=function(){nr&&(document.documentElement.style[nr]=Sa,Sa=void 0)}}function Aa(){ce(window,"dragstart",Xe)}function Ca(){Ue(window,"dragstart",Xe)}var Ks,ka;function Ri(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(hn(),Ks=r,ka=r.style.outlineStyle,r.style.outlineStyle="none",ce(window,"keydown",hn))}function hn(){Ks&&(Ks.style.outlineStyle=ka,Ks=void 0,ka=void 0,Ue(window,"keydown",hn))}function Ra(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Qs(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Su={__proto__:null,TRANSFORM:ss,TRANSITION:os,TRANSITION_END:Ea,get:Ta,getStyle:er,create:Ae,remove:je,empty:as,toFront:Ci,toBack:tr,hasClass:Ia,addClass:ve,removeClass:Ze,setClass:Pa,getClass:En,setOpacity:st,testProp:ki,setTransform:ii,setPosition:pe,getPosition:Tn,get disableTextSelection(){return Hn},get enableTextSelection(){return Wn},disableImageDrag:Aa,enableImageDrag:Ca,preventOutline:Ri,restoreOutline:hn,getSizedParentNode:Ra,getScale:Qs};function ce(r,a,c,f){if(a&&typeof a=="object")for(var g in a)xa(r,g,a[g],c);else{a=M(a);for(var E=0,x=a.length;E<x;E++)xa(r,a[E],c,f)}return this}var In="_leaflet_events";function Ue(r,a,c,f){if(arguments.length===1)Au(r),delete r[In];else if(a&&typeof a=="object")for(var g in a)La(r,g,a[g],c);else if(a=M(a),arguments.length===2)Au(r,function(z){return U(a,z)!==-1});else for(var E=0,x=a.length;E<x;E++)La(r,a[E],c,f);return this}function Au(r,a){for(var c in r[In]){var f=c.split(/\d/)[0];(!a||a(f))&&La(r,f,null,null,c)}}var Pn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function xa(r,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(r[In]&&r[In][g])return this;var E=function(z){return c.call(f||r,z||window.event)},x=E;!oe.touchNative&&oe.pointer&&a.indexOf("touch")===0?E=Eu(r,a,E):oe.touch&&a==="dblclick"?E=rs(r,E):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(Pn[a]||a,E,oe.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(E=function(z){z=z||window.event,Na(r,z)&&x(z)},r.addEventListener(Pn[a],E,!1)):r.addEventListener(a,x,!1):r.attachEvent("on"+a,E),r[In]=r[In]||{},r[In][g]=E}function La(r,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var E=r[In]&&r[In][g];if(!E)return this;!oe.touchNative&&oe.pointer&&a.indexOf("touch")===0?Tu(r,a,E):oe.touch&&a==="dblclick"?Ai(r,E):"removeEventListener"in r?r.removeEventListener(Pn[a]||a,E,!1):r.detachEvent("on"+a,E),r[In][g]=null}function Sn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function ir(r){return xa(r,"wheel",Sn),this}function rr(r){return ce(r,"mousedown touchstart dblclick contextmenu",Sn),r._leaflet_disable_click=!0,this}function Xe(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function dn(r){return Xe(r),Sn(r),this}function Oa(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function Ys(r,a){if(!a)return new W(r.clientX,r.clientY);var c=Qs(a),f=c.boundingClientRect;return new W((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var Ke=oe.linux&&oe.chrome?window.devicePixelRatio:oe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Cu(r){return oe.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Ke:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Na(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var ku={__proto__:null,on:ce,off:Ue,stopPropagation:Sn,disableScrollPropagation:ir,disableClickPropagation:rr,preventDefault:Xe,stop:dn,getPropagationPath:Oa,getMousePosition:Ys,getWheelDelta:Cu,isExternalTarget:Na,addListener:ce,removeListener:Ue},ba=Pt.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=Tn(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=b(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),pe(this._el,c),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Ie=Pt.extend({options:{crs:Re,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=V(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(fe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=os&&oe.any3d&&!oe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ce(this._proxy,Ea,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(fe(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),E=r instanceof W?r:this.latLngToContainerPoint(r),x=E.subtract(g).multiplyBy(1-1/f),z=this.containerPointToLatLng(g.add(x));return this.setView(z,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():De(r);var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var E=f.subtract(c).divideBy(2),x=this.project(r.getSouthWest(),g),z=this.project(r.getNorthEast(),g),B=this.unproject(x.add(z).divideBy(2).add(E),g);return{center:B,zoom:g}},fitBounds:function(r,a){if(r=De(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=X(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ba,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ve(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!oe.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(r),E=this.getSize(),x=this._zoom;r=fe(r),a=a===void 0?x:a;var z=Math.max(E.x,E.y),B=z*this.getZoomScale(x,a),G=g.distanceTo(f)||1,te=1.42,he=te*te;function Ee(mt){var Wu=mt?-1:1,eP=mt?B:z,tP=B*B-z*z+Wu*he*he*G*G,nP=2*eP*he*G,Id=tP/nP,Yg=Math.sqrt(Id*Id+1)-Id,iP=Yg<1e-9?-18:Math.log(Yg);return iP}function Zt(mt){return(Math.exp(mt)-Math.exp(-mt))/2}function Ct(mt){return(Math.exp(mt)+Math.exp(-mt))/2}function Cn(mt){return Zt(mt)/Ct(mt)}var tn=Ee(0);function co(mt){return z*(Ct(tn)/Ct(tn+te*mt))}function QI(mt){return z*(Ct(tn)*Cn(tn+te*mt)-Zt(tn))/he}function YI(mt){return 1-Math.pow(1-mt,1.5)}var XI=Date.now(),Kg=(Ee(1)-tn)/te,JI=c.duration?1e3*c.duration:1e3*Kg*.8;function Qg(){var mt=(Date.now()-XI)/JI,Wu=YI(mt)*Kg;mt<=1?(this._flyToFrame=b(Qg,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(QI(Wu)/G)),x),this.getScaleZoom(z/co(Wu),x),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Qg.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=De(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,De(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),E=this.project(r),x=this.getPixelBounds(),z=me([x.min.add(c),x.max.subtract(f)]),B=z.getSize();if(!z.contains(E)){this._enforcingBounds=!0;var G=E.subtract(z.getCenter()),te=z.extend(E).getSize().subtract(B);g.x+=G.x<0?-te.x:te.x,g.y+=G.y<0?-te.y:te.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),E=f.subtract(g);return!E.x&&!E.y?this:(r.animate&&r.pan?this.panBy(E):(r.pan&&this._rawPanBy(E),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new ye(a,c),g=f.toBounds(r.coords.accuracy*2),E=this._locateOptions;if(E.setView){var x=this.getBoundsZoom(g);this.setView(f,E.maxZoom?Math.min(x,E.maxZoom):x)}var z={latlng:f,bounds:g,timestamp:r.timestamp};for(var B in r.coords)typeof r.coords[B]=="number"&&(z[B]=r.coords[B]);this.fire("locationfound",z)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)je(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=Ae("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new we(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=De(r),c=X(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),E=this.getMaxZoom(),x=r.getNorthWest(),z=r.getSouthEast(),B=this.getSize().subtract(c),G=me(this.project(z,f),this.project(x,f)).getSize(),te=oe.any3d?this.options.zoomSnap:1,he=B.x/G.x,Ee=B.y/G.y,Zt=a?Math.max(he,Ee):Math.min(he,Ee);return f=this.getScaleZoom(Zt,f),te&&(f=Math.round(f/(te/100))*(te/100),f=a?Math.ceil(f/te)*te:Math.floor(f/te)*te),Math.max(g,Math.min(E,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new ue(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(fe(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(r),a)},layerPointToLatLng:function(r){var a=X(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(fe(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(fe(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(De(r))},distance:function(r,a){return this.options.crs.distance(fe(r),fe(a))},containerPointToLayerPoint:function(r){return X(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return X(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(X(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(r)))},mouseEventToContainerPoint:function(r){return Ys(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=Ta(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ce(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&oe.any3d,ve(r,"leaflet-container"+(oe.touch?" leaflet-touch":"")+(oe.retina?" leaflet-retina":"")+(oe.ielt9?" leaflet-oldie":"")+(oe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=er(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),pe(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ve(r.markerPane,"leaflet-zoom-hide"),ve(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){pe(this._mapPane,new W(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){pe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?Ue:ce;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),oe.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=b(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",E=r.target||r.srcElement,x=!1;E;){if(f=this._targets[d(E)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){x=!0;break}if(f&&f.listens(a,!0)&&(g&&!Na(E,r)||(c.push(f),g))||E===this._container)break;E=E.parentNode}return!c.length&&!x&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&Ri(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(r,a);if(c){for(var E=[],x=0;x<c.length;x++)c[x].listens(a,!0)&&E.push(c[x]);g=E.concat(g)}if(g.length){a==="contextmenu"&&Xe(r);var z=g[0],B={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var G=z.getLatLng&&(!z._radius||z._radius<=10);B.containerPoint=G?this.latLngToContainerPoint(z.getLatLng()):this.mouseEventToContainerPoint(r),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=G?z.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(x=0;x<g.length;x++)if(g[x].fire(a,B,!0),B.originalEvent._stopped||g[x].options.bubblingMouseEvents===!1&&U(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return Tn(this._mapPane)||new W(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return me([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),g=this.getSize().divideBy(2),E=new ue(f.subtract(g),f.add(g)),x=this._getBoundsOffset(E,c,a);return Math.abs(x.x)<=1&&Math.abs(x.y)<=1?r:this.unproject(f.add(x),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new ue(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=me(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(r.min),E=f.max.subtract(r.max),x=this._rebound(g.x,-E.x),z=this._rebound(g.y,-E.y);return new W(x,z)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=oe.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=ss,f=this._proxy.style[c];ii(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();ii(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(b(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Xs(r,a){return new Ie(r,a)}var en=Me.extend({options:{position:"topright"},initialize:function(r){V(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return ve(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Gt=function(r){return new en(r)};Ie.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Ae("div",a+"control-container",this._container);function f(g,E){var x=a+g+" "+a+E;r[g+E]=Ae("div",x,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)je(this._controlCorners[r]);je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Da=en.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){V(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return en.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Ae("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),rr(a),ir(a);var f=this._section=Ae("section",r+"-list");c&&(this._map.on("click",this.collapse,this),ce(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Ae("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),ce(g,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){Xe(E),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Ae("div",r+"-base",f),this._separator=Ae("div",r+"-separator",f),this._overlaysList=Ae("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;as(this._baseLayersList),as(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),ce(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var E=document.createElement("span");a.appendChild(E),E.appendChild(f),E.appendChild(g);var x=r.overlay?this._overlaysList:this._baseLayersList;return x.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var E=r.length-1;E>=0;E--)a=r[E],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(E=0;E<g.length;E++)this._map.hasLayer(g[E])&&this._map.removeLayer(g[E]);for(E=0;E<f.length;E++)this._map.hasLayer(f[E])||this._map.addLayer(f[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ce(r,"click",Xe),this.expand();var a=this;setTimeout(function(){Ue(r,"click",Xe),a._preventClick=!1})}}),_d=function(r,a,c){return new Da(r,a,c)},xi=en.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Ae("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,g){var E=Ae("a",c,f);return E.innerHTML=r,E.href="#",E.title=a,E.setAttribute("role","button"),E.setAttribute("aria-label",a),rr(E),ce(E,"click",dn),ce(E,"click",g,this),ce(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";Ze(this._zoomInButton,a),Ze(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(ve(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(ve(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ie.mergeOptions({zoomControl:!0}),Ie.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new xi,this.addControl(this.zoomControl))});var Ru=function(r){return new xi(r)},Js=en.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Ae("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Ae("div",a,c)),r.imperial&&(this._iScale=Ae("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),eo=function(r){return new Js(r)},xu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',sr=en.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(oe.inlineSvg?xu+" ":"")+"Leaflet</a>"},initialize:function(r){V(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Ae("div","leaflet-control-attribution"),rr(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ie.mergeOptions({attributionControl:!0}),Ie.addInitHook(function(){this.options.attributionControl&&new sr().addTo(this)});var vd=function(r){return new sr(r)};en.Layers=Da,en.Zoom=xi,en.Scale=Js,en.Attribution=sr,Gt.layers=_d,Gt.zoom=Ru,Gt.scale=eo,Gt.attribution=vd;var fn=Me.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});fn.addTo=function(r,a){return r.addHandler(a,this),this};var ls={Events:Ge},Ma=oe.touch?"touchstart mousedown":"mousedown",qn=Pt.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){V(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(ce(this._dragStartTarget,Ma,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(qn._dragging===this&&this.finishDrag(!0),Ue(this._dragStartTarget,Ma,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Ia(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){qn._dragging===this&&this.finishDrag();return}if(!(qn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(qn._dragging=this,this._preventOutline&&Ri(this._element),Aa(),Hn(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=Ra(this._element);this._startPoint=new W(a.clientX,a.clientY),this._startPos=Tn(this._element),this._parentScale=Qs(c);var f=r.type==="mousedown";ce(document,f?"mousemove":"touchmove",this._onMove,this),ce(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new W(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,Xe(r),this._moved||(this.fire("dragstart"),this._moved=!0,ve(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),pe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Ze(document.body,"leaflet-dragging"),this._lastTarget&&(Ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ue(document,"mousemove touchmove",this._onMove,this),Ue(document,"mouseup touchend touchcancel",this._onUp,this),Ca(),Wn();var a=this._moved&&this._moving;this._moving=!1,qn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function to(r,a,c){var f,g=[1,4,2,8],E,x,z,B,G,te,he,Ee;for(E=0,te=r.length;E<te;E++)r[E]._code=ri(r[E],a);for(z=0;z<4;z++){for(he=g[z],f=[],E=0,te=r.length,x=te-1;E<te;x=E++)B=r[E],G=r[x],B._code&he?G._code&he||(Ee=At(G,B,he,a,c),Ee._code=ri(Ee,a),f.push(Ee)):(G._code&he&&(Ee=At(G,B,he,a,c),Ee._code=ri(Ee,a),f.push(Ee)),f.push(B));r=f}return r}function no(r,a){var c,f,g,E,x,z,B,G,te;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var he=fe([0,0]),Ee=De(r),Zt=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());Zt<1700&&(he=io(r));var Ct=r.length,Cn=[];for(c=0;c<Ct;c++){var tn=fe(r[c]);Cn.push(a.project(fe([tn.lat-he.lat,tn.lng-he.lng])))}for(z=B=G=0,c=0,f=Ct-1;c<Ct;f=c++)g=Cn[c],E=Cn[f],x=g.y*E.x-E.y*g.x,B+=(g.x+E.x)*x,G+=(g.y+E.y)*x,z+=x*3;z===0?te=Cn[0]:te=[B/z,G/z];var co=a.unproject(X(te));return fe([co.lat+he.lat,co.lng+he.lng])}function io(r){for(var a=0,c=0,f=0,g=0;g<r.length;g++){var E=fe(r[g]);a+=E.lat,c+=E.lng,f++}return fe([a/f,c/f])}var ro={__proto__:null,clipPolygon:to,polygonCenter:no,centroid:io};function Va(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=Ou(r,c),r=Lu(r,c),r}function Fa(r,a,c){return Math.sqrt(An(r,a,c,!0))}function Li(r,a,c){return An(r,a,c)}function Lu(r,a){var c=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,so(r,g,a,0,c-1);var E,x=[];for(E=0;E<c;E++)g[E]&&x.push(r[E]);return x}function so(r,a,c,f,g){var E=0,x,z,B;for(z=f+1;z<=g-1;z++)B=An(r[z],r[f],r[g],!0),B>E&&(x=z,E=B);E>c&&(a[x]=1,so(r,a,c,f,x),so(r,a,c,x,g))}function Ou(r,a){for(var c=[r[0]],f=1,g=0,E=r.length;f<E;f++)Nu(r[f],r[g])>a&&(c.push(r[f]),g=f);return g<E-1&&c.push(r[E-1]),c}var za;function us(r,a,c,f,g){var E=f?za:ri(r,c),x=ri(a,c),z,B,G;for(za=x;;){if(!(E|x))return[r,a];if(E&x)return!1;z=E||x,B=At(r,a,z,c,g),G=ri(B,c),z===E?(r=B,E=G):(a=B,x=G)}}function At(r,a,c,f,g){var E=a.x-r.x,x=a.y-r.y,z=f.min,B=f.max,G,te;return c&8?(G=r.x+E*(B.y-r.y)/x,te=B.y):c&4?(G=r.x+E*(z.y-r.y)/x,te=z.y):c&2?(G=B.x,te=r.y+x*(B.x-r.x)/E):c&1&&(G=z.x,te=r.y+x*(z.x-r.x)/E),new W(G,te,g)}function ri(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function Nu(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function An(r,a,c,f){var g=a.x,E=a.y,x=c.x-g,z=c.y-E,B=x*x+z*z,G;return B>0&&(G=((r.x-g)*x+(r.y-E)*z)/B,G>1?(g=c.x,E=c.y):G>0&&(g+=x*G,E+=z*G)),x=r.x-g,z=r.y-E,f?x*x+z*z:new W(g,E)}function u(r){return!N(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function p(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(r)}function _(r,a){var c,f,g,E,x,z,B,G;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var te=fe([0,0]),he=De(r),Ee=he.getNorthWest().distanceTo(he.getSouthWest())*he.getNorthEast().distanceTo(he.getNorthWest());Ee<1700&&(te=io(r));var Zt=r.length,Ct=[];for(c=0;c<Zt;c++){var Cn=fe(r[c]);Ct.push(a.project(fe([Cn.lat-te.lat,Cn.lng-te.lng])))}for(c=0,f=0;c<Zt-1;c++)f+=Ct[c].distanceTo(Ct[c+1])/2;if(f===0)G=Ct[0];else for(c=0,E=0;c<Zt-1;c++)if(x=Ct[c],z=Ct[c+1],g=x.distanceTo(z),E+=g,E>f){B=(E-f)/g,G=[z.x-B*(z.x-x.x),z.y-B*(z.y-x.y)];break}var tn=a.unproject(X(G));return fe([tn.lat+te.lat,tn.lng+te.lng])}var T={__proto__:null,simplify:Va,pointToSegmentDistance:Fa,closestPointOnSegment:Li,clipSegment:us,_getEdgeIntersection:At,_getBitCode:ri,_sqClosestPointOnSegment:An,isFlat:u,_flat:p,polylineCenter:_},F={project:function(r){return new W(r.lng,r.lat)},unproject:function(r){return new ye(r.y,r.x)},bounds:new ue([-180,-90],[180,90])},j={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ue([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,g=this.R_MINOR/c,E=Math.sqrt(1-g*g),x=E*Math.sin(f),z=Math.tan(Math.PI/4-f/2)/Math.pow((1-x)/(1+x),E/2);return f=-c*Math.log(Math.max(z,1e-10)),new W(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),E=Math.exp(-r.y/c),x=Math.PI/2-2*Math.atan(E),z=0,B=.1,G;z<15&&Math.abs(B)>1e-7;z++)G=g*Math.sin(x),G=Math.pow((1-G)/(1+G),g/2),B=Math.PI/2-2*Math.atan(E*G)-x,x+=B;return new ye(x*a,r.x*a/c)}},J={__proto__:null,LonLat:F,Mercator:j,SphericalMercator:Se},Ve=s({},cn,{code:"EPSG:3395",projection:j,transformation:function(){var r=.5/(Math.PI*j.R);return ke(r,.5,-r,.5)}()}),pt=s({},cn,{code:"EPSG:4326",projection:F,transformation:ke(1/180,1,-1/180,.5)}),xe=s({},rt,{projection:F,transformation:ke(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});rt.Earth=cn,rt.EPSG3395=Ve,rt.EPSG3857=Re,rt.EPSG900913=dt,rt.EPSG4326=pt,rt.Simple=xe;var Be=Pt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ie.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?N(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Je=Be.extend({initialize:function(r,a){V(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),or=function(r,a){return new Je(r,a)},lt=Je.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Je.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Je.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new we;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),oo=function(r,a){return new lt(r,a)},si=Me.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){V(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=X(f),E=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),E&&(r.style.marginLeft=-E.x+"px",r.style.marginTop=-E.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return oe.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function LI(r){return new si(r)}var Ua=si.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Ua.imagePath!="string"&&(Ua.imagePath=this._detectIconPath()),(this.options.imagePath||Ua.imagePath)+si.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,g){var E=f.exec(c);return E&&E[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Ae("div","leaflet-default-icon-path",document.body),a=er(r,"background-image")||er(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),xg=fn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new qn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ve(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,E=Tn(a._icon),x=c.getPixelBounds(),z=c.getPixelOrigin(),B=me(x.min._subtract(z).add(g),x.max._subtract(z).subtract(g));if(!B.contains(E)){var G=X((Math.max(B.max.x,E.x)-B.max.x)/(x.max.x-B.max.x)-(Math.min(B.min.x,E.x)-B.min.x)/(x.min.x-B.min.x),(Math.max(B.max.y,E.y)-B.max.y)/(x.max.y-B.max.y)-(Math.min(B.min.y,E.y)-B.min.y)/(x.min.y-B.min.y)).multiplyBy(f);c.panBy(G,{animate:!1}),this._draggable._newPos._add(G),this._draggable._startPos._add(G),pe(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=b(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=b(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=Tn(a._icon),g=a._map.layerPointToLatLng(f);c&&pe(c,f),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),bu=Be.extend({options:{icon:new Ua,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){V(this,a),this._latlng=fe(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),ve(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ce(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),E=!1;g!==this._shadow&&(this._removeShadow(),E=!0),g&&(ve(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&E&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(this._icon,"focus",this._panOnFocus,this),je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&je(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&pe(this._icon,r),this._shadow&&pe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xg)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xg(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&st(this._icon,r),this._shadow&&st(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),f=a.iconAnchor?X(a.iconAnchor):X(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function OI(r,a){return new bu(r,a)}var ar=Be.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return V(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Du=ar.extend({options:{fill:!0,radius:10},initialize:function(r,a){V(this,a),this._latlng=fe(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return ar.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new ue(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function NI(r,a){return new Du(r,a)}var yd=Du.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),V(this,a),this._latlng=fe(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new we(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:ar.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===cn.distance){var g=Math.PI/180,E=this._mRadius/cn.R/g,x=c.project([a+E,r]),z=c.project([a-E,r]),B=x.add(z).divideBy(2),G=c.unproject(B).lat,te=Math.acos((Math.cos(E*g)-Math.sin(a*g)*Math.sin(G*g))/(Math.cos(a*g)*Math.cos(G*g)))/g;(isNaN(te)||te===0)&&(te=E/Math.cos(Math.PI/180*a)),this._point=B.subtract(c.getPixelOrigin()),this._radius=isNaN(te)?0:B.x-c.project([G,r-te]).x,this._radiusY=B.y-x.y}else{var he=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(he).x}this._updateBounds()}});function bI(r,a,c){return new yd(r,a,c)}var Oi=ar.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){V(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=An,g,E,x=0,z=this._parts.length;x<z;x++)for(var B=this._parts[x],G=1,te=B.length;G<te;G++){g=B[G-1],E=B[G];var he=f(r,g,E,!0);he<a&&(a=he,c=f(r,g,E))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=fe(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new we,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=u(r),f=0,g=r.length;f<g;f++)c?(a[f]=fe(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new ue;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new W(r,r);this._rawPxBounds&&(this._pxBounds=new ue([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof ye,g=r.length,E,x;if(f){for(x=[],E=0;E<g;E++)x[E]=this._map.latLngToLayerPoint(r[E]),c.extend(x[E]);a.push(x)}else for(E=0;E<g;E++)this._projectLatlngs(r[E],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,E,x,z,B;for(c=0,g=0,E=this._rings.length;c<E;c++)for(B=this._rings[c],f=0,x=B.length;f<x-1;f++)z=us(B[f],B[f+1],r,f,!0),z&&(a[g]=a[g]||[],a[g].push(z[0]),(z[1]!==B[f+1]||f===x-2)&&(a[g].push(z[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=Va(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,g,E,x,z,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,E=this._parts.length;c<E;c++)for(z=this._parts[c],f=0,x=z.length,g=x-1;f<x;g=f++)if(!(!a&&f===0)&&Fa(r,z[g],z[f])<=B)return!0;return!1}});function DI(r,a){return new Oi(r,a)}Oi._flat=p;var ao=Oi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return no(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=Oi.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof ye&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){Oi.prototype._setLatLngs.call(this,r),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new W(a,a);if(r=new ue(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,E;f<g;f++)E=to(this._rings[f],r,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,g,E,x,z,B,G;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(E=0,B=this._parts.length;E<B;E++)for(c=this._parts[E],x=0,G=c.length,z=G-1;x<G;z=x++)f=c[x],g=c[z],f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||Oi.prototype._containsPoint.call(this,r,!0)}});function MI(r,a){return new ao(r,a)}var Ni=lt.extend({initialize:function(r,a){V(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=N(r)?r:r.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var E=this.options;if(E.filter&&!E.filter(r))return this;var x=Mu(r,E);return x?(x.feature=zu(r),x.defaultOptions=x.options,this.resetStyle(x),E.onEachFeature&&E.onEachFeature(r,x),this.addLayer(x)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function Mu(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,g=[],E=a&&a.pointToLayer,x=a&&a.coordsToLatLng||wd,z,B,G,te;if(!f&&!c)return null;switch(c.type){case"Point":return z=x(f),Lg(E,r,z,a);case"MultiPoint":for(G=0,te=f.length;G<te;G++)z=x(f[G]),g.push(Lg(E,r,z,a));return new lt(g);case"LineString":case"MultiLineString":return B=Vu(f,c.type==="LineString"?0:1,x),new Oi(B,a);case"Polygon":case"MultiPolygon":return B=Vu(f,c.type==="Polygon"?1:2,x),new ao(B,a);case"GeometryCollection":for(G=0,te=c.geometries.length;G<te;G++){var he=Mu({geometry:c.geometries[G],type:"Feature",properties:r.properties},a);he&&g.push(he)}return new lt(g);case"FeatureCollection":for(G=0,te=c.features.length;G<te;G++){var Ee=Mu(c.features[G],a);Ee&&g.push(Ee)}return new lt(g);default:throw new Error("Invalid GeoJSON object.")}}function Lg(r,a,c,f){return r?r(a,c):new bu(c,f&&f.markersInheritOptions&&f)}function wd(r){return new ye(r[1],r[0],r[2])}function Vu(r,a,c){for(var f=[],g=0,E=r.length,x;g<E;g++)x=a?Vu(r[g],a-1,c):(c||wd)(r[g]),f.push(x);return f}function Ed(r,a){return r=fe(r),r.alt!==void 0?[w(r.lng,a),w(r.lat,a),w(r.alt,a)]:[w(r.lng,a),w(r.lat,a)]}function Fu(r,a,c,f){for(var g=[],E=0,x=r.length;E<x;E++)g.push(a?Fu(r[E],u(r[E])?0:a-1,c,f):Ed(r[E],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function lo(r,a){return r.feature?s({},r.feature,{geometry:a}):zu(a)}function zu(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Td={toGeoJSON:function(r){return lo(this,{type:"Point",coordinates:Ed(this.getLatLng(),r)})}};bu.include(Td),yd.include(Td),Du.include(Td),Oi.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=Fu(this._latlngs,a?1:0,!1,r);return lo(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),ao.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),f=Fu(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),lo(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),Je.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),lo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var E=g.toGeoJSON(r);if(c)f.push(E.geometry);else{var x=zu(E);x.type==="FeatureCollection"?f.push.apply(f,x.features):f.push(x)}}}),c?lo(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Og(r,a){return new Ni(r,a)}var VI=Og,Uu=Be.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=De(a),V(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Ci(this._image),this},bringToBack:function(){return this._map&&tr(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=De(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Ae("img");if(ve(a,"leaflet-image-layer"),this._zoomAnimated&&ve(a,"leaflet-zoom-animated"),this.options.className&&ve(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;ii(this._image,c,a)},_reset:function(){var r=this._image,a=new ue(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();pe(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){st(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),FI=function(r,a,c){return new Uu(r,a,c)},Ng=Uu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Ae("video");if(ve(a,"leaflet-image-layer"),this._zoomAnimated&&ve(a,"leaflet-zoom-animated"),this.options.className&&ve(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var x=Ae("source");x.src=this._url[E],a.appendChild(x)}}});function zI(r,a,c){return new Ng(r,a,c)}var bg=Uu.extend({_initImage:function(){var r=this._image=this._url;ve(r,"leaflet-image-layer"),this._zoomAnimated&&ve(r,"leaflet-zoom-animated"),this.options.className&&ve(r,this.options.className),r.onselectstart=y,r.onmousemove=y}});function UI(r,a,c){return new bg(r,a,c)}var oi=Be.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof ye||N(r))?(this._latlng=fe(r),V(this,a)):(V(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&st(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&st(this._container,1),this.bringToFront(),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(st(this._container,0),this._removeTimeout=setTimeout(l(je,void 0,this._container),200)):je(this._container),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=fe(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ci(this._container),this},bringToBack:function(){return this._map&&tr(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof lt){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?pe(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Ie.include({_initOverlay:function(r,a,c,f){var g=a;return g instanceof r||(g=new r(f).setContent(a)),c&&g.setLatLng(c),g}}),Be.include({_initOverlay:function(r,a,c,f){var g=c;return g instanceof r?(V(g,f),g._source=this):(g=a&&!f?a:new r(f,this),g.setContent(c)),g}});var Bu=oi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,oi.prototype.openOn.call(this,r)},onAdd:function(r){oi.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ar||this._source.on("preclick",Sn))},onRemove:function(r){oi.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ar||this._source.off("preclick",Sn))},getEvents:function(){var r=oi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Ae("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Ae("div",r+"-content-wrapper",a);if(this._contentNode=Ae("div",r+"-content",c),rr(a),ir(this._contentNode),ce(a,"contextmenu",Sn),this._tipContainer=Ae("div",r+"-tip-container",a),this._tip=Ae("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Ae("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',ce(f,"click",function(g){Xe(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,g=this.options.maxHeight,E="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",ve(r,E)):Ze(r,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();pe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(er(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new W(this._containerLeft,-c-this._containerBottom);g._add(Tn(this._container));var E=r.layerPointToContainerPoint(g),x=X(this.options.autoPanPadding),z=X(this.options.autoPanPaddingTopLeft||x),B=X(this.options.autoPanPaddingBottomRight||x),G=r.getSize(),te=0,he=0;E.x+f+B.x>G.x&&(te=E.x+f-G.x+B.x),E.x-te-z.x<0&&(te=E.x-z.x),E.y+c+B.y>G.y&&(he=E.y+c-G.y+B.y),E.y-he-z.y<0&&(he=E.y-z.y),(te||he)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([te,he]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),BI=function(r,a){return new Bu(r,a)};Ie.mergeOptions({closePopupOnClick:!0}),Ie.include({openPopup:function(r,a,c){return this._initOverlay(Bu,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Be.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Bu,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof lt||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){dn(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof ar)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var ju=oi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){oi.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){oi.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=oi.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ae("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,g=this._container,E=f.latLngToContainerPoint(f.getCenter()),x=f.layerPointToContainerPoint(r),z=this.options.direction,B=g.offsetWidth,G=g.offsetHeight,te=X(this.options.offset),he=this._getAnchor();z==="top"?(a=B/2,c=G):z==="bottom"?(a=B/2,c=0):z==="center"?(a=B/2,c=G/2):z==="right"?(a=0,c=G/2):z==="left"?(a=B,c=G/2):x.x<E.x?(z="right",a=0,c=G/2):(z="left",a=B+(te.x+he.x)*2,c=G/2),r=r.subtract(X(a,c,!0)).add(te).add(he),Ze(g,"leaflet-tooltip-right"),Ze(g,"leaflet-tooltip-left"),Ze(g,"leaflet-tooltip-top"),Ze(g,"leaflet-tooltip-bottom"),ve(g,"leaflet-tooltip-"+z),pe(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&st(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),jI=function(r,a){return new ju(r,a)};Ie.include({openTooltip:function(r,a,c){return this._initOverlay(ju,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Be.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ju,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof lt||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(ce(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ce(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var Dg=si.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(as(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=X(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function HI(r){return new Dg(r)}si.Default=Ua;var Ba=Be.extend({options:{tileSize:256,opacity:1,updateWhenIdle:oe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){V(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),je(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ci(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(tr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof W?r:new W(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,g=a.length,E;f<g;f++)E=a[f].style.zIndex,a[f]!==this._container&&E&&(c=r(c,+E));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!oe.ielt9){st(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var E=Math.min(1,(r-g.loaded)/200);st(g.el,E),E<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(D(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(je(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],g=this._map;return f||(f=this._levels[r]={},f.el=Ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,g.getCenter(),g.getZoom()),y(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)je(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var g=Math.floor(r/2),E=Math.floor(a/2),x=c-1,z=new W(+g,+E);z.z=+x;var B=this._tileCoordsToKey(z),G=this._tiles[B];return G&&G.active?(G.retain=!0,!0):(G&&G.loaded&&(G.retain=!0),x>f?this._retainParent(g,E,x,f):!1)},_retainChildren:function(r,a,c,f){for(var g=2*r;g<2*r+2;g++)for(var E=2*a;E<2*a+2;E++){var x=new W(g,E);x.z=c+1;var z=this._tileCoordsToKey(x),B=this._tiles[z];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);c+1<f&&this._retainChildren(g,E,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var E=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||E)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();oe.any3d?ii(r.el,g,f):pe(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),E=a.getSize().divideBy(f*2);return new ue(g.subtract(E),g.add(E))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(f),E=g.getCenter(),x=[],z=this.options.keepBuffer,B=new ue(g.getBottomLeft().subtract([z,-z]),g.getTopRight().add([z,-z]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var G in this._tiles){var te=this._tiles[G].coords;(te.z!==this._tileZoom||!B.contains(new W(te.x,te.y)))&&(this._tiles[G].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var he=g.min.y;he<=g.max.y;he++)for(var Ee=g.min.x;Ee<=g.max.x;Ee++){var Zt=new W(Ee,he);if(Zt.z=this._tileZoom,!!this._isValidTile(Zt)){var Ct=this._tiles[this._tileCoordsToKey(Zt)];Ct?Ct.current=!0:x.push(Zt)}}if(x.sort(function(tn,co){return tn.distanceTo(E)-co.distanceTo(E)}),x.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Cn=document.createDocumentFragment();for(Ee=0;Ee<x.length;Ee++)this._addTile(x[Ee],Cn);this._level.el.appendChild(Cn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return De(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),g=f.add(c),E=a.unproject(f,r.z),x=a.unproject(g,r.z);return[E,x]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new we(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new W(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(je(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){ve(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=y,r.onmousemove=y,oe.ielt9&&this.options.opacity<1&&st(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&b(l(this._tileReady,this,r,null,g)),pe(g,c),this._tiles[f]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(st(c.el,0),D(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(ve(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),oe.ielt9||!this._map._fadeAnimated?b(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new W(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new ue(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function WI(r){return new Ba(r)}var uo=Ba.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=V(this,a),a.detectRetina&&oe.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return ce(c,"load",l(this._tileOnLoad,this,a,c)),ce(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:oe.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return P(this._url,s(a,this.options))},_tileOnLoad:function(r,a){oe.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=y,a.onerror=y,!a.complete)){a.src=Y;var c=this._tiles[r].coords;je(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",Y),Ba.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===Y))return Ba.prototype._tileReady.call(this,r,a,c)}});function Mg(r,a){return new uo(r,a)}var Vg=uo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=V(this,a);var g=a.detectRetina&&oe.retina?2:1,E=this.getTileSize();c.width=E.x*g,c.height=E.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,uo.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=me(c.project(a[0]),c.project(a[1])),g=f.min,E=f.max,x=(this._wmsVersion>=1.3&&this._crs===pt?[g.y,g.x,E.y,E.x]:[g.x,g.y,E.x,E.y]).join(","),z=uo.prototype.getTileUrl.call(this,r);return z+H(this.wmsParams,z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+x},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function qI(r,a){return new Vg(r,a)}uo.WMS=Vg,Mg.wms=qI;var bi=Be.extend({options:{padding:.1},initialize:function(r){V(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),E=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));oe.any3d?ii(this._container,E,c):pe(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new ue(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Fg=bi.extend({options:{tolerance:0},getEvents:function(){var r=bi.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){bi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ce(r,"mousemove",this._onMouseMove,this),ce(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ce(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,je(this._container),Ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){bi.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=oe.retina?2:1;pe(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",oe.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){bi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||b(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ue,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,g,E,x=r._parts,z=x.length,B=this._ctx;if(z){for(B.beginPath(),c=0;c<z;c++){for(f=0,g=x[c].length;f<g;f++)E=x[c][f],B[f?"lineTo":"moveTo"](E.x,E.y);a&&B.closePath()}this._fillStroke(B,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(ve(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function zg(r){return oe.canvas?new Fg(r):null}var ja=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),$I={_initContainer:function(){this._container=Ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(bi.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=ja("shape");ve(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=ja("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;je(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,g=r._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=r._stroke=ja("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=N(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=ja("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){Ci(r._container)},_bringToBack:function(r){tr(r._container)}},Hu=oe.vml?ja:at,Ha=bi.extend({_initContainer:function(){this._container=Hu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Hu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){je(this._container),Ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){bi.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),pe(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Hu("path");r.options.className&&ve(a,r.options.className),r.options.interactive&&ve(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){je(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,Jt(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",E=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,E)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){Ci(r._path)},_bringToBack:function(r){tr(r._path)}});oe.vml&&Ha.include($I);function Ug(r){return oe.svg||oe.vml?new Ha(r):null}Ie.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&zg(r)||Ug(r)}});var Bg=ao.extend({initialize:function(r,a){ao.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=De(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function GI(r,a){return new Bg(r,a)}Ha.create=Hu,Ha.pointsToPath=Jt,Ni.geometryToLayer=Mu,Ni.coordsToLatLng=wd,Ni.coordsToLatLngs=Vu,Ni.latLngToCoords=Ed,Ni.latLngsToCoords=Fu,Ni.getFeature=lo,Ni.asFeature=zu,Ie.mergeOptions({boxZoom:!0});var jg=fn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ce(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Hn(),Aa(),this._startPoint=this._map.mouseEventToContainerPoint(r),ce(document,{contextmenu:dn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Ae("div","leaflet-zoom-box",this._container),ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new ue(this._point,this._startPoint),c=a.getSize();pe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(je(this._box),Ze(this._container,"leaflet-crosshair")),Wn(),Ca(),Ue(document,{contextmenu:dn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new we(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ie.addInitHook("addHandler","boxZoom",jg),Ie.mergeOptions({doubleClickZoom:!0});var Hg=fn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});Ie.addInitHook("addHandler","doubleClickZoom",Hg),Ie.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Wg=fn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new qn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ze(this._map._container,"leaflet-grab"),Ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=De(this._map.options.maxBounds);this._offsetLimit=me(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%r+a-c,E=(f+a+c)%r-a-c,x=Math.abs(g+c)<Math.abs(E+c)?g:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=x},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,x=c.easeLinearity,z=g.multiplyBy(x/E),B=z.distanceTo([0,0]),G=Math.min(c.inertiaMaxSpeed,B),te=z.multiplyBy(G/B),he=G/(c.inertiaDeceleration*x),Ee=te.multiplyBy(-he/2).round();!Ee.x&&!Ee.y?a.fire("moveend"):(Ee=a._limitOffset(Ee,a.options.maxBounds),b(function(){a.panBy(Ee,{duration:he,easeLinearity:x,noMoveStart:!0,animate:!0})}))}}});Ie.addInitHook("addHandler","dragging",Wg),Ie.mergeOptions({keyboard:!0,keyboardPanDelta:80});var qg=fn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ce(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*r,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[r,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,r];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=r;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){ce(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=X(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(X(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;dn(r)}}});Ie.addInitHook("addHandler","keyboard",qg),Ie.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $g=fn.extend({addHooks:function(){ce(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Cu(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),dn(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,E=c?Math.ceil(g/c)*c:g,x=r._limitZoom(a+(this._delta>0?E:-E))-a;this._delta=0,this._startTime=null,x&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+x):r.setZoomAround(this._lastMousePos,a+x))}});Ie.addInitHook("addHandler","scrollWheelZoom",$g);var ZI=600;Ie.mergeOptions({tapHold:oe.touchNative&&oe.safari&&oe.mobile,tapTolerance:15});var Gg=fn.extend({addHooks:function(){ce(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new W(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ce(document,"touchend",Xe),ce(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),ZI),ce(document,"touchend touchcancel contextmenu",this._cancel,this),ce(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Ue(document,"touchend",Xe),Ue(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new W(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ie.addInitHook("addHandler","tapHold",Gg),Ie.mergeOptions({touchZoom:oe.touch,bounceAtZoomLimits:!0});var Zg=fn.extend({addHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),ce(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ce(document,"touchmove",this._onTouchMove,this),ce(document,"touchend touchcancel",this._onTouchEnd,this),Xe(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var E=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&E.x===0&&E.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var x=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=b(x,this,!0),Xe(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ie.addInitHook("addHandler","touchZoom",Zg),Ie.BoxZoom=jg,Ie.DoubleClickZoom=Hg,Ie.Drag=Wg,Ie.Keyboard=qg,Ie.ScrollWheelZoom=$g,Ie.TapHold=Gg,Ie.TouchZoom=Zg,n.Bounds=ue,n.Browser=oe,n.CRS=rt,n.Canvas=Fg,n.Circle=yd,n.CircleMarker=Du,n.Class=Me,n.Control=en,n.DivIcon=Dg,n.DivOverlay=oi,n.DomEvent=ku,n.DomUtil=Su,n.Draggable=qn,n.Evented=Pt,n.FeatureGroup=lt,n.GeoJSON=Ni,n.GridLayer=Ba,n.Handler=fn,n.Icon=si,n.ImageOverlay=Uu,n.LatLng=ye,n.LatLngBounds=we,n.Layer=Be,n.LayerGroup=Je,n.LineUtil=T,n.Map=Ie,n.Marker=bu,n.Mixin=ls,n.Path=ar,n.Point=W,n.PolyUtil=ro,n.Polygon=ao,n.Polyline=Oi,n.Popup=Bu,n.PosAnimation=ba,n.Projection=J,n.Rectangle=Bg,n.Renderer=bi,n.SVG=Ha,n.SVGOverlay=bg,n.TileLayer=uo,n.Tooltip=ju,n.Transformation=ze,n.Util=O,n.VideoOverlay=Ng,n.bind=l,n.bounds=me,n.canvas=zg,n.circle=bI,n.circleMarker=NI,n.control=Gt,n.divIcon=HI,n.extend=s,n.featureGroup=oo,n.geoJSON=Og,n.geoJson=VI,n.gridLayer=WI,n.icon=LI,n.imageOverlay=FI,n.latLng=fe,n.latLngBounds=De,n.layerGroup=or,n.map=Xs,n.marker=OI,n.point=X,n.polygon=MI,n.polyline=DI,n.popup=BI,n.rectangle=GI,n.setOptions=V,n.stamp=d,n.svg=Ug,n.svgOverlay=UI,n.tileLayer=Mg,n.tooltip=jI,n.transformation=ke,n.version=i,n.videoOverlay=zI;var KI=window.L;n.noConflict=function(){return window.L=KI,this},window.L=n})})(Np,Np.exports);var hu=Np.exports;const bp=Qy(hu);function II(t,e){const n=se.useRef(e);se.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const vO=1;function yO(t){return Object.freeze({__version:vO,map:t})}function wO(t,e){return Object.freeze({...t,...e})}const PI=se.createContext(null),SI=PI.Provider;function pd(){const t=se.useContext(PI);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function EO(t){function e(n,i){const{instance:s,context:o}=t(n).current;return se.useImperativeHandle(i,()=>s),n.children==null?null:Pl.createElement(SI,{value:o},n.children)}return se.forwardRef(e)}function TO(t){function e(n,i){const[s,o]=se.useState(!1),{instance:l}=t(n,o).current;se.useImperativeHandle(i,()=>l),se.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?uE.createPortal(n.children,h):null}return se.forwardRef(e)}function IO(t){function e(n,i){const{instance:s}=t(n).current;return se.useImperativeHandle(i,()=>s),null}return se.forwardRef(e)}function Ag(t,e){const n=se.useRef();se.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function md(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function PO(t,e){return function(i,s){const o=pd(),l=t(md(i,o),o);return II(o.map,i.attribution),Ag(l.current,i.eventHandlers),e(l.current,o,i,s),l}}function Cg(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function kg(t,e){return e==null?function(i,s){const o=se.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=se.useRef();o.current||(o.current=t(i,s));const l=se.useRef(i),{instance:h}=o.current;return se.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function AI(t,e){se.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function SO(t){return function(n){const i=pd(),s=t(md(n,i),i);return II(i.map,n.attribution),Ag(s.current,n.eventHandlers),AI(s.current,i),s}}function AO(t,e){const n=se.useRef();se.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function CO(t){return function(n){const i=pd(),s=t(md(n,i),i);return Ag(s.current,n.eventHandlers),AI(s.current,i),AO(s.current,n),s}}function kO(t,e){const n=kg(t),i=PO(n,e);return TO(i)}function RO(t,e){const n=kg(t,e),i=CO(n);return EO(i)}function xO(t,e){const n=kg(t,e),i=SO(n);return IO(i)}function LO(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function CI(){return pd().map}function OO(t){const e=CI();return se.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Dp(){return Dp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Dp.apply(this,arguments)}function NO({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:m,...v},y){const[w]=se.useState({className:s,id:o,style:h}),[C,M]=se.useState(null);se.useImperativeHandle(y,()=>(C==null?void 0:C.map)??null,[C]);const V=se.useCallback(k=>{if(k!==null&&C===null){const P=new hu.Map(k,v);n!=null&&m!=null?P.setView(n,m):t!=null&&P.fitBounds(t,e),d!=null&&P.whenReady(d),M(yO(P))}},[]);se.useEffect(()=>()=>{C==null||C.map.remove()},[C]);const H=C?Pl.createElement(SI,{value:C},i):l??null;return Pl.createElement("div",Dp({},w,{ref:V}),H)}const bO=se.forwardRef(NO),By=RO(function({positions:e,...n},i){const s=new hu.Polyline(e,n);return Cg(s,wO(i,{overlayContainer:s}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),DO=kO(function(e,n){const i=new hu.Popup(e,n.overlayContainer);return Cg(i,n)},function(e,n,{position:i},s){se.useEffect(function(){const{instance:l}=e;function h(m){m.popup===l&&(l.update(),s(!0))}function d(m){m.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var v;n.map.off({popupopen:h,popupclose:d}),(v=n.overlayContainer)==null||v.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),MO=xO(function({url:e,...n},i){const s=new hu.TileLayer(e,md(n,i));return Cg(s,i)},function(e,n,i){LO(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="firebasestorage.googleapis.com",VO="storageBucket",FO=2*60*1e3,zO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Ti{constructor(e,n,i=0){super(uf(e),`Firebase Storage: ${n} (${uf(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ii.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return uf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ei;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ei||(Ei={}));function uf(t){return"storage/"+t}function UO(){const t="An unknown error occurred, please check the error payload for server response.";return new Ii(Ei.UNKNOWN,t)}function BO(){return new Ii(Ei.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jO(){return new Ii(Ei.CANCELED,"User canceled the upload/download.")}function HO(t){return new Ii(Ei.INVALID_URL,"Invalid URL '"+t+"'.")}function WO(t){return new Ii(Ei.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function jy(t){return new Ii(Ei.INVALID_ARGUMENT,t)}function RI(){return new Ii(Ei.APP_DELETED,"The Firebase app was deleted.")}function qO(t){return new Ii(Ei.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Yn.makeFromUrl(e,n)}catch{return new Yn(e,"")}if(i.path==="")return i;throw WO(e)}static makeFromUrl(e,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function o(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const l="(/(.*))?$",h=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function m(U){U.path_=decodeURIComponent(U.path)}const v="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",C=new RegExp(`^https?://${y}/${v}/b/${s}/o${w}`,"i"),M={bucket:1,path:3},V=n===kI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,H="([^?#]*)",k=new RegExp(`^https?://${V}/${s}/${H}`,"i"),N=[{regex:h,indices:d,postModify:o},{regex:C,indices:M,postModify:m},{regex:k,indices:{bucket:1,path:2},postModify:m}];for(let U=0;U<N.length;U++){const Y=N[U],K=Y.regex.exec(e);if(K){const A=K[Y.indices.bucket];let I=K[Y.indices.path];I||(I=""),i=new Yn(A,I),Y.postModify(i);break}}if(i==null)throw HO(e);return i}}class $O{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t,e,n){let i=1,s=null,o=null,l=!1,h=0;function d(){return h===2}let m=!1;function v(...H){m||(m=!0,e.apply(null,H))}function y(H){s=setTimeout(()=>{s=null,t(C,d())},H)}function w(){o&&clearTimeout(o)}function C(H,...k){if(m){w();return}if(H){w(),v.call(null,H,...k);return}if(d()||l){w(),v.call(null,H,...k);return}i<64&&(i*=2);let N;h===1?(h=2,N=0):N=(i+Math.random())*1e3,y(N)}let M=!1;function V(H){M||(M=!0,w(),!m&&(s!==null?(H||(h=2),clearTimeout(s),y(0)):H||(h=1)))}return y(0),o=setTimeout(()=>{l=!0,V(!0)},n),V}function ZO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t){return t!==void 0}function Hy(t,e,n,i){if(i<e)throw jy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw jy(`Invalid value for '${t}'. Expected ${n} or less.`)}function QO(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ch;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ch||(Ch={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,n,i,s,o,l,h,d,m,v,y,w=!0,C=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=d,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=y,this.retry=w,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,V)=>{this.resolve_=M,this.reject_=V,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new pc(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=h=>{const d=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,m)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const h=o.getErrorCode()===Ch.NO_ERROR,d=o.getStatus();if(!h||YO(d,this.additionalRetryCodes_)&&this.retry){const v=o.getErrorCode()===Ch.ABORT;i(!1,new pc(!1,null,v));return}const m=this.successCodes_.indexOf(d)!==-1;i(!0,new pc(m,o))})},n=(i,s)=>{const o=this.resolve_,l=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(h,h.getResponse());KO(d)?o(d):o()}catch(d){l(d)}else if(h!==null){const d=UO();d.serverResponse=h.getErrorText(),this.errorCallback_?l(this.errorCallback_(h,d)):l(d)}else if(s.canceled){const d=this.appDelete_?RI():jO();l(d)}else{const d=BO();l(d)}};this.canceled_?n(!1,new pc(!1,null,!0)):this.backoffId_=GO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ZO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pc{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function JO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function eN(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tN(t,e){e&&(t["X-Firebase-GMPID"]=e)}function nN(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function iN(t,e,n,i,s,o,l=!0,h=!1){const d=QO(t.urlParams),m=t.url+d,v=Object.assign({},t.headers);return tN(v,e),JO(v,n),eN(v,o),nN(v,i),new XO(m,t.method,v,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function sN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this._service=e,n instanceof Yn?this._location=n:this._location=Yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new kh(e,n)}get root(){const e=new Yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sN(this._location.path)}get storage(){return this._service}get parent(){const e=rN(this._location.path);if(e===null)return null;const n=new Yn(this._location.bucket,e);return new kh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qO(e)}}function Wy(t,e){const n=e==null?void 0:e[VO];return n==null?null:Yn.makeFromBucketSpec(n,t)}function oN(t,e,n,i={}){t.host=`${e}:${n}`;const s=Ns(e);s&&(xm(`https://${t.host}/b`),Lm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:_E(o,t.app.options.projectId))}class aN{constructor(e,n,i,s,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=kI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FO,this._maxUploadRetryTime=zO,this._requests=new Set,s!=null?this._bucket=Yn.makeFromBucketSpec(s,this._host):this._bucket=Wy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yn.makeFromBucketSpec(this._url,e):this._bucket=Wy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Hy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Hy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new kh(this,e)}_makeRequest(e,n,i,s,o=!0){if(this._deleted)return new $O(RI());{const l=iN(e,this._appId,i,s,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()}}const qy="@firebase/storage",$y="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="storage";function lN(t=Dm(),e){t=$t(t);const i=Gh(t,xI).getImmediate({identifier:e}),s=pE("storage");return s&&uN(i,...s),i}function uN(t,e,n,i={}){oN(t,e,n,i)}function cN(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new aN(n,i,s,e,bs)}function hN(){ks(new zr(xI,cN,"PUBLIC").setMultipleInstances(!0)),pi(qy,$y,""),pi(qy,$y,"esm2017")}hN();const Rg=bm(Ah);tT(Rg);const Gy=pI(Rg);lN(Rg);function dN(t,e=400,n=18e4){var m;if(!Array.isArray(t)||!t.length)return[];const i=[...t].sort((v,y)=>(v.startTsMs??0)-(y.startTsMs??0)),s=[];let o=[];const l=(v,y)=>{const w=v.lat-y.lat,C=v.lng-y.lng;return w*w+C*C},d=(v=>{const y=v/111e3;return y*y*2})(e);for(let v=0;v<i.length;v++){const y=i[v],w={lat:y.lineStartLat??y.centroidLat,lng:y.lineStartLng??y.centroidLng},C={lat:y.lineEndLat??y.centroidLat,lng:y.lineEndLng??y.centroidLng};if(!w.lat||!w.lng||!C.lat||!C.lng)continue;if(!o.length){o.push([w.lat,w.lng],[C.lat,C.lng]);continue}const M=o[o.length-1],V={lat:M[0],lng:M[1]},H=(y.startTsMs??0)-(((m=i[v-1])==null?void 0:m.endTsMs)??0),k=l(V,w);H>n||k>d?(s.push(o),o=[[w.lat,w.lng],[C.lat,C.lng]]):o.push([w.lat,w.lng],[C.lat,C.lng])}return o.length>1&&s.push(o),s}function fN(t,e=600,n=3e5){if(!Array.isArray(t)||t.length===0)return[];const i=[...t].sort((v,y)=>(v.startTsMs??0)-(y.startTsMs??0)),s=(v,y)=>{const w=v.lat-y.lat,C=v.lng-y.lng;return w*w+C*C},l=(v=>{const y=v/111e3;return y*y*2})(e),h=[];let d=null,m=null;for(const v of i){const y={lat:v.lineStartLat??v.centroidLat,lng:v.lineStartLng??v.centroidLng},w={lat:v.lineEndLat??v.centroidLat,lng:v.lineEndLng??v.centroidLng};if(typeof y.lat!="number"||typeof y.lng!="number"||typeof w.lat!="number"||typeof w.lng!="number")continue;const C=v.roughnessClass||"smooth";if(!d){const U=[{lat:y.lat,lng:y.lng},{lat:w.lat,lng:w.lng}],Y=U.map(K=>[K.lat,K.lng]);h.push({id:v.id??`${v.h3??"h3"}-${v.startTsMs??"0"}`,coords:U,positions:Y,roughnessClass:C,roughnessPercent:v.roughnessPercent,segments:[v]}),d={...w},m=v;continue}const M=(v.startTsMs??0)-((m==null?void 0:m.endTsMs)??(m==null?void 0:m.startTsMs)??0),V=s(d,y),k=M>n||V>l?y:d,P=[{lat:k.lat,lng:k.lng},{lat:w.lat,lng:w.lng}],N=P.map(U=>[U.lat,U.lng]);h.push({id:v.id??`${v.h3??"h3"}-${v.startTsMs??"0"}`,coords:P,positions:N,roughnessClass:C,roughnessPercent:v.roughnessPercent,segments:[v]}),d={...w},m=v}return h}const Zy=[32.5,-98.4],Mc=11;function pN(t){return isFinite(t)?t>=90?"#00c853":t>=80?"#64dd17":t>=70?"#ffeb3b":t>=60?"#ff9800":"#f44336":"#9e9e9e"}function mN({onBoundsChange:t}){const e=OO({moveend(){if(!t)return;const n=e.getBounds();t({north:n.getNorth(),south:n.getSouth(),east:n.getEast(),west:n.getWest()})}});return Pl.useEffect(()=>{if(!t)return;const n=e.getBounds();t({north:n.getNorth(),south:n.getSouth(),east:n.getEast(),west:n.getWest()})},[e,t]),null}function gN(){return bp.divIcon({className:"pothole-diamond-icon",html:`<div style="
      width:16px;
      height:16px;
      background:#000;
      transform:rotate(45deg);
      border-radius:2px;
      ">
    </div>`,iconSize:[16,16],iconAnchor:[16/2,16/2]})}function _N(t,e){var d;if(!t||!e)return null;const n=e.location||e.loc||e.coordinates||e.position||null,i=n&&typeof n.latitude=="number"&&typeof n.longitude=="number",s=(i?n.latitude:null)??(typeof e.latitude=="number"?e.latitude:null)??(typeof e.lat=="number"?e.lat:null)??(typeof e.centroidLat=="number"?e.centroidLat:null),o=(i?n.longitude:null)??(typeof e.longitude=="number"?e.longitude:null)??(typeof e.lng=="number"?e.lng:null)??(typeof e.centroidLng=="number"?e.centroidLng:null);if(s===null||o===null)return null;const l=typeof e.severity=="number"?e.severity:typeof e.maxSeverity=="number"?e.maxSeverity:null,h=typeof e.tsMs=="number"?e.tsMs:typeof e.timestampMs=="number"?e.timestampMs:(d=e.createdAt)!=null&&d.toMillis?e.createdAt.toMillis():null;return{id:t,lat:s,lng:o,severity:l,status:e.status||e.state||null,timestamp:h,cityId:e.cityId||null}}function vN(t){if(!t||!Number.isFinite(t))return"N/A";const e=new Date(t);return Number.isNaN(e.getTime())?"N/A":e.toLocaleString()}function yN(t){const e=typeof t.lat=="number"&&typeof t.lng=="number"?`${t.lat.toFixed(6)}, ${t.lng.toFixed(6)}`:"N/A",n=typeof t.severity=="number"?t.severity.toFixed(1):"N/A",i=t.status||"N/A",s=vN(t.timestamp);return`
    <div style="min-width:200px;font-family:sans-serif;line-height:1.4;">
      <div style="font-weight:700;margin-bottom:6px;">Pothole</div>
      <div><strong>ID:</strong> ${t.id}</div>
      <div><strong>Timestamp:</strong> ${s}</div>
      <div><strong>Lat/Lng:</strong> ${e}</div>
      <div><strong>Severity:</strong> ${n}</div>
      <div><strong>Status:</strong> ${i}</div>
    </div>
  `}function wN({cityId:t}){const e=CI(),n=se.useRef(null),i=se.useRef(new Map),s=se.useRef(!1),o=se.useRef(gN());return se.useEffect(()=>{if(!e)return;n.current||(n.current=bp.layerGroup(),n.current.addTo(e));const l=()=>{var v;(v=n.current)==null||v.clearLayers(),i.current.clear()};if(!t||!Gy){l();return}const h=kp(Gy,"telemetryPotholes"),d=xp(h,al("cityId","==",t),Lp("createdAt","desc"),Op(2e3)),m=_O(d,v=>{v.docChanges().forEach(y=>{var H;const w=y.doc.id;if(y.type==="removed"){const k=i.current.get(w);k&&((H=n.current)==null||H.removeLayer(k),i.current.delete(w));return}const C=_N(w,y.doc.data());if(!C)return;const M=i.current.has(w),V=yN(C);if(M){const k=i.current.get(w);k.setLatLng([C.lat,C.lng]),k.setPopupContent(V)}else{const k=bp.marker([C.lat,C.lng],{icon:o.current});k.bindPopup(V),k.addTo(n.current),i.current.set(w,k),!s.current&&e&&(e.setView([C.lat,C.lng],e.getZoom()||Mc),s.current=!0)}})},v=>{});return()=>{m(),l()}},[t,e]),null}const EN=({segments:t,cityId:e,height:n=480,onBoundsChange:i})=>{const s=se.useMemo(()=>dN(t),[t]),o=se.useMemo(()=>fN(t||[]),[t]),{center:l,zoom:h}=se.useMemo(()=>{const d=Array.isArray(t)&&t.length>0;if(!d)return{center:Zy,zoom:Mc};let m=0,v=0,y=0;if(d)for(const w of t)typeof w.centroidLat=="number"&&typeof w.centroidLng=="number"&&(m+=w.centroidLat,v+=w.centroidLng,y+=1);return y===0?{center:Zy,zoom:Mc}:{center:[m/y,v/y],zoom:Mc}},[t]);return $.jsx("div",{style:{width:"100%",height:n},children:$.jsxs(bO,{center:l,zoom:h,scrollWheelZoom:!0,style:{width:"100%",height:"100%",borderRadius:"16px",overflow:"hidden"},children:[$.jsx(MO,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),i&&$.jsx(mN,{onBoundsChange:i}),s.map((d,m)=>$.jsx(By,{positions:d,pathOptions:{color:"#ff9090",weight:6,opacity:.4,lineCap:"round",lineJoin:"round"},interactive:!1},`base-${m}`)),o.map((d,m)=>{const v=(d.coords||[]).map(M=>[M.lat,M.lng]);if(v.length<2)return null;const y=d.segments||[];let w=null;if(y.length>0){const M=y.map(V=>V.roughnessPercent).filter(V=>typeof V=="number"&&isFinite(V));M.length>0&&(w=M.reduce((H,k)=>H+k,0)/M.length)}w==null&&typeof d.roughnessPercent=="number"&&(w=d.roughnessPercent);const C=pN(w??NaN);return $.jsx(By,{positions:v,pathOptions:{color:C,weight:8,opacity:.9,lineCap:"round",lineJoin:"round"},children:$.jsx(DO,{children:$.jsxs("div",{style:{minWidth:160},children:[$.jsx("div",{style:{fontWeight:700,marginBottom:4},children:"Road segment"}),$.jsxs("div",{children:["Road smoothness:"," ",typeof w=="number"&&isFinite(w)?`${w.toFixed(1)}%`:""]})]})})},d.id||m)}),$.jsx(wN,{cityId:e})]})})},Vc=!!(Ah.projectId&&Ah.projectId.trim()),Rh=Vc?bm(Ah):null,nn=Rh?tT(Rh):null,Di=Rh?pI(Rh):null;function TN(t){return t==null||!isFinite(t)?"unknown":t>=90?"good":t>=80?"fair":t>=70?"watch":t>=60?"poor":"critical"}function Ky(t){if(t==="all")return null;const e=new Date;let n;switch(t){case"7d":n=7*24*60*60*1e3;break;case"90d":n=90*24*60*60*1e3;break;case"30d":default:n=30*24*60*60*1e3;break}return new Date(e.getTime()-n)}function IN(){var ye,fe,rt,cn;const[t,e]=se.useState(""),[n,i]=se.useState(""),[s,o]=se.useState(null),[l,h]=se.useState(null),[d,m]=se.useState(!1),[v,y]=se.useState("idle"),[w,C]=se.useState(null),[M,V]=se.useState(null),[H,k]=se.useState({status:"idle",list:[],error:null}),[P,N]=se.useState({status:"idle",list:[],error:null}),[U,Y]=se.useState("30d"),[K,A]=se.useState({good:!0,fair:!0,watch:!0,poor:!0,critical:!0}),[I,S]=se.useState({highway:!0,local:!0,other:!0}),[R,b]=se.useState(0),[D,O]=se.useState(!1),[Me,Mn]=se.useState(null),[Ge,Pt]=se.useState("recent"),[W,le]=se.useState("list"),X=se.useMemo(()=>Array.isArray(H.list)?H.list.filter(re=>{const Se=re.roughnessPercent,ze=TN(Se);if(ze!=="unknown"&&!K[ze])return!1;const ke=(re.roadTypeHint||"").toLowerCase();let Re="other";if(ke==="highway"||ke==="arterial"?Re="highway":(ke==="local"||ke==="residential")&&(Re="local"),!I[Re])return!1;const dt=typeof re.sampleCount=="number"?re.sampleCount:0;if(R>0&&dt<R)return!1;if(D&&Me){const at=re.centroidLat,Jt=re.centroidLng;if(typeof at=="number"&&typeof Jt=="number"){const{north:Vn,south:Fn,east:zn,west:Un}=Me,Xi=at>=Fn&&at<=Vn,Vs=Jt>=Un&&Jt<=zn;if(!Xi||!Vs)return!1}}return!0}):[],[H.list,K,I,R,D,Me]);se.useEffect(()=>nn?fk(nn,Se=>{o(Se)},Se=>{h(Se)}):void 0,[]),se.useEffect(()=>{if(!s||!Di){y("idle"),C(null),V(null);return}let re=!0;return(async()=>{y("checking"),h(null),C(null),V(null);try{const ze=await gO(iO(Di,"municipalUsers",s.uid));if(!ze.exists()){if(!re)return;y("unauthorized");return}const ke=ze.data(),Re=typeof ke.cityId=="string"?ke.cityId.trim():"",dt=ke.active===!0;if(!Re||!dt){if(!re)return;y("unauthorized");return}const at=typeof ke.role=="string"&&ke.role.trim()?ke.role.trim():"viewer";if(!re)return;C(Re),V(at),y("authorized")}catch(ze){if(!re)return;y("unauthorized"),h(ze)}})(),()=>{re=!1}},[Di,s]),se.useEffect(()=>{if(v!=="authorized"||!w||!Di){k({status:"idle",list:[],error:null});return}let re=!0;return(async(ze="30d")=>{k({status:"loading",list:[],error:null});try{const ke=kp(Di,"telemetrySegmentPasses"),Re=[al("cityId","==",w),Lp("createdAt","desc")],dt=Ky(ze);dt&&Re.push(al("createdAt",">=",dt)),Re.push(Op(2e3));const at=xp(ke,...Re),Jt=nn==null?void 0:nn.currentUser,Fn=(await Uy(at)).docs.map(zn=>({id:zn.id,...zn.data()}));if(!re)return;k({status:"success",list:Fn,error:null})}catch(ke){if(!re)return;console.error("[municipal] telemetry query FAILED",{code:ke==null?void 0:ke.code,message:ke==null?void 0:ke.message}),k({status:"error",list:[],error:ke})}})(U),()=>{re=!1}},[v,w,Di,U]),se.useEffect(()=>{if(v!=="authorized"||!w||!Di){N({status:"idle",list:[],error:null});return}let re=!0;return(async(ze="30d",ke="recent")=>{N({status:"loading",list:[],error:null});try{const Re=kp(Di,"telemetryPotholes"),dt=[al("cityId","==",w),Lp("createdAt","desc")],at=ke==="all"?null:Ky(ze);at&&dt.push(al("createdAt",">=",at)),dt.push(Op(2e3));const Jt=xp(Re,...dt),Vn=nn==null?void 0:nn.currentUser,zn=(await Uy(Jt)).docs.map(Un=>({id:Un.id,...Un.data()}));if(!re)return;N({status:"success",list:zn,error:null})}catch(Re){if(!re)return;console.error("[municipal] pothole query FAILED",{code:Re==null?void 0:Re.code,message:Re==null?void 0:Re.message}),N({status:"error",list:[],error:Re})}})(U,Ge),()=>{re=!1}},[v,w,Di,Ge,U]);const ue=se.useMemo(()=>!nn||!t.trim()||!n.trim()||d,[nn,t,n,d]);se.useMemo(()=>{if(!Array.isArray(P.list))return[];if(!D||!Me)return P.list;const{north:re,south:Se,east:ze,west:ke}=Me;return P.list.filter(Re=>{const dt=Re.lat??Re.latitude??Re.centroidLat,at=Re.lng??Re.longitude??Re.centroidLng;if(typeof dt!="number"||typeof at!="number")return!1;const Jt=dt>=Se&&dt<=re,Vn=at>=ke&&at<=ze;return Jt&&Vn})},[Me,P.list,D]);const me=async re=>{if(re.preventDefault(),!nn){h({code:"auth/config-missing",message:"Firebase is not configured."});return}m(!0),h(null);try{const Se=await ck(nn,t,n);o(Se.user)}catch(Se){h(Se)}finally{m(!1)}},we=async()=>{if(nn){h(null);try{await pk(nn)}catch(re){h(re)}}},De=re=>{if(!re)return"";let Se=null;return typeof re.toDate=="function"?Se=re.toDate():re instanceof Date?Se=re:Se=new Date(re),!Se||!Number.isFinite(Se.getTime())?"":Se.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})};return $.jsxs("main",{children:[$.jsx("h1",{children:"MileMend Municipal Portal"}),$.jsxs("p",{children:["Firebase configured: ",Vc?"YES":"NO"]}),!Vc&&$.jsx("p",{children:"Please provide Firebase environment variables to enable sign-in."}),Vc&&$.jsxs($.Fragment,{children:[$.jsxs("form",{onSubmit:me,children:[$.jsxs("div",{children:[$.jsx("label",{htmlFor:"email",children:"Email"}),$.jsx("input",{id:"email",type:"email",value:t,onChange:re=>e(re.target.value),autoComplete:"email"})]}),$.jsxs("div",{children:[$.jsx("label",{htmlFor:"password",children:"Password"}),$.jsx("input",{id:"password",type:"password",value:n,onChange:re=>i(re.target.value),autoComplete:"current-password"})]}),$.jsxs("div",{children:[$.jsx("button",{type:"submit",disabled:ue,children:d?"Signing In...":"Sign In"}),$.jsx("button",{type:"button",onClick:we,disabled:!s,children:"Sign Out"})]})]}),l&&$.jsxs("div",{children:[$.jsxs("p",{children:["Error code: ",$.jsx("code",{children:l.code})]}),$.jsxs("p",{children:["Error message: ",l.message]})]}),s&&$.jsxs("div",{children:[$.jsxs("p",{children:["Logged in as: ",s.email]}),$.jsxs("p",{children:["UID: ",s.uid]})]}),s&&$.jsxs("div",{children:[v==="checking"&&$.jsx("p",{children:"Checking municipal access..."}),v==="unauthorized"&&$.jsxs("div",{children:[$.jsx("h2",{children:"NOT AUTHORIZED"}),$.jsxs("p",{children:["Ask MileMend admin to add municipalUsers/",s.uid," with cityId + active:true"]})]}),v==="authorized"&&$.jsxs("div",{children:[$.jsx("h2",{children:"Municipal Dashboard"}),$.jsxs("p",{children:["City ID: ",w]}),$.jsxs("p",{children:["Role: ",M]}),$.jsx("p",{children:"Welcome to the Municipal Dashboard shell."}),$.jsxs("section",{style:{marginTop:"24px"},children:[$.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,marginBottom:12},children:[$.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[$.jsx("span",{style:{fontWeight:600},children:"Data window:"}),$.jsxs("select",{value:U,onChange:re=>Y(re.target.value),style:{padding:"4px 8px",borderRadius:4},children:[$.jsx("option",{value:"7d",children:"Last 7 days"}),$.jsx("option",{value:"30d",children:"Last 30 days"}),$.jsx("option",{value:"90d",children:"Last 90 days"}),$.jsx("option",{value:"all",children:"All data"})]})]}),$.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[$.jsx("span",{style:{fontWeight:600},children:"Condition:"}),[{key:"good",label:"Good (90100%)"},{key:"fair",label:"Fair (8089.9%)"},{key:"watch",label:"Watch (7079.9%)"},{key:"poor",label:"Poor (6069.9%)"},{key:"critical",label:"Critical (059.9%)"}].map(re=>$.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4},children:[$.jsx("input",{type:"checkbox",checked:K[re.key],onChange:Se=>A(ze=>({...ze,[re.key]:Se.target.checked}))}),$.jsx("span",{children:re.label})]},re.key))]}),$.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",flexWrap:"wrap"},children:[$.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[$.jsx("span",{style:{fontWeight:600},children:"Road type:"}),[{key:"highway",label:"Highways"},{key:"local",label:"Local streets"},{key:"other",label:"Other"}].map(re=>$.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4},children:[$.jsx("input",{type:"checkbox",checked:I[re.key],onChange:Se=>S(ze=>({...ze,[re.key]:Se.target.checked}))}),$.jsx("span",{children:re.label})]},re.key))]}),$.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[$.jsx("span",{style:{fontWeight:600},children:"Min samples:"}),$.jsxs("select",{value:R,onChange:re=>b(Number(re.target.value)),style:{padding:"4px 8px",borderRadius:4},children:[$.jsx("option",{value:0,children:"All"}),$.jsx("option",{value:50,children:"50+"}),$.jsx("option",{value:100,children:"100+"}),$.jsx("option",{value:200,children:"200+"})]})]}),$.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4},children:[$.jsx("input",{type:"checkbox",checked:D,onChange:re=>O(re.target.checked)}),$.jsx("span",{children:"Only segments in current map view"})]})]})]}),$.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[$.jsx("h2",{children:"Recent Road Telemetry"}),$.jsxs("div",{style:{display:"inline-flex",borderRadius:"999px",background:"#0f172a",padding:"2px"},children:[$.jsx("button",{type:"button",onClick:()=>le("list"),style:{padding:"4px 10px",borderRadius:"999px",border:"none",backgroundColor:W==="list"?"#1d4ed8":"transparent",color:"#f9fafb",cursor:"pointer",fontSize:"12px",fontWeight:600},children:"List"}),$.jsx("button",{type:"button",onClick:()=>le("map"),style:{padding:"4px 10px",borderRadius:"999px",border:"none",backgroundColor:W==="map"?"#1d4ed8":"transparent",color:"#f9fafb",cursor:"pointer",fontSize:"12px",fontWeight:600},children:"Map"})]})]}),$.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",marginBottom:12},children:[$.jsx("span",{style:{fontWeight:600},children:"Time range:"}),$.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4},children:[$.jsx("input",{type:"radio",name:"time-filter",value:"recent",checked:Ge==="recent",onChange:()=>Pt("recent")}),$.jsx("span",{children:"Recent only"})]}),$.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4},children:[$.jsx("input",{type:"radio",name:"time-filter",value:"all",checked:Ge==="all",onChange:()=>Pt("all")}),$.jsx("span",{children:"All data"})]})]}),H.status==="loading"&&$.jsx("p",{children:"Loading segments"}),H.status==="error"&&$.jsxs("p",{style:{color:"red"},children:["Failed to load segment data."," ",((ye=H.error)==null?void 0:ye.code)??""," "," ",((fe=H.error)==null?void 0:fe.message)??String(H.error)]}),P.status==="loading"&&$.jsx("p",{children:"Loading potholes"}),P.status==="error"&&$.jsxs("p",{style:{color:"red"},children:["Failed to load pothole data."," ",((rt=P.error)==null?void 0:rt.code)??""," "," ",((cn=P.error)==null?void 0:cn.message)??String(P.error)]}),H.status==="success"&&H.list.length===0&&$.jsx("p",{children:"No segment telemetry found for this city yet."}),H.status==="success"&&X.length>0&&W==="list"&&$.jsxs("table",{style:{width:"100%",marginTop:"12px"},children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{style:{textAlign:"left"},children:"Segment (h3)"}),$.jsx("th",{style:{textAlign:"left"},children:"Road smoothness"}),$.jsx("th",{style:{textAlign:"left"},children:"Created"})]})}),$.jsx("tbody",{children:X.map(re=>{const Se=typeof re.roughnessPercent=="number"?`${re.roughnessPercent.toFixed(1)}%`:"",ze=De(re.createdAt);return $.jsxs("tr",{children:[$.jsx("td",{children:re.h3}),$.jsx("td",{children:Se}),$.jsx("td",{children:ze})]},re.id)})})]}),H.status==="success"&&X.length>0&&W==="map"&&$.jsx(EN,{segments:X,cityId:w,height:480,onBoundsChange:Mn})]})]})]})]})]})}const PN=cf.createRoot(document.getElementById("root"));PN.render($.jsx(Pl.StrictMode,{children:$.jsx(IN,{})}));
